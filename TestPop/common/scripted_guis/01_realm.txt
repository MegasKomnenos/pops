toggle_player_realm = { 
	scope = character
	is_shown = { 
		always = yes
	}
	is_valid = { 
		always = yes
	}
	effect = { 
		every_in_global_list = { 
			limit = { 
				is_target_in_variable_list = { 
					name = region_controls
					target = prev
				}
			}
			variable = region_regions
			set_variable = { 
				name = region_control
				value = -1
			}
			set_variable = { 
				name = region_dist
				value = -1
			}
			set_variable = { 
				name = region_cost
				value = -1
			}
			set_variable = { 
				name = region_cost_total
				value = -1
			}
			set_variable = { 
				name = region_garrison
				value = -1
			}
			set_global_variable = { 
				name = toggle_player_realm_t
				value = 0
			}
			every_in_list = { 
				variable = region_controls
				if = { 
					limit = { 
						this = root
					}
					prev = { 
						set_global_variable = { 
							name = array_get_t
							value = global_var:toggle_player_realm_t
						}
						if = { 
							limit = { 
								OR = { 
									NOT = { 
										has_global_variable = array_get_t
									}
									global_var:array_get_t = 0
								}
							}
							ordered_in_list = { 
								variable = array_region_controls
								position = 0
								prev = { 
									set_variable = { 
										name = region_control
										value = prev
									}
								}
							}
						}
						else = { 
							ordered_in_list = { 
								variable = array_region_controls
								position = global_var:array_get_t.compare_value
								prev = { 
									set_variable = { 
										name = region_control
										value = prev
									}
								}
							}
						}
						change_variable = { 
							name = region_control
							divide = 100
						}
						remove_global_variable = array_get_t
					}
				}
				change_global_variable = { 
					name = toggle_player_realm_t
					add = 1
				}
			}
			set_global_variable = { 
				name = toggle_player_realm_t
				value = 0
			}
			every_in_list = { 
				variable = region_dists
				if = { 
					limit = { 
						this = root
					}
					prev = { 
						set_global_variable = { 
							name = array_get_t
							value = global_var:toggle_player_realm_t
						}
						if = { 
							limit = { 
								OR = { 
									NOT = { 
										has_global_variable = array_get_t
									}
									global_var:array_get_t = 0
								}
							}
							ordered_in_list = { 
								variable = array_region_dists
								position = 0
								prev = { 
									set_variable = { 
										name = region_dist
										value = prev
									}
								}
							}
						}
						else = { 
							ordered_in_list = { 
								variable = array_region_dists
								position = global_var:array_get_t.compare_value
								prev = { 
									set_variable = { 
										name = region_dist
										value = prev
									}
								}
							}
						}
						change_variable = { 
							name = region_dist
							divide = 10
						}
						remove_global_variable = array_get_t
					}
				}
				change_global_variable = { 
					name = toggle_player_realm_t
					add = 1
				}
			}
			set_global_variable = { 
				name = toggle_player_realm_t
				value = 0
			}
			every_in_list = { 
				variable = region_costs
				if = { 
					limit = { 
						this = root
					}
					prev = { 
						set_global_variable = { 
							name = array_get_t
							value = global_var:toggle_player_realm_t
						}
						if = { 
							limit = { 
								OR = { 
									NOT = { 
										has_global_variable = array_get_t
									}
									global_var:array_get_t = 0
								}
							}
							ordered_in_list = { 
								variable = array_region_costs
								position = 0
								prev = { 
									set_variable = { 
										name = region_cost
										value = prev
									}
								}
							}
						}
						else = { 
							ordered_in_list = { 
								variable = array_region_costs
								position = global_var:array_get_t.compare_value
								prev = { 
									set_variable = { 
										name = region_cost
										value = prev
									}
								}
							}
						}
						change_variable = { 
							name = region_cost
							divide = 10
						}
						remove_global_variable = array_get_t
					}
				}
				change_global_variable = { 
					name = toggle_player_realm_t
					add = 1
				}
			}
			set_global_variable = { 
				name = toggle_player_realm_t
				value = 0
			}
			every_in_list = { 
				variable = region_costs_total
				if = { 
					limit = { 
						this = root
					}
					prev = { 
						set_global_variable = { 
							name = array_get_t
							value = global_var:toggle_player_realm_t
						}
						if = { 
							limit = { 
								OR = { 
									NOT = { 
										has_global_variable = array_get_t
									}
									global_var:array_get_t = 0
								}
							}
							ordered_in_list = { 
								variable = array_region_costs_total
								position = 0
								prev = { 
									set_variable = { 
										name = region_cost_total
										value = prev
									}
								}
							}
						}
						else = { 
							ordered_in_list = { 
								variable = array_region_costs_total
								position = global_var:array_get_t.compare_value
								prev = { 
									set_variable = { 
										name = region_cost_total
										value = prev
									}
								}
							}
						}
						change_variable = { 
							name = region_cost_total
							divide = 10
						}
						remove_global_variable = array_get_t
					}
				}
				change_global_variable = { 
					name = toggle_player_realm_t
					add = 1
				}
			}
			set_global_variable = { 
				name = toggle_player_realm_t
				value = 0
			}
			every_in_list = { 
				variable = region_garrisons
				if = { 
					limit = { 
						this = root
					}
					prev = { 
						set_global_variable = { 
							name = array_get_t
							value = global_var:toggle_player_realm_t
						}
						if = { 
							limit = { 
								OR = { 
									NOT = { 
										has_global_variable = array_get_t
									}
									global_var:array_get_t = 0
								}
							}
							ordered_in_list = { 
								variable = array_region_garrisons
								position = 0
								prev = { 
									set_variable = { 
										name = region_garrison
										value = prev
									}
								}
							}
						}
						else = { 
							ordered_in_list = { 
								variable = array_region_garrisons
								position = global_var:array_get_t.compare_value
								prev = { 
									set_variable = { 
										name = region_garrison
										value = prev
									}
								}
							}
						}
						change_variable = { 
							name = region_garrison
							divide = 100
						}
						remove_global_variable = array_get_t
					}
				}
				change_global_variable = { 
					name = toggle_player_realm_t
					add = 1
				}
			}
			if = { 
				limit = { 
					NOT = { 
						var:region_garrison = -1
					}
				}
				change_variable = { 
					name = region_garrison
					add = 0.01
				}
			}
			change_variable = { 
				name = region_dist
				divide = 1000
			}
			change_variable = { 
				name = region_dist
				multiply = 10
			}
			prev = { 
				add_to_variable_list = { 
					name = toggle_player_realm_regions
					target = prev
				}
			}
		}
		remove_global_variable = toggle_player_realm_t
	}
}
close_player_realm = { 
	scope = character
	is_shown = { 
		always = yes
	}
	is_valid = { 
		always = yes
	}
	effect = { 
		every_in_list = { 
			variable = toggle_player_realm_regions
			remove_variable = region_control
			remove_variable = region_dist
			remove_variable = region_cost
			remove_variable = region_cost_total
			remove_variable = region_garrison
		}
		clear_variable_list = toggle_player_realm_regions
	}
}
