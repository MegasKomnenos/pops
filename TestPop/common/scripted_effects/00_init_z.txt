init_main = {
	init_prov_size = yes
	init_prov_data = yes
	init_pop_weight = yes
	init_pop_total = yes
	init_farm_score = yes
	init_pasture_score = yes
	init_forest_score = yes
	init_land = yes
	init_price = yes
	init_extraction = yes
	init_city = yes
	init_industry_templates = yes
	init_industry = yes
	init_pay = yes
	init_freedom = yes
	init_merchants = yes
	init_tech = yes
	init_buildings = yes
	
	every_province = {
		limit = {
			is_valid_prov = yes
		}
		get_land_cost = { return = prov_cost }
	}
	every_in_global_list = {
		variable = every_water
		
		get_land_cost = { return = prov_cost }
	}
	
	set_global_variable = { name = trade_route_max value = 0 }
	
	every_county = {
		limit = {
			any_county_province = {
				is_valid_prov = yes
			}
		}
		set_variable = { name = pop_total value = 1 }
		
		^^goods^
			set_variable = { name = trade_has_&goods& value = 0 }
			set_variable = { name = trade_sum_sply_&goods& value = 0 }
		^
		
		set_variable = { name = prod_tools value = 0 }
		set_variable = { name = prod_effic value = 1 }
		
		set_variable = { name = prod_tools_mud value = 0.25 }
		set_variable = { name = prod_tools_timber value = 0.5 }
		set_variable = { name = prod_tools_metal value = 1 }
		set_variable = { name = prod_tools_tools value = 8 }
		set_variable = { name = prod_tools_industrial value = 4 }
		
		set_variable = { name = prod_tools_dmnd_mud value = 0 }
		set_variable = { name = prod_tools_dmnd_timber value = 0 }
		set_variable = { name = prod_tools_dmnd_metal value = 0 }
		set_variable = { name = prod_tools_dmnd_tools value = 0 }
		set_variable = { name = prod_tools_dmnd_industrial value = 0 }
		
		set_variable = { name = prod_tools_in_mud value = 0 }
		set_variable = { name = prod_tools_in_timber value = 0 }
		set_variable = { name = prod_tools_in_metal value = 0 }
		set_variable = { name = prod_tools_in_tools value = 0 }
		set_variable = { name = prod_tools_in_industrial value = 0 }
		
		every_county_province = {
			limit = {
				is_valid_prov = yes
			}	
			^^goods^set_variable = { name = prod_has_&goods& value = 1 }^
			
			prev = {
				^^goods^change_variable = { name = trade_has_&goods& add = 1 }^
			}
			
			if = {
				limit = {
					NOT = {
						has_variable = workshop_total
					}
				}
				set_variable = { name = workshop_total value = 0 }
			}
			if = {
				limit = {
					NOT = {
						has_variable = extraction_total
					}
				}
				set_variable = { name = extraction_total value = 0 }
			}
			
			set_variable = { name = workshop_max value = 210000 }
			
			set_variable = { name = farm_max value = var:farm_total }
			set_variable = { name = pasture_max value = var:pasture_total }
			set_variable = { name = forest_max value = var:forest_total }
			set_variable = { name = extraction_max value = var:extraction_total }
			
			change_variable = { name = farm_max multiply = 2 }
			change_variable = { name = pasture_max multiply = 2 }
			change_variable = { name = forest_max multiply = 2 }
			change_variable = { name = extraction_max multiply = 2 }
			
			set_variable = { name = init_main_t value = var:farm_total }
			change_variable = { name = init_main_t add = var:pasture_total }
			change_variable = { name = init_main_t add = var:forest_total }
			change_variable = { name = init_main_t add = var:extraction_total }
			change_variable = { name = init_main_t add = var:workshop_total }
			change_variable = { name = init_main_t divide = 1.5 }
			
			change_variable = { name = farm_total multiply = var:pop_total }
			change_variable = { name = pasture_total multiply = var:pop_total }
			change_variable = { name = forest_total multiply = var:pop_total }
			change_variable = { name = extraction_total multiply = var:pop_total }
			
			change_variable = { name = farm_total divide = var:init_main_t }
			change_variable = { name = pasture_total divide = var:init_main_t }
			change_variable = { name = forest_total divide = var:init_main_t }
			change_variable = { name = extraction_total divide = var:init_main_t }
			
			change_variable = { name = farm_total divide = 1000 }
			change_variable = { name = farm_total multiply = 1000 }
			change_variable = { name = farm_total add = 1 }
			
			change_variable = { name = pasture_total divide = 1000 }
			change_variable = { name = pasture_total multiply = 1000 }
			change_variable = { name = pasture_total add = 1 }
			
			change_variable = { name = forest_total divide = 1000 }
			change_variable = { name = forest_total multiply = 1000 }
			change_variable = { name = forest_total add = 1 }
			
			change_variable = { name = extraction_total divide = 1000 }
			change_variable = { name = extraction_total multiply = 1000 }
			
			if = {
				limit = {
					var:farm_total = {
						compare_value > prev.var:farm_max
					}
				}
				set_variable = { name = farm_total value = var:farm_max }
			}
			if = {
				limit = {
					var:pasture_total = {
						compare_value > prev.var:pasture_max
					}
				}
				set_variable = { name = pasture_total value = var:pasture_max }
			}
			if = {
				limit = {
					var:forest_total = {
						compare_value > prev.var:forest_max
					}
				}
				set_variable = { name = forest_total value = var:forest_max }
			}
			if = {
				limit = {
					has_variable = extraction_total 
					
					var:extraction_total > 0
					
					var:extraction_total = {
						compare_value > prev.var:extraction_max
					}
				}
				set_variable = { name = extraction_total value = var:extraction_max }
			}
			
			set_variable = { name = pop_pay_serf value = 0 }
			set_variable = { name = pop_pay_free value = 0 }
			
			set_variable = { name = pop_earn_serf value = 0 }
			set_variable = { name = pop_earn_free value = 0 }
			
			set_variable = { name = pop_calorie value = 0 }
			set_variable = { name = pop_nutrient value = 0 }
			set_variable = { name = pop_comfort value = 0 }
			set_variable = { name = pop_luxury value = 0 }
			
			set_variable = { name = pop_wealth value = var:pop_total }
			change_variable = { name = pop_wealth multiply = var:pop_freedom }
			change_variable = { name = pop_wealth multiply = 12 }
			
			set_variable = { name = trade_route value = 0 }
			
			remove_variable = pop_weight
			remove_variable = farm_score
			remove_variable = pasture_score
			remove_variable = forest_score
		}
	}
	
	modi_refresh = yes
}