create_character = {
	save_temporary_scope_as = prod_new_template_temp
	gender = male
	trait = character_not_1
	employer = global_var:arhat
	faith = global_var:arhat.faith
	culture = global_var:arhat.culture
}
set_global_variable = {
	name = sheep
	value = scope:prod_new_template_temp
}
add_to_global_variable_list = {
	name = prod_templates
	target = scope:prod_new_template_temp
}
scope:prod_new_template_temp = {
	add_character_flag = {
		flag = prod_land_pasture
	}
	set_variable = {
		name = prod_labor
		value = 1
	}
	set_variable = {
		name = prod_land
		value = 2
	}
	set_variable = {
		name = prod_sply_fiber
		value = 2
	}
}
create_character = {
	save_temporary_scope_as = prod_new_template_temp
	gender = male
	trait = character_not_1
	employer = global_var:arhat
	faith = global_var:arhat.faith
	culture = global_var:arhat.culture
}
set_global_variable = {
	name = cloth
	value = scope:prod_new_template_temp
}
add_to_global_variable_list = {
	name = prod_templates
	target = scope:prod_new_template_temp
}
scope:prod_new_template_temp = {
	add_character_flag = {
		flag = prod_land_workshop
	}
	set_variable = {
		name = prod_labor
		value = 1
	}
	set_variable = {
		name = prod_land
		value = 1
	}
	set_variable = {
		name = prod_dmnd_fiber
		value = 2
	}
	set_variable = {
		name = prod_sply_textile
		value = 2
	}
}
province:2543 = {
	set_variable = {
		name = workshop_total
		value = 10
	}
}
if = {
	limit = {
		has_global_variable = sheep
	}
	create_character = {
		save_temporary_scope_as = prod_new_instance_temp
		gender = male
		trait = character_not_1
		employer = global_var:arhat
		faith = global_var:arhat.faith
		culture = global_var:arhat.culture
	}
	add_to_global_variable_list = {
		name = prod_instances
		target = scope:prod_new_instance_temp
	}
	global_var:sheep = {
		add_to_variable_list = {
			name = prod_instances
			target = scope:prod_new_instance_temp
		}
	}
	province:2563 = {
		add_to_variable_list = {
			name = prod_instances
			target = scope:prod_new_instance_temp
		}
	}
	scope:prod_new_instance_temp = {
		set_variable = {
			name = prod_template
			value = global_var:sheep
		}
		set_variable = {
			name = prod_location
			value = province:2563
		}
		set_variable = {
			name = prod_size
			value = 2
		}
		set_variable = {
			name = prod_labor
			value = 0
		}
		set_variable = {
			name = prod_land
			value = 0
		}
		set_variable = {
			name = prod_size_actual
			value = 0
		}
		set_variable = {
			name = prod_labor_actual
			value = 0
		}
		set_variable = {
			name = prod_land_actual
			value = 0
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_food
				}
			}
			set_variable = {
				name = prod_dmnd_food
				value = 0
			}
			set_variable = {
				name = prod_in_food
				value = 0
			}
			set_variable = {
				name = prod_pay_food
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_food
				}
			}
			set_variable = {
				name = prod_sply_food
				value = 0
			}
			set_variable = {
				name = prod_out_food
				value = 0
			}
			set_variable = {
				name = prod_earn_food
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_fuel
				}
			}
			set_variable = {
				name = prod_dmnd_fuel
				value = 0
			}
			set_variable = {
				name = prod_in_fuel
				value = 0
			}
			set_variable = {
				name = prod_pay_fuel
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_fuel
				}
			}
			set_variable = {
				name = prod_sply_fuel
				value = 0
			}
			set_variable = {
				name = prod_out_fuel
				value = 0
			}
			set_variable = {
				name = prod_earn_fuel
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_fiber
				}
			}
			set_variable = {
				name = prod_dmnd_fiber
				value = 0
			}
			set_variable = {
				name = prod_in_fiber
				value = 0
			}
			set_variable = {
				name = prod_pay_fiber
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_fiber
				}
			}
			set_variable = {
				name = prod_sply_fiber
				value = 0
			}
			set_variable = {
				name = prod_out_fiber
				value = 0
			}
			set_variable = {
				name = prod_earn_fiber
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_pottery
				}
			}
			set_variable = {
				name = prod_dmnd_pottery
				value = 0
			}
			set_variable = {
				name = prod_in_pottery
				value = 0
			}
			set_variable = {
				name = prod_pay_pottery
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_pottery
				}
			}
			set_variable = {
				name = prod_sply_pottery
				value = 0
			}
			set_variable = {
				name = prod_out_pottery
				value = 0
			}
			set_variable = {
				name = prod_earn_pottery
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_textile
				}
			}
			set_variable = {
				name = prod_dmnd_textile
				value = 0
			}
			set_variable = {
				name = prod_in_textile
				value = 0
			}
			set_variable = {
				name = prod_pay_textile
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_textile
				}
			}
			set_variable = {
				name = prod_sply_textile
				value = 0
			}
			set_variable = {
				name = prod_out_textile
				value = 0
			}
			set_variable = {
				name = prod_earn_textile
				value = 0
			}
		}
	}
}
if = {
	limit = {
		has_global_variable = cloth
	}
	create_character = {
		save_temporary_scope_as = prod_new_instance_temp
		gender = male
		trait = character_not_1
		employer = global_var:arhat
		faith = global_var:arhat.faith
		culture = global_var:arhat.culture
	}
	add_to_global_variable_list = {
		name = prod_instances
		target = scope:prod_new_instance_temp
	}
	global_var:cloth = {
		add_to_variable_list = {
			name = prod_instances
			target = scope:prod_new_instance_temp
		}
	}
	province:2543 = {
		add_to_variable_list = {
			name = prod_instances
			target = scope:prod_new_instance_temp
		}
	}
	scope:prod_new_instance_temp = {
		set_variable = {
			name = prod_template
			value = global_var:cloth
		}
		set_variable = {
			name = prod_location
			value = province:2543
		}
		set_variable = {
			name = prod_size
			value = 10
		}
		set_variable = {
			name = prod_labor
			value = 0
		}
		set_variable = {
			name = prod_land
			value = 0
		}
		set_variable = {
			name = prod_size_actual
			value = 0
		}
		set_variable = {
			name = prod_labor_actual
			value = 0
		}
		set_variable = {
			name = prod_land_actual
			value = 0
		}
		if = {
			limit = {
				global_var:cloth = {
					has_variable = prod_dmnd_food
				}
			}
			set_variable = {
				name = prod_dmnd_food
				value = 0
			}
			set_variable = {
				name = prod_in_food
				value = 0
			}
			set_variable = {
				name = prod_pay_food
				value = 0
			}
		}
		if = {
			limit = {
				global_var:cloth = {
					has_variable = prod_sply_food
				}
			}
			set_variable = {
				name = prod_sply_food
				value = 0
			}
			set_variable = {
				name = prod_out_food
				value = 0
			}
			set_variable = {
				name = prod_earn_food
				value = 0
			}
		}
		if = {
			limit = {
				global_var:cloth = {
					has_variable = prod_dmnd_fuel
				}
			}
			set_variable = {
				name = prod_dmnd_fuel
				value = 0
			}
			set_variable = {
				name = prod_in_fuel
				value = 0
			}
			set_variable = {
				name = prod_pay_fuel
				value = 0
			}
		}
		if = {
			limit = {
				global_var:cloth = {
					has_variable = prod_sply_fuel
				}
			}
			set_variable = {
				name = prod_sply_fuel
				value = 0
			}
			set_variable = {
				name = prod_out_fuel
				value = 0
			}
			set_variable = {
				name = prod_earn_fuel
				value = 0
			}
		}
		if = {
			limit = {
				global_var:cloth = {
					has_variable = prod_dmnd_fiber
				}
			}
			set_variable = {
				name = prod_dmnd_fiber
				value = 0
			}
			set_variable = {
				name = prod_in_fiber
				value = 0
			}
			set_variable = {
				name = prod_pay_fiber
				value = 0
			}
		}
		if = {
			limit = {
				global_var:cloth = {
					has_variable = prod_sply_fiber
				}
			}
			set_variable = {
				name = prod_sply_fiber
				value = 0
			}
			set_variable = {
				name = prod_out_fiber
				value = 0
			}
			set_variable = {
				name = prod_earn_fiber
				value = 0
			}
		}
		if = {
			limit = {
				global_var:cloth = {
					has_variable = prod_dmnd_pottery
				}
			}
			set_variable = {
				name = prod_dmnd_pottery
				value = 0
			}
			set_variable = {
				name = prod_in_pottery
				value = 0
			}
			set_variable = {
				name = prod_pay_pottery
				value = 0
			}
		}
		if = {
			limit = {
				global_var:cloth = {
					has_variable = prod_sply_pottery
				}
			}
			set_variable = {
				name = prod_sply_pottery
				value = 0
			}
			set_variable = {
				name = prod_out_pottery
				value = 0
			}
			set_variable = {
				name = prod_earn_pottery
				value = 0
			}
		}
		if = {
			limit = {
				global_var:cloth = {
					has_variable = prod_dmnd_textile
				}
			}
			set_variable = {
				name = prod_dmnd_textile
				value = 0
			}
			set_variable = {
				name = prod_in_textile
				value = 0
			}
			set_variable = {
				name = prod_pay_textile
				value = 0
			}
		}
		if = {
			limit = {
				global_var:cloth = {
					has_variable = prod_sply_textile
				}
			}
			set_variable = {
				name = prod_sply_textile
				value = 0
			}
			set_variable = {
				name = prod_out_textile
				value = 0
			}
			set_variable = {
				name = prod_earn_textile
				value = 0
			}
		}
	}
}
scope:prod_new_instance_temp = {
	set_global_variable = {
		name = foo
		value = this
	}
}
if = {
	limit = {
		has_global_variable = sheep
	}
	create_character = {
		save_temporary_scope_as = prod_new_instance_temp
		gender = male
		trait = character_not_1
		employer = global_var:arhat
		faith = global_var:arhat.faith
		culture = global_var:arhat.culture
	}
	add_to_global_variable_list = {
		name = prod_instances
		target = scope:prod_new_instance_temp
	}
	global_var:sheep = {
		add_to_variable_list = {
			name = prod_instances
			target = scope:prod_new_instance_temp
		}
	}
	province:1582 = {
		add_to_variable_list = {
			name = prod_instances
			target = scope:prod_new_instance_temp
		}
	}
	scope:prod_new_instance_temp = {
		set_variable = {
			name = prod_template
			value = global_var:sheep
		}
		set_variable = {
			name = prod_location
			value = province:1582
		}
		set_variable = {
			name = prod_size
			value = 10
		}
		set_variable = {
			name = prod_labor
			value = 0
		}
		set_variable = {
			name = prod_land
			value = 0
		}
		set_variable = {
			name = prod_size_actual
			value = 0
		}
		set_variable = {
			name = prod_labor_actual
			value = 0
		}
		set_variable = {
			name = prod_land_actual
			value = 0
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_food
				}
			}
			set_variable = {
				name = prod_dmnd_food
				value = 0
			}
			set_variable = {
				name = prod_in_food
				value = 0
			}
			set_variable = {
				name = prod_pay_food
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_food
				}
			}
			set_variable = {
				name = prod_sply_food
				value = 0
			}
			set_variable = {
				name = prod_out_food
				value = 0
			}
			set_variable = {
				name = prod_earn_food
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_fuel
				}
			}
			set_variable = {
				name = prod_dmnd_fuel
				value = 0
			}
			set_variable = {
				name = prod_in_fuel
				value = 0
			}
			set_variable = {
				name = prod_pay_fuel
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_fuel
				}
			}
			set_variable = {
				name = prod_sply_fuel
				value = 0
			}
			set_variable = {
				name = prod_out_fuel
				value = 0
			}
			set_variable = {
				name = prod_earn_fuel
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_fiber
				}
			}
			set_variable = {
				name = prod_dmnd_fiber
				value = 0
			}
			set_variable = {
				name = prod_in_fiber
				value = 0
			}
			set_variable = {
				name = prod_pay_fiber
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_fiber
				}
			}
			set_variable = {
				name = prod_sply_fiber
				value = 0
			}
			set_variable = {
				name = prod_out_fiber
				value = 0
			}
			set_variable = {
				name = prod_earn_fiber
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_pottery
				}
			}
			set_variable = {
				name = prod_dmnd_pottery
				value = 0
			}
			set_variable = {
				name = prod_in_pottery
				value = 0
			}
			set_variable = {
				name = prod_pay_pottery
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_pottery
				}
			}
			set_variable = {
				name = prod_sply_pottery
				value = 0
			}
			set_variable = {
				name = prod_out_pottery
				value = 0
			}
			set_variable = {
				name = prod_earn_pottery
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_textile
				}
			}
			set_variable = {
				name = prod_dmnd_textile
				value = 0
			}
			set_variable = {
				name = prod_in_textile
				value = 0
			}
			set_variable = {
				name = prod_pay_textile
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_textile
				}
			}
			set_variable = {
				name = prod_sply_textile
				value = 0
			}
			set_variable = {
				name = prod_out_textile
				value = 0
			}
			set_variable = {
				name = prod_earn_textile
				value = 0
			}
		}
	}
}
if = {
	limit = {
		has_global_variable = sheep
	}
	create_character = {
		save_temporary_scope_as = prod_new_instance_temp
		gender = male
		trait = character_not_1
		employer = global_var:arhat
		faith = global_var:arhat.faith
		culture = global_var:arhat.culture
	}
	add_to_global_variable_list = {
		name = prod_instances
		target = scope:prod_new_instance_temp
	}
	global_var:sheep = {
		add_to_variable_list = {
			name = prod_instances
			target = scope:prod_new_instance_temp
		}
	}
	province:1561 = {
		add_to_variable_list = {
			name = prod_instances
			target = scope:prod_new_instance_temp
		}
	}
	scope:prod_new_instance_temp = {
		set_variable = {
			name = prod_template
			value = global_var:sheep
		}
		set_variable = {
			name = prod_location
			value = province:1561
		}
		set_variable = {
			name = prod_size
			value = 10
		}
		set_variable = {
			name = prod_labor
			value = 0
		}
		set_variable = {
			name = prod_land
			value = 0
		}
		set_variable = {
			name = prod_size_actual
			value = 0
		}
		set_variable = {
			name = prod_labor_actual
			value = 0
		}
		set_variable = {
			name = prod_land_actual
			value = 0
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_food
				}
			}
			set_variable = {
				name = prod_dmnd_food
				value = 0
			}
			set_variable = {
				name = prod_in_food
				value = 0
			}
			set_variable = {
				name = prod_pay_food
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_food
				}
			}
			set_variable = {
				name = prod_sply_food
				value = 0
			}
			set_variable = {
				name = prod_out_food
				value = 0
			}
			set_variable = {
				name = prod_earn_food
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_fuel
				}
			}
			set_variable = {
				name = prod_dmnd_fuel
				value = 0
			}
			set_variable = {
				name = prod_in_fuel
				value = 0
			}
			set_variable = {
				name = prod_pay_fuel
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_fuel
				}
			}
			set_variable = {
				name = prod_sply_fuel
				value = 0
			}
			set_variable = {
				name = prod_out_fuel
				value = 0
			}
			set_variable = {
				name = prod_earn_fuel
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_fiber
				}
			}
			set_variable = {
				name = prod_dmnd_fiber
				value = 0
			}
			set_variable = {
				name = prod_in_fiber
				value = 0
			}
			set_variable = {
				name = prod_pay_fiber
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_fiber
				}
			}
			set_variable = {
				name = prod_sply_fiber
				value = 0
			}
			set_variable = {
				name = prod_out_fiber
				value = 0
			}
			set_variable = {
				name = prod_earn_fiber
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_pottery
				}
			}
			set_variable = {
				name = prod_dmnd_pottery
				value = 0
			}
			set_variable = {
				name = prod_in_pottery
				value = 0
			}
			set_variable = {
				name = prod_pay_pottery
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_pottery
				}
			}
			set_variable = {
				name = prod_sply_pottery
				value = 0
			}
			set_variable = {
				name = prod_out_pottery
				value = 0
			}
			set_variable = {
				name = prod_earn_pottery
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_textile
				}
			}
			set_variable = {
				name = prod_dmnd_textile
				value = 0
			}
			set_variable = {
				name = prod_in_textile
				value = 0
			}
			set_variable = {
				name = prod_pay_textile
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_textile
				}
			}
			set_variable = {
				name = prod_sply_textile
				value = 0
			}
			set_variable = {
				name = prod_out_textile
				value = 0
			}
			set_variable = {
				name = prod_earn_textile
				value = 0
			}
		}
	}
}
if = {
	limit = {
		has_global_variable = sheep
	}
	create_character = {
		save_temporary_scope_as = prod_new_instance_temp
		gender = male
		trait = character_not_1
		employer = global_var:arhat
		faith = global_var:arhat.faith
		culture = global_var:arhat.culture
	}
	add_to_global_variable_list = {
		name = prod_instances
		target = scope:prod_new_instance_temp
	}
	global_var:sheep = {
		add_to_variable_list = {
			name = prod_instances
			target = scope:prod_new_instance_temp
		}
	}
	province:1555 = {
		add_to_variable_list = {
			name = prod_instances
			target = scope:prod_new_instance_temp
		}
	}
	scope:prod_new_instance_temp = {
		set_variable = {
			name = prod_template
			value = global_var:sheep
		}
		set_variable = {
			name = prod_location
			value = province:1555
		}
		set_variable = {
			name = prod_size
			value = 10
		}
		set_variable = {
			name = prod_labor
			value = 0
		}
		set_variable = {
			name = prod_land
			value = 0
		}
		set_variable = {
			name = prod_size_actual
			value = 0
		}
		set_variable = {
			name = prod_labor_actual
			value = 0
		}
		set_variable = {
			name = prod_land_actual
			value = 0
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_food
				}
			}
			set_variable = {
				name = prod_dmnd_food
				value = 0
			}
			set_variable = {
				name = prod_in_food
				value = 0
			}
			set_variable = {
				name = prod_pay_food
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_food
				}
			}
			set_variable = {
				name = prod_sply_food
				value = 0
			}
			set_variable = {
				name = prod_out_food
				value = 0
			}
			set_variable = {
				name = prod_earn_food
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_fuel
				}
			}
			set_variable = {
				name = prod_dmnd_fuel
				value = 0
			}
			set_variable = {
				name = prod_in_fuel
				value = 0
			}
			set_variable = {
				name = prod_pay_fuel
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_fuel
				}
			}
			set_variable = {
				name = prod_sply_fuel
				value = 0
			}
			set_variable = {
				name = prod_out_fuel
				value = 0
			}
			set_variable = {
				name = prod_earn_fuel
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_fiber
				}
			}
			set_variable = {
				name = prod_dmnd_fiber
				value = 0
			}
			set_variable = {
				name = prod_in_fiber
				value = 0
			}
			set_variable = {
				name = prod_pay_fiber
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_fiber
				}
			}
			set_variable = {
				name = prod_sply_fiber
				value = 0
			}
			set_variable = {
				name = prod_out_fiber
				value = 0
			}
			set_variable = {
				name = prod_earn_fiber
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_pottery
				}
			}
			set_variable = {
				name = prod_dmnd_pottery
				value = 0
			}
			set_variable = {
				name = prod_in_pottery
				value = 0
			}
			set_variable = {
				name = prod_pay_pottery
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_pottery
				}
			}
			set_variable = {
				name = prod_sply_pottery
				value = 0
			}
			set_variable = {
				name = prod_out_pottery
				value = 0
			}
			set_variable = {
				name = prod_earn_pottery
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_dmnd_textile
				}
			}
			set_variable = {
				name = prod_dmnd_textile
				value = 0
			}
			set_variable = {
				name = prod_in_textile
				value = 0
			}
			set_variable = {
				name = prod_pay_textile
				value = 0
			}
		}
		if = {
			limit = {
				global_var:sheep = {
					has_variable = prod_sply_textile
				}
			}
			set_variable = {
				name = prod_sply_textile
				value = 0
			}
			set_variable = {
				name = prod_out_textile
				value = 0
			}
			set_variable = {
				name = prod_earn_textile
				value = 0
			}
		}
	}
}
create_character = {
	save_temporary_scope_as = trade_new_merchant_t
	gender = male
	trait = character_not_1
	employer = global_var:arhat
	faith = global_var:arhat.faith
	culture = global_var:arhat.culture
}
add_to_global_variable_list = {
	name = trade_merchants
	target = scope:trade_new_merchant_t
}
province:2543.county = {
	add_to_variable_list = {
		name = trade_merchants
		target = scope:trade_new_merchant_t
	}
}
scope:trade_new_merchant_t = {
	set_variable = {
		name = trade_location
		value = province:2543.county
	}
	set_variable = {
		name = trade_tax
		value = 0
	}
	set_variable = {
		name = trade_wealth
		value = 0
	}
	set_variable = {
		name = trade_profit
		value = 0
	}
	set_variable = {
		name = trade_earn
		value = 0
	}
	set_variable = {
		name = trade_pay
		value = 0
	}
	set_variable = {
		name = trade_has_food
		value = 0
	}
	set_variable = {
		name = trade_has_fuel
		value = 0
	}
	set_variable = {
		name = trade_has_fiber
		value = 0
	}
	set_variable = {
		name = trade_has_pottery
		value = 0
	}
	set_variable = {
		name = trade_has_textile
		value = 0
	}
	set_variable = {
		name = trade_want_food
		value = 0
	}
	set_variable = {
		name = trade_want_fuel
		value = 0
	}
	set_variable = {
		name = trade_want_fiber
		value = 0
	}
	set_variable = {
		name = trade_want_pottery
		value = 0
	}
	set_variable = {
		name = trade_want_textile
		value = 0
	}
	set_variable = {
		name = trade_rank
		value = 10
	}
	set_variable = {
		name = trade_skill
		value = 20
	}
	set_variable = {
		name = trade_outposts_max
		value = 2
	}
	add_to_variable_list = {
		name = trade_outposts
		target = province:2543.county
	}
	set_variable = {
		name = trade_price_food
		value = province:2543.county.var:trade_price_food
	}
	set_variable = {
		name = trade_price_fuel
		value = province:2543.county.var:trade_price_fuel
	}
	set_variable = {
		name = trade_price_fiber
		value = province:2543.county.var:trade_price_fiber
	}
	set_variable = {
		name = trade_price_pottery
		value = province:2543.county.var:trade_price_pottery
	}
	set_variable = {
		name = trade_price_textile
		value = province:2543.county.var:trade_price_textile
	}
}
create_character = {
	save_temporary_scope_as = trade_new_merchant_t
	gender = male
	trait = character_not_1
	employer = global_var:arhat
	faith = global_var:arhat.faith
	culture = global_var:arhat.culture
}
add_to_global_variable_list = {
	name = trade_merchants
	target = scope:trade_new_merchant_t
}
province:1527.county = {
	add_to_variable_list = {
		name = trade_merchants
		target = scope:trade_new_merchant_t
	}
}
scope:trade_new_merchant_t = {
	set_variable = {
		name = trade_location
		value = province:1527.county
	}
	set_variable = {
		name = trade_tax
		value = 0
	}
	set_variable = {
		name = trade_wealth
		value = 0
	}
	set_variable = {
		name = trade_profit
		value = 0
	}
	set_variable = {
		name = trade_earn
		value = 0
	}
	set_variable = {
		name = trade_pay
		value = 0
	}
	set_variable = {
		name = trade_has_food
		value = 0
	}
	set_variable = {
		name = trade_has_fuel
		value = 0
	}
	set_variable = {
		name = trade_has_fiber
		value = 0
	}
	set_variable = {
		name = trade_has_pottery
		value = 0
	}
	set_variable = {
		name = trade_has_textile
		value = 0
	}
	set_variable = {
		name = trade_want_food
		value = 0
	}
	set_variable = {
		name = trade_want_fuel
		value = 0
	}
	set_variable = {
		name = trade_want_fiber
		value = 0
	}
	set_variable = {
		name = trade_want_pottery
		value = 0
	}
	set_variable = {
		name = trade_want_textile
		value = 0
	}
	set_variable = {
		name = trade_rank
		value = 5
	}
	set_variable = {
		name = trade_skill
		value = 10
	}
	set_variable = {
		name = trade_outposts_max
		value = 1
	}
	add_to_variable_list = {
		name = trade_outposts
		target = province:1527.county
	}
	set_variable = {
		name = trade_price_food
		value = province:1527.county.var:trade_price_food
	}
	set_variable = {
		name = trade_price_fuel
		value = province:1527.county.var:trade_price_fuel
	}
	set_variable = {
		name = trade_price_fiber
		value = province:1527.county.var:trade_price_fiber
	}
	set_variable = {
		name = trade_price_pottery
		value = province:1527.county.var:trade_price_pottery
	}
	set_variable = {
		name = trade_price_textile
		value = province:1527.county.var:trade_price_textile
	}
}
province:2543.county = {
	change_variable = {
		name = trade_price_fiber
		multiply = 2
	}
	change_variable = {
		name = trade_price_textile
		divide = 2
	}
	every_in_list = {
		variable = trade_merchants
		add_to_variable_list = {
			name = trade_outposts
			target = province:2115.county
		}
		set_variable = {
			name = trade_has_fiber
			value = 20
		}
		set_variable = {
			name = trade_want_fiber
			value = 40
		}
		set_variable = {
			name = trade_has_textile
			value = 20
		}
		set_variable = {
			name = trade_want_textile
			value = 40
		}
		change_variable = {
			name = trade_price_fiber
			multiply = 1.5
		}
		change_variable = {
			name = trade_price_textile
			divide = 1.5
		}
	}
}
province:1527.county = {
	every_in_list = {
		variable = trade_merchants
		set_variable = {
			name = trade_has_fiber
			value = 40
		}
		set_variable = {
			name = trade_want_fiber
			value = 80
		}
		set_variable = {
			name = trade_has_textile
			value = 20
		}
		set_variable = {
			name = trade_want_textile
			value = 40
		}
		change_variable = {
			name = trade_price_fiber
			divide = 1.5
		}
		change_variable = {
			name = trade_price_textile
			multiply = 1.5
		}
	}
}
province:1582.county = {
	change_variable = {
		name = trade_price_fiber
		divide = 2
	}
	change_variable = {
		name = trade_price_textile
		multiply = 2
	}
}
province:1561.county = {
	change_variable = {
		name = trade_price_fiber
		divide = 2
	}
	change_variable = {
		name = trade_price_textile
		multiply = 2
	}
}
province:1555.county = {
	change_variable = {
		name = trade_price_fiber
		divide = 2
	}
	change_variable = {
		name = trade_price_textile
		multiply = 2
	}
}
province:2543 = {
	if = {
		limit = {
			has_variable_list = prod_instances
			variable_list_size = {
				name = prod_instances
				value >= 1
			}
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_update_instances_t
				value = 1
			}
			set_variable = {
				name = prod_update_instances_tt
				value = 0
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				if = {
					limit = {
						var:prod_dmnd_food = {
							compare_value != prev.var:prod_in_food
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_food
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_food
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_food
					value = var:prod_dmnd_food
				}
				set_variable = {
					name = prod_in_old_food
					value = var:prod_in_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				if = {
					limit = {
						var:prod_dmnd_fiber = {
							compare_value != prev.var:prod_in_fiber
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fiber
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fiber
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fiber
					value = var:prod_dmnd_fiber
				}
				set_variable = {
					name = prod_in_old_fiber
					value = var:prod_in_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				if = {
					limit = {
						var:prod_dmnd_fuel = {
							compare_value != prev.var:prod_in_fuel
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fuel
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fuel
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fuel
					value = var:prod_dmnd_fuel
				}
				set_variable = {
					name = prod_in_old_fuel
					value = var:prod_in_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				if = {
					limit = {
						var:prod_dmnd_pottery = {
							compare_value != prev.var:prod_in_pottery
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_pottery
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_pottery
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_pottery
					value = var:prod_dmnd_pottery
				}
				set_variable = {
					name = prod_in_old_pottery
					value = var:prod_in_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				if = {
					limit = {
						var:prod_dmnd_textile = {
							compare_value != prev.var:prod_in_textile
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_textile
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_textile
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_textile
					value = var:prod_dmnd_textile
				}
				set_variable = {
					name = prod_in_old_textile
					value = var:prod_in_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_update_instances_tt
					var:prod_update_instances_tt > 0
				}
				set_variable = {
					name = math_root_exp
					value = 1
				}
				change_variable = {
					name = math_root_exp
					divide = var:prod_update_instances_tt
				}
				set_variable = {
					name = math_pow_base
					value = var:prod_update_instances_t
				}
				set_variable = {
					name = math_pow_exp
					value = var:math_root_exp
				}
				if = {
					limit = {
						has_variable = math_pow_base
						var:math_pow_base != 0
					}
					set_variable = {
						name = prod_update_instances_t
						value = 1
					}
					while = {
						limit = {
							var:math_pow_exp >= 1
						}
						change_variable = {
							name = math_pow_exp
							subtract = 1
						}
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_base
						}
					}
					while = {
						limit = {
							var:math_pow_exp < 0
						}
						change_variable = {
							name = math_pow_exp
							add = 1
						}
						change_variable = {
							name = prod_update_instances_t
							divide = var:math_pow_base
						}
					}
					if = {
						limit = {
							var:math_pow_exp != 0
						}
						set_variable = {
							name = math_ln_inp
							value = var:math_pow_base
						}
						set_variable = {
							name = math_pow_ln
							value = 0
						}
						set_variable = {
							name = math_ln_k
							value = 0
						}
						set_variable = {
							name = math_ln_div
							value = 10000
						}
						while = {
							limit = {
								var:math_ln_inp >= 2
							}
							change_variable = {
								name = math_ln_inp
								divide = 2
							}
							change_variable = {
								name = math_pow_ln
								add = 6931.472
							}
						}
						while = {
							limit = {
								var:math_ln_inp < 1
							}
							change_variable = {
								name = math_ln_inp
								multiply = 2
							}
							change_variable = {
								name = math_pow_ln
								subtract = 6931.472
							}
						}
						change_variable = {
							name = math_ln_inp
							multiply = 10000
						}
						while = {
							limit = {
								var:math_ln_k < 10
							}
							change_variable = {
								name = math_ln_k
								add = 1
							}
							change_variable = {
								name = math_ln_div
								divide = 2
							}
							set_variable = {
								name = math_ln_t
								value = 10000
							}
							change_variable = {
								name = math_ln_t
								add = var:math_ln_div
							}
							if = {
								limit = {
									var:math_ln_inp = {
										compare_value >= prev.var:math_ln_t
									}
								}
								change_variable = {
									name = math_ln_inp
									divide = var:math_ln_t
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								set_variable = {
									name = math_lt_ind
									value = var:math_ln_k
								}
								if = {
									limit = {
										var:math_lt_ind >= 6
									}
									if = {
										limit = {
											var:math_lt_ind >= 8
										}
										if = {
											limit = {
												var:math_lt_ind >= 9
											}
											if = {
												limit = {
													var:math_lt_ind >= 10
												}
												set_variable = {
													name = math_ln_lt
													value = 9.761
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 19.512
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 38.986
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 7
											}
											set_variable = {
												name = math_ln_lt
												value = 77.821
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 155.042
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 3
										}
										if = {
											limit = {
												var:math_lt_ind >= 4
											}
											if = {
												limit = {
													var:math_lt_ind >= 5
												}
												set_variable = {
													name = math_ln_lt
													value = 307.717
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 606.246
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 1177.83
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 2
											}
											set_variable = {
												name = math_ln_lt
												value = 2231.436
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 4054.651
											}
										}
									}
								}
								remove_variable = math_lt_ind
								change_variable = {
									name = math_pow_ln
									add = var:math_ln_lt
								}
							}
						}
						change_variable = {
							name = math_pow_ln
							divide = 10000
						}
						remove_variable = math_ln_k
						remove_variable = math_ln_div
						remove_variable = math_ln_t
						remove_variable = math_ln_lt
						remove_variable = math_ln_inp
						change_variable = {
							name = math_pow_exp
							multiply = var:math_pow_ln
						}
						set_variable = {
							name = math_e_exp
							value = var:math_pow_exp
						}
						set_variable = {
							name = math_pow_e
							value = 1
						}
						while = {
							limit = {
								var:math_e_exp >= 1
							}
							change_variable = {
								name = math_e_exp
								subtract = 1
							}
							change_variable = {
								name = math_pow_e
								multiply = 2.718
							}
						}
						while = {
							limit = {
								var:math_e_exp < 0
							}
							change_variable = {
								name = math_e_exp
								add = 1
							}
							change_variable = {
								name = math_pow_e
								divide = 2.718
							}
						}
						set_variable = {
							name = math_e_sm
							value = 1
						}
						if = {
							limit = {
								var:math_e_exp != 0
							}
							set_variable = {
								name = math_e_sq
								value = var:math_e_exp
							}
							change_variable = {
								name = math_e_sq
								multiply = var:math_e_exp
							}
							set_variable = {
								name = math_e_fct
								value = 2
							}
							set_variable = {
								name = math_e_fctl
								value = 2
							}
							set_variable = {
								name = math_e_a1
								value = var:math_e_sq
							}
							set_variable = {
								name = math_e_a2
								value = var:math_e_exp
							}
							set_variable = {
								name = math_e_a3
								value = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
							set_variable = {
								name = math_e_prec
								value = 3
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							while = {
								limit = {
									var:math_e_prec >= 1
								}
								change_variable = {
									name = math_e_prec
									subtract = 1
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_a1
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a2
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a3
									add = 2
								}
								set_variable = {
									name = math_e_tmp
									value = var:math_e_a2
								}
								change_variable = {
									name = math_e_tmp
									multiply = var:math_e_a3
								}
								change_variable = {
									name = math_e_tmp
									add = var:math_e_a1
								}
								change_variable = {
									name = math_e_tmp
									divide = var:math_e_fct
								}
								change_variable = {
									name = math_e_sm
									add = var:math_e_tmp
								}
							}
						}
						change_variable = {
							name = math_pow_e
							multiply = var:math_e_sm
						}
						remove_variable = math_e_sm
						remove_variable = math_e_tmp
						remove_variable = math_e_a1
						remove_variable = math_e_a2
						remove_variable = math_e_a3
						remove_variable = math_e_fctl
						remove_variable = math_e_fct
						remove_variable = math_e_prec
						remove_variable = math_e_sq
						remove_variable = math_e_exp
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_e
						}
						remove_variable = math_pow_ln
						remove_variable = math_pow_e
					}
				}
				else = {
					set_variable = {
						name = prod_update_instances_t
						value = 0
					}
				}
				remove_variable = math_pow_base
				remove_variable = math_pow_exp
				remove_variable = math_root_exp
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_old_food
					value = var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_old_food
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_old_fiber
					value = var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_old_fiber
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_old_fuel
					value = var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_old_fuel
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_old_pottery
					value = var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_old_pottery
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_old_textile
					value = var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_old_textile
					multiply = var:prod_update_instances_t
				}
			}
			remove_variable = prod_update_instances_t
			remove_variable = prod_update_instances_tt
		}
		set_global_variable = {
			name = prod_update_instances_labor
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_farm
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_pasture
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_forest
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_workshop
			value = 0
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_labor
				value = var:prod_template.var:prod_labor
			}
			set_variable = {
				name = prod_land
				value = var:prod_template.var:prod_land
			}
			change_variable = {
				name = prod_labor
				multiply = var:prod_size
			}
			change_variable = {
				name = prod_land
				multiply = var:prod_size
			}
			change_global_variable = {
				name = prod_update_instances_labor
				add = var:prod_labor
			}
			var:prod_template = {
				if = {
					limit = {
						has_character_flag = prod_land_farm
					}
					change_global_variable = {
						name = prod_update_instances_farm
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_pasture
					}
					change_global_variable = {
						name = prod_update_instances_pasture
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_forest
					}
					change_global_variable = {
						name = prod_update_instances_forest
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_workshop
					}
					change_global_variable = {
						name = prod_update_instances_workshop
						add = prev.var:prod_land
					}
				}
			}
		}
		if = {
			limit = {
				var:pop_total = {
					compare_value >= global_var:prod_update_instances_labor
				}
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
			}
		}
		else_if = {
			limit = {
				var:pop_total = 0
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_labor
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
				change_variable = {
					name = prod_labor_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:farm_total = {
					compare_value >= global_var:prod_update_instances_farm
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:farm_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:farm_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_farm
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:pasture_total = {
					compare_value >= global_var:prod_update_instances_pasture
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:pasture_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pasture_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_pasture
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:forest_total = {
					compare_value >= global_var:prod_update_instances_forest
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:forest_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:forest_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_forest
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:workshop_total = {
					compare_value >= global_var:prod_update_instances_workshop
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:workshop_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:workshop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_workshop
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_size_actual
				value = 1
			}
			if = {
				limit = {
					var:prod_labor = {
						compare_value != prev.var:prod_labor_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_labor_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_labor
				}
			}
			if = {
				limit = {
					var:prod_land = {
						compare_value != prev.var:prod_land_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_land_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_land
				}
			}
			set_variable = {
				name = math_pow_base
				value = var:prod_size_actual
			}
			set_variable = {
				name = math_pow_exp
				value = 0.5
			}
			if = {
				limit = {
					has_variable = math_pow_base
					var:math_pow_base != 0
				}
				set_variable = {
					name = prod_size_actual
					value = 1
				}
				while = {
					limit = {
						var:math_pow_exp >= 1
					}
					change_variable = {
						name = math_pow_exp
						subtract = 1
					}
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_base
					}
				}
				while = {
					limit = {
						var:math_pow_exp < 0
					}
					change_variable = {
						name = math_pow_exp
						add = 1
					}
					change_variable = {
						name = prod_size_actual
						divide = var:math_pow_base
					}
				}
				if = {
					limit = {
						var:math_pow_exp != 0
					}
					set_variable = {
						name = math_ln_inp
						value = var:math_pow_base
					}
					set_variable = {
						name = math_pow_ln
						value = 0
					}
					set_variable = {
						name = math_ln_k
						value = 0
					}
					set_variable = {
						name = math_ln_div
						value = 10000
					}
					while = {
						limit = {
							var:math_ln_inp >= 2
						}
						change_variable = {
							name = math_ln_inp
							divide = 2
						}
						change_variable = {
							name = math_pow_ln
							add = 6931.472
						}
					}
					while = {
						limit = {
							var:math_ln_inp < 1
						}
						change_variable = {
							name = math_ln_inp
							multiply = 2
						}
						change_variable = {
							name = math_pow_ln
							subtract = 6931.472
						}
					}
					change_variable = {
						name = math_ln_inp
						multiply = 10000
					}
					while = {
						limit = {
							var:math_ln_k < 10
						}
						change_variable = {
							name = math_ln_k
							add = 1
						}
						change_variable = {
							name = math_ln_div
							divide = 2
						}
						set_variable = {
							name = math_ln_t
							value = 10000
						}
						change_variable = {
							name = math_ln_t
							add = var:math_ln_div
						}
						if = {
							limit = {
								var:math_ln_inp = {
									compare_value >= prev.var:math_ln_t
								}
							}
							change_variable = {
								name = math_ln_inp
								divide = var:math_ln_t
							}
							change_variable = {
								name = math_ln_inp
								multiply = 10000
							}
							set_variable = {
								name = math_lt_ind
								value = var:math_ln_k
							}
							if = {
								limit = {
									var:math_lt_ind >= 6
								}
								if = {
									limit = {
										var:math_lt_ind >= 8
									}
									if = {
										limit = {
											var:math_lt_ind >= 9
										}
										if = {
											limit = {
												var:math_lt_ind >= 10
											}
											set_variable = {
												name = math_ln_lt
												value = 9.761
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 19.512
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 38.986
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 7
										}
										set_variable = {
											name = math_ln_lt
											value = 77.821
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 155.042
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										var:math_lt_ind >= 3
									}
									if = {
										limit = {
											var:math_lt_ind >= 4
										}
										if = {
											limit = {
												var:math_lt_ind >= 5
											}
											set_variable = {
												name = math_ln_lt
												value = 307.717
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 606.246
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 1177.83
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 2
										}
										set_variable = {
											name = math_ln_lt
											value = 2231.436
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 4054.651
										}
									}
								}
							}
							remove_variable = math_lt_ind
							change_variable = {
								name = math_pow_ln
								add = var:math_ln_lt
							}
						}
					}
					change_variable = {
						name = math_pow_ln
						divide = 10000
					}
					remove_variable = math_ln_k
					remove_variable = math_ln_div
					remove_variable = math_ln_t
					remove_variable = math_ln_lt
					remove_variable = math_ln_inp
					change_variable = {
						name = math_pow_exp
						multiply = var:math_pow_ln
					}
					set_variable = {
						name = math_e_exp
						value = var:math_pow_exp
					}
					set_variable = {
						name = math_pow_e
						value = 1
					}
					while = {
						limit = {
							var:math_e_exp >= 1
						}
						change_variable = {
							name = math_e_exp
							subtract = 1
						}
						change_variable = {
							name = math_pow_e
							multiply = 2.718
						}
					}
					while = {
						limit = {
							var:math_e_exp < 0
						}
						change_variable = {
							name = math_e_exp
							add = 1
						}
						change_variable = {
							name = math_pow_e
							divide = 2.718
						}
					}
					set_variable = {
						name = math_e_sm
						value = 1
					}
					if = {
						limit = {
							var:math_e_exp != 0
						}
						set_variable = {
							name = math_e_sq
							value = var:math_e_exp
						}
						change_variable = {
							name = math_e_sq
							multiply = var:math_e_exp
						}
						set_variable = {
							name = math_e_fct
							value = 2
						}
						set_variable = {
							name = math_e_fctl
							value = 2
						}
						set_variable = {
							name = math_e_a1
							value = var:math_e_sq
						}
						set_variable = {
							name = math_e_a2
							value = var:math_e_exp
						}
						set_variable = {
							name = math_e_a3
							value = 2
						}
						set_variable = {
							name = math_e_tmp
							value = var:math_e_a2
						}
						change_variable = {
							name = math_e_tmp
							multiply = var:math_e_a3
						}
						change_variable = {
							name = math_e_tmp
							add = var:math_e_a1
						}
						change_variable = {
							name = math_e_tmp
							divide = var:math_e_fct
						}
						change_variable = {
							name = math_e_sm
							add = var:math_e_tmp
						}
						set_variable = {
							name = math_e_prec
							value = 3
						}
						change_variable = {
							name = math_e_prec
							subtract = 1
						}
						while = {
							limit = {
								var:math_e_prec >= 1
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_a1
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a2
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a3
								add = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
						}
					}
					change_variable = {
						name = math_pow_e
						multiply = var:math_e_sm
					}
					remove_variable = math_e_sm
					remove_variable = math_e_tmp
					remove_variable = math_e_a1
					remove_variable = math_e_a2
					remove_variable = math_e_a3
					remove_variable = math_e_fctl
					remove_variable = math_e_fct
					remove_variable = math_e_prec
					remove_variable = math_e_sq
					remove_variable = math_e_exp
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_e
					}
					remove_variable = math_pow_ln
					remove_variable = math_pow_e
				}
			}
			else = {
				set_variable = {
					name = prod_size_actual
					value = 0
				}
			}
			remove_variable = math_pow_base
			remove_variable = math_pow_exp
			change_variable = {
				name = prod_size_actual
				multiply = var:prod_size
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				set_variable = {
					name = prod_dmnd_food
					value = var:prod_template.var:prod_dmnd_food
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_location.var:modi_prod_dmnd_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				set_variable = {
					name = prod_dmnd_fuel
					value = var:prod_template.var:prod_dmnd_fuel
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_location.var:modi_prod_dmnd_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				set_variable = {
					name = prod_dmnd_fiber
					value = var:prod_template.var:prod_dmnd_fiber
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_location.var:modi_prod_dmnd_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				set_variable = {
					name = prod_dmnd_pottery
					value = var:prod_template.var:prod_dmnd_pottery
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_location.var:modi_prod_dmnd_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				set_variable = {
					name = prod_dmnd_textile
					value = var:prod_template.var:prod_dmnd_textile
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_location.var:modi_prod_dmnd_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_food
					value = var:prod_template.var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_location.var:modi_prod_sply_food
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_fuel
					value = var:prod_template.var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_location.var:modi_prod_sply_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_fiber
					value = var:prod_template.var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_location.var:modi_prod_sply_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_pottery
					value = var:prod_template.var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_location.var:modi_prod_sply_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_textile
					value = var:prod_template.var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_location.var:modi_prod_sply_textile
				}
			}
		}
	}
}
province:2563 = {
	if = {
		limit = {
			has_variable_list = prod_instances
			variable_list_size = {
				name = prod_instances
				value >= 1
			}
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_update_instances_t
				value = 1
			}
			set_variable = {
				name = prod_update_instances_tt
				value = 0
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				if = {
					limit = {
						var:prod_dmnd_food = {
							compare_value != prev.var:prod_in_food
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_food
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_food
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_food
					value = var:prod_dmnd_food
				}
				set_variable = {
					name = prod_in_old_food
					value = var:prod_in_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				if = {
					limit = {
						var:prod_dmnd_fiber = {
							compare_value != prev.var:prod_in_fiber
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fiber
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fiber
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fiber
					value = var:prod_dmnd_fiber
				}
				set_variable = {
					name = prod_in_old_fiber
					value = var:prod_in_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				if = {
					limit = {
						var:prod_dmnd_fuel = {
							compare_value != prev.var:prod_in_fuel
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fuel
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fuel
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fuel
					value = var:prod_dmnd_fuel
				}
				set_variable = {
					name = prod_in_old_fuel
					value = var:prod_in_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				if = {
					limit = {
						var:prod_dmnd_pottery = {
							compare_value != prev.var:prod_in_pottery
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_pottery
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_pottery
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_pottery
					value = var:prod_dmnd_pottery
				}
				set_variable = {
					name = prod_in_old_pottery
					value = var:prod_in_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				if = {
					limit = {
						var:prod_dmnd_textile = {
							compare_value != prev.var:prod_in_textile
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_textile
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_textile
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_textile
					value = var:prod_dmnd_textile
				}
				set_variable = {
					name = prod_in_old_textile
					value = var:prod_in_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_update_instances_tt
					var:prod_update_instances_tt > 0
				}
				set_variable = {
					name = math_root_exp
					value = 1
				}
				change_variable = {
					name = math_root_exp
					divide = var:prod_update_instances_tt
				}
				set_variable = {
					name = math_pow_base
					value = var:prod_update_instances_t
				}
				set_variable = {
					name = math_pow_exp
					value = var:math_root_exp
				}
				if = {
					limit = {
						has_variable = math_pow_base
						var:math_pow_base != 0
					}
					set_variable = {
						name = prod_update_instances_t
						value = 1
					}
					while = {
						limit = {
							var:math_pow_exp >= 1
						}
						change_variable = {
							name = math_pow_exp
							subtract = 1
						}
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_base
						}
					}
					while = {
						limit = {
							var:math_pow_exp < 0
						}
						change_variable = {
							name = math_pow_exp
							add = 1
						}
						change_variable = {
							name = prod_update_instances_t
							divide = var:math_pow_base
						}
					}
					if = {
						limit = {
							var:math_pow_exp != 0
						}
						set_variable = {
							name = math_ln_inp
							value = var:math_pow_base
						}
						set_variable = {
							name = math_pow_ln
							value = 0
						}
						set_variable = {
							name = math_ln_k
							value = 0
						}
						set_variable = {
							name = math_ln_div
							value = 10000
						}
						while = {
							limit = {
								var:math_ln_inp >= 2
							}
							change_variable = {
								name = math_ln_inp
								divide = 2
							}
							change_variable = {
								name = math_pow_ln
								add = 6931.472
							}
						}
						while = {
							limit = {
								var:math_ln_inp < 1
							}
							change_variable = {
								name = math_ln_inp
								multiply = 2
							}
							change_variable = {
								name = math_pow_ln
								subtract = 6931.472
							}
						}
						change_variable = {
							name = math_ln_inp
							multiply = 10000
						}
						while = {
							limit = {
								var:math_ln_k < 10
							}
							change_variable = {
								name = math_ln_k
								add = 1
							}
							change_variable = {
								name = math_ln_div
								divide = 2
							}
							set_variable = {
								name = math_ln_t
								value = 10000
							}
							change_variable = {
								name = math_ln_t
								add = var:math_ln_div
							}
							if = {
								limit = {
									var:math_ln_inp = {
										compare_value >= prev.var:math_ln_t
									}
								}
								change_variable = {
									name = math_ln_inp
									divide = var:math_ln_t
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								set_variable = {
									name = math_lt_ind
									value = var:math_ln_k
								}
								if = {
									limit = {
										var:math_lt_ind >= 6
									}
									if = {
										limit = {
											var:math_lt_ind >= 8
										}
										if = {
											limit = {
												var:math_lt_ind >= 9
											}
											if = {
												limit = {
													var:math_lt_ind >= 10
												}
												set_variable = {
													name = math_ln_lt
													value = 9.761
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 19.512
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 38.986
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 7
											}
											set_variable = {
												name = math_ln_lt
												value = 77.821
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 155.042
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 3
										}
										if = {
											limit = {
												var:math_lt_ind >= 4
											}
											if = {
												limit = {
													var:math_lt_ind >= 5
												}
												set_variable = {
													name = math_ln_lt
													value = 307.717
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 606.246
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 1177.83
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 2
											}
											set_variable = {
												name = math_ln_lt
												value = 2231.436
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 4054.651
											}
										}
									}
								}
								remove_variable = math_lt_ind
								change_variable = {
									name = math_pow_ln
									add = var:math_ln_lt
								}
							}
						}
						change_variable = {
							name = math_pow_ln
							divide = 10000
						}
						remove_variable = math_ln_k
						remove_variable = math_ln_div
						remove_variable = math_ln_t
						remove_variable = math_ln_lt
						remove_variable = math_ln_inp
						change_variable = {
							name = math_pow_exp
							multiply = var:math_pow_ln
						}
						set_variable = {
							name = math_e_exp
							value = var:math_pow_exp
						}
						set_variable = {
							name = math_pow_e
							value = 1
						}
						while = {
							limit = {
								var:math_e_exp >= 1
							}
							change_variable = {
								name = math_e_exp
								subtract = 1
							}
							change_variable = {
								name = math_pow_e
								multiply = 2.718
							}
						}
						while = {
							limit = {
								var:math_e_exp < 0
							}
							change_variable = {
								name = math_e_exp
								add = 1
							}
							change_variable = {
								name = math_pow_e
								divide = 2.718
							}
						}
						set_variable = {
							name = math_e_sm
							value = 1
						}
						if = {
							limit = {
								var:math_e_exp != 0
							}
							set_variable = {
								name = math_e_sq
								value = var:math_e_exp
							}
							change_variable = {
								name = math_e_sq
								multiply = var:math_e_exp
							}
							set_variable = {
								name = math_e_fct
								value = 2
							}
							set_variable = {
								name = math_e_fctl
								value = 2
							}
							set_variable = {
								name = math_e_a1
								value = var:math_e_sq
							}
							set_variable = {
								name = math_e_a2
								value = var:math_e_exp
							}
							set_variable = {
								name = math_e_a3
								value = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
							set_variable = {
								name = math_e_prec
								value = 3
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							while = {
								limit = {
									var:math_e_prec >= 1
								}
								change_variable = {
									name = math_e_prec
									subtract = 1
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_a1
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a2
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a3
									add = 2
								}
								set_variable = {
									name = math_e_tmp
									value = var:math_e_a2
								}
								change_variable = {
									name = math_e_tmp
									multiply = var:math_e_a3
								}
								change_variable = {
									name = math_e_tmp
									add = var:math_e_a1
								}
								change_variable = {
									name = math_e_tmp
									divide = var:math_e_fct
								}
								change_variable = {
									name = math_e_sm
									add = var:math_e_tmp
								}
							}
						}
						change_variable = {
							name = math_pow_e
							multiply = var:math_e_sm
						}
						remove_variable = math_e_sm
						remove_variable = math_e_tmp
						remove_variable = math_e_a1
						remove_variable = math_e_a2
						remove_variable = math_e_a3
						remove_variable = math_e_fctl
						remove_variable = math_e_fct
						remove_variable = math_e_prec
						remove_variable = math_e_sq
						remove_variable = math_e_exp
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_e
						}
						remove_variable = math_pow_ln
						remove_variable = math_pow_e
					}
				}
				else = {
					set_variable = {
						name = prod_update_instances_t
						value = 0
					}
				}
				remove_variable = math_pow_base
				remove_variable = math_pow_exp
				remove_variable = math_root_exp
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_old_food
					value = var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_old_food
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_old_fiber
					value = var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_old_fiber
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_old_fuel
					value = var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_old_fuel
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_old_pottery
					value = var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_old_pottery
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_old_textile
					value = var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_old_textile
					multiply = var:prod_update_instances_t
				}
			}
			remove_variable = prod_update_instances_t
			remove_variable = prod_update_instances_tt
		}
		set_global_variable = {
			name = prod_update_instances_labor
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_farm
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_pasture
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_forest
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_workshop
			value = 0
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_labor
				value = var:prod_template.var:prod_labor
			}
			set_variable = {
				name = prod_land
				value = var:prod_template.var:prod_land
			}
			change_variable = {
				name = prod_labor
				multiply = var:prod_size
			}
			change_variable = {
				name = prod_land
				multiply = var:prod_size
			}
			change_global_variable = {
				name = prod_update_instances_labor
				add = var:prod_labor
			}
			var:prod_template = {
				if = {
					limit = {
						has_character_flag = prod_land_farm
					}
					change_global_variable = {
						name = prod_update_instances_farm
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_pasture
					}
					change_global_variable = {
						name = prod_update_instances_pasture
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_forest
					}
					change_global_variable = {
						name = prod_update_instances_forest
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_workshop
					}
					change_global_variable = {
						name = prod_update_instances_workshop
						add = prev.var:prod_land
					}
				}
			}
		}
		if = {
			limit = {
				var:pop_total = {
					compare_value >= global_var:prod_update_instances_labor
				}
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
			}
		}
		else_if = {
			limit = {
				var:pop_total = 0
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_labor
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
				change_variable = {
					name = prod_labor_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:farm_total = {
					compare_value >= global_var:prod_update_instances_farm
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:farm_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:farm_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_farm
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:pasture_total = {
					compare_value >= global_var:prod_update_instances_pasture
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:pasture_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pasture_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_pasture
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:forest_total = {
					compare_value >= global_var:prod_update_instances_forest
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:forest_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:forest_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_forest
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:workshop_total = {
					compare_value >= global_var:prod_update_instances_workshop
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:workshop_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:workshop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_workshop
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_size_actual
				value = 1
			}
			if = {
				limit = {
					var:prod_labor = {
						compare_value != prev.var:prod_labor_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_labor_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_labor
				}
			}
			if = {
				limit = {
					var:prod_land = {
						compare_value != prev.var:prod_land_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_land_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_land
				}
			}
			set_variable = {
				name = math_pow_base
				value = var:prod_size_actual
			}
			set_variable = {
				name = math_pow_exp
				value = 0.5
			}
			if = {
				limit = {
					has_variable = math_pow_base
					var:math_pow_base != 0
				}
				set_variable = {
					name = prod_size_actual
					value = 1
				}
				while = {
					limit = {
						var:math_pow_exp >= 1
					}
					change_variable = {
						name = math_pow_exp
						subtract = 1
					}
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_base
					}
				}
				while = {
					limit = {
						var:math_pow_exp < 0
					}
					change_variable = {
						name = math_pow_exp
						add = 1
					}
					change_variable = {
						name = prod_size_actual
						divide = var:math_pow_base
					}
				}
				if = {
					limit = {
						var:math_pow_exp != 0
					}
					set_variable = {
						name = math_ln_inp
						value = var:math_pow_base
					}
					set_variable = {
						name = math_pow_ln
						value = 0
					}
					set_variable = {
						name = math_ln_k
						value = 0
					}
					set_variable = {
						name = math_ln_div
						value = 10000
					}
					while = {
						limit = {
							var:math_ln_inp >= 2
						}
						change_variable = {
							name = math_ln_inp
							divide = 2
						}
						change_variable = {
							name = math_pow_ln
							add = 6931.472
						}
					}
					while = {
						limit = {
							var:math_ln_inp < 1
						}
						change_variable = {
							name = math_ln_inp
							multiply = 2
						}
						change_variable = {
							name = math_pow_ln
							subtract = 6931.472
						}
					}
					change_variable = {
						name = math_ln_inp
						multiply = 10000
					}
					while = {
						limit = {
							var:math_ln_k < 10
						}
						change_variable = {
							name = math_ln_k
							add = 1
						}
						change_variable = {
							name = math_ln_div
							divide = 2
						}
						set_variable = {
							name = math_ln_t
							value = 10000
						}
						change_variable = {
							name = math_ln_t
							add = var:math_ln_div
						}
						if = {
							limit = {
								var:math_ln_inp = {
									compare_value >= prev.var:math_ln_t
								}
							}
							change_variable = {
								name = math_ln_inp
								divide = var:math_ln_t
							}
							change_variable = {
								name = math_ln_inp
								multiply = 10000
							}
							set_variable = {
								name = math_lt_ind
								value = var:math_ln_k
							}
							if = {
								limit = {
									var:math_lt_ind >= 6
								}
								if = {
									limit = {
										var:math_lt_ind >= 8
									}
									if = {
										limit = {
											var:math_lt_ind >= 9
										}
										if = {
											limit = {
												var:math_lt_ind >= 10
											}
											set_variable = {
												name = math_ln_lt
												value = 9.761
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 19.512
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 38.986
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 7
										}
										set_variable = {
											name = math_ln_lt
											value = 77.821
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 155.042
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										var:math_lt_ind >= 3
									}
									if = {
										limit = {
											var:math_lt_ind >= 4
										}
										if = {
											limit = {
												var:math_lt_ind >= 5
											}
											set_variable = {
												name = math_ln_lt
												value = 307.717
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 606.246
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 1177.83
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 2
										}
										set_variable = {
											name = math_ln_lt
											value = 2231.436
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 4054.651
										}
									}
								}
							}
							remove_variable = math_lt_ind
							change_variable = {
								name = math_pow_ln
								add = var:math_ln_lt
							}
						}
					}
					change_variable = {
						name = math_pow_ln
						divide = 10000
					}
					remove_variable = math_ln_k
					remove_variable = math_ln_div
					remove_variable = math_ln_t
					remove_variable = math_ln_lt
					remove_variable = math_ln_inp
					change_variable = {
						name = math_pow_exp
						multiply = var:math_pow_ln
					}
					set_variable = {
						name = math_e_exp
						value = var:math_pow_exp
					}
					set_variable = {
						name = math_pow_e
						value = 1
					}
					while = {
						limit = {
							var:math_e_exp >= 1
						}
						change_variable = {
							name = math_e_exp
							subtract = 1
						}
						change_variable = {
							name = math_pow_e
							multiply = 2.718
						}
					}
					while = {
						limit = {
							var:math_e_exp < 0
						}
						change_variable = {
							name = math_e_exp
							add = 1
						}
						change_variable = {
							name = math_pow_e
							divide = 2.718
						}
					}
					set_variable = {
						name = math_e_sm
						value = 1
					}
					if = {
						limit = {
							var:math_e_exp != 0
						}
						set_variable = {
							name = math_e_sq
							value = var:math_e_exp
						}
						change_variable = {
							name = math_e_sq
							multiply = var:math_e_exp
						}
						set_variable = {
							name = math_e_fct
							value = 2
						}
						set_variable = {
							name = math_e_fctl
							value = 2
						}
						set_variable = {
							name = math_e_a1
							value = var:math_e_sq
						}
						set_variable = {
							name = math_e_a2
							value = var:math_e_exp
						}
						set_variable = {
							name = math_e_a3
							value = 2
						}
						set_variable = {
							name = math_e_tmp
							value = var:math_e_a2
						}
						change_variable = {
							name = math_e_tmp
							multiply = var:math_e_a3
						}
						change_variable = {
							name = math_e_tmp
							add = var:math_e_a1
						}
						change_variable = {
							name = math_e_tmp
							divide = var:math_e_fct
						}
						change_variable = {
							name = math_e_sm
							add = var:math_e_tmp
						}
						set_variable = {
							name = math_e_prec
							value = 3
						}
						change_variable = {
							name = math_e_prec
							subtract = 1
						}
						while = {
							limit = {
								var:math_e_prec >= 1
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_a1
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a2
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a3
								add = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
						}
					}
					change_variable = {
						name = math_pow_e
						multiply = var:math_e_sm
					}
					remove_variable = math_e_sm
					remove_variable = math_e_tmp
					remove_variable = math_e_a1
					remove_variable = math_e_a2
					remove_variable = math_e_a3
					remove_variable = math_e_fctl
					remove_variable = math_e_fct
					remove_variable = math_e_prec
					remove_variable = math_e_sq
					remove_variable = math_e_exp
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_e
					}
					remove_variable = math_pow_ln
					remove_variable = math_pow_e
				}
			}
			else = {
				set_variable = {
					name = prod_size_actual
					value = 0
				}
			}
			remove_variable = math_pow_base
			remove_variable = math_pow_exp
			change_variable = {
				name = prod_size_actual
				multiply = var:prod_size
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				set_variable = {
					name = prod_dmnd_food
					value = var:prod_template.var:prod_dmnd_food
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_location.var:modi_prod_dmnd_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				set_variable = {
					name = prod_dmnd_fuel
					value = var:prod_template.var:prod_dmnd_fuel
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_location.var:modi_prod_dmnd_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				set_variable = {
					name = prod_dmnd_fiber
					value = var:prod_template.var:prod_dmnd_fiber
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_location.var:modi_prod_dmnd_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				set_variable = {
					name = prod_dmnd_pottery
					value = var:prod_template.var:prod_dmnd_pottery
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_location.var:modi_prod_dmnd_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				set_variable = {
					name = prod_dmnd_textile
					value = var:prod_template.var:prod_dmnd_textile
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_location.var:modi_prod_dmnd_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_food
					value = var:prod_template.var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_location.var:modi_prod_sply_food
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_fuel
					value = var:prod_template.var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_location.var:modi_prod_sply_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_fiber
					value = var:prod_template.var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_location.var:modi_prod_sply_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_pottery
					value = var:prod_template.var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_location.var:modi_prod_sply_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_textile
					value = var:prod_template.var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_location.var:modi_prod_sply_textile
				}
			}
		}
	}
}
province:1582 = {
	if = {
		limit = {
			has_variable_list = prod_instances
			variable_list_size = {
				name = prod_instances
				value >= 1
			}
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_update_instances_t
				value = 1
			}
			set_variable = {
				name = prod_update_instances_tt
				value = 0
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				if = {
					limit = {
						var:prod_dmnd_food = {
							compare_value != prev.var:prod_in_food
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_food
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_food
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_food
					value = var:prod_dmnd_food
				}
				set_variable = {
					name = prod_in_old_food
					value = var:prod_in_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				if = {
					limit = {
						var:prod_dmnd_fiber = {
							compare_value != prev.var:prod_in_fiber
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fiber
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fiber
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fiber
					value = var:prod_dmnd_fiber
				}
				set_variable = {
					name = prod_in_old_fiber
					value = var:prod_in_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				if = {
					limit = {
						var:prod_dmnd_fuel = {
							compare_value != prev.var:prod_in_fuel
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fuel
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fuel
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fuel
					value = var:prod_dmnd_fuel
				}
				set_variable = {
					name = prod_in_old_fuel
					value = var:prod_in_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				if = {
					limit = {
						var:prod_dmnd_pottery = {
							compare_value != prev.var:prod_in_pottery
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_pottery
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_pottery
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_pottery
					value = var:prod_dmnd_pottery
				}
				set_variable = {
					name = prod_in_old_pottery
					value = var:prod_in_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				if = {
					limit = {
						var:prod_dmnd_textile = {
							compare_value != prev.var:prod_in_textile
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_textile
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_textile
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_textile
					value = var:prod_dmnd_textile
				}
				set_variable = {
					name = prod_in_old_textile
					value = var:prod_in_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_update_instances_tt
					var:prod_update_instances_tt > 0
				}
				set_variable = {
					name = math_root_exp
					value = 1
				}
				change_variable = {
					name = math_root_exp
					divide = var:prod_update_instances_tt
				}
				set_variable = {
					name = math_pow_base
					value = var:prod_update_instances_t
				}
				set_variable = {
					name = math_pow_exp
					value = var:math_root_exp
				}
				if = {
					limit = {
						has_variable = math_pow_base
						var:math_pow_base != 0
					}
					set_variable = {
						name = prod_update_instances_t
						value = 1
					}
					while = {
						limit = {
							var:math_pow_exp >= 1
						}
						change_variable = {
							name = math_pow_exp
							subtract = 1
						}
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_base
						}
					}
					while = {
						limit = {
							var:math_pow_exp < 0
						}
						change_variable = {
							name = math_pow_exp
							add = 1
						}
						change_variable = {
							name = prod_update_instances_t
							divide = var:math_pow_base
						}
					}
					if = {
						limit = {
							var:math_pow_exp != 0
						}
						set_variable = {
							name = math_ln_inp
							value = var:math_pow_base
						}
						set_variable = {
							name = math_pow_ln
							value = 0
						}
						set_variable = {
							name = math_ln_k
							value = 0
						}
						set_variable = {
							name = math_ln_div
							value = 10000
						}
						while = {
							limit = {
								var:math_ln_inp >= 2
							}
							change_variable = {
								name = math_ln_inp
								divide = 2
							}
							change_variable = {
								name = math_pow_ln
								add = 6931.472
							}
						}
						while = {
							limit = {
								var:math_ln_inp < 1
							}
							change_variable = {
								name = math_ln_inp
								multiply = 2
							}
							change_variable = {
								name = math_pow_ln
								subtract = 6931.472
							}
						}
						change_variable = {
							name = math_ln_inp
							multiply = 10000
						}
						while = {
							limit = {
								var:math_ln_k < 10
							}
							change_variable = {
								name = math_ln_k
								add = 1
							}
							change_variable = {
								name = math_ln_div
								divide = 2
							}
							set_variable = {
								name = math_ln_t
								value = 10000
							}
							change_variable = {
								name = math_ln_t
								add = var:math_ln_div
							}
							if = {
								limit = {
									var:math_ln_inp = {
										compare_value >= prev.var:math_ln_t
									}
								}
								change_variable = {
									name = math_ln_inp
									divide = var:math_ln_t
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								set_variable = {
									name = math_lt_ind
									value = var:math_ln_k
								}
								if = {
									limit = {
										var:math_lt_ind >= 6
									}
									if = {
										limit = {
											var:math_lt_ind >= 8
										}
										if = {
											limit = {
												var:math_lt_ind >= 9
											}
											if = {
												limit = {
													var:math_lt_ind >= 10
												}
												set_variable = {
													name = math_ln_lt
													value = 9.761
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 19.512
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 38.986
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 7
											}
											set_variable = {
												name = math_ln_lt
												value = 77.821
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 155.042
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 3
										}
										if = {
											limit = {
												var:math_lt_ind >= 4
											}
											if = {
												limit = {
													var:math_lt_ind >= 5
												}
												set_variable = {
													name = math_ln_lt
													value = 307.717
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 606.246
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 1177.83
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 2
											}
											set_variable = {
												name = math_ln_lt
												value = 2231.436
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 4054.651
											}
										}
									}
								}
								remove_variable = math_lt_ind
								change_variable = {
									name = math_pow_ln
									add = var:math_ln_lt
								}
							}
						}
						change_variable = {
							name = math_pow_ln
							divide = 10000
						}
						remove_variable = math_ln_k
						remove_variable = math_ln_div
						remove_variable = math_ln_t
						remove_variable = math_ln_lt
						remove_variable = math_ln_inp
						change_variable = {
							name = math_pow_exp
							multiply = var:math_pow_ln
						}
						set_variable = {
							name = math_e_exp
							value = var:math_pow_exp
						}
						set_variable = {
							name = math_pow_e
							value = 1
						}
						while = {
							limit = {
								var:math_e_exp >= 1
							}
							change_variable = {
								name = math_e_exp
								subtract = 1
							}
							change_variable = {
								name = math_pow_e
								multiply = 2.718
							}
						}
						while = {
							limit = {
								var:math_e_exp < 0
							}
							change_variable = {
								name = math_e_exp
								add = 1
							}
							change_variable = {
								name = math_pow_e
								divide = 2.718
							}
						}
						set_variable = {
							name = math_e_sm
							value = 1
						}
						if = {
							limit = {
								var:math_e_exp != 0
							}
							set_variable = {
								name = math_e_sq
								value = var:math_e_exp
							}
							change_variable = {
								name = math_e_sq
								multiply = var:math_e_exp
							}
							set_variable = {
								name = math_e_fct
								value = 2
							}
							set_variable = {
								name = math_e_fctl
								value = 2
							}
							set_variable = {
								name = math_e_a1
								value = var:math_e_sq
							}
							set_variable = {
								name = math_e_a2
								value = var:math_e_exp
							}
							set_variable = {
								name = math_e_a3
								value = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
							set_variable = {
								name = math_e_prec
								value = 3
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							while = {
								limit = {
									var:math_e_prec >= 1
								}
								change_variable = {
									name = math_e_prec
									subtract = 1
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_a1
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a2
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a3
									add = 2
								}
								set_variable = {
									name = math_e_tmp
									value = var:math_e_a2
								}
								change_variable = {
									name = math_e_tmp
									multiply = var:math_e_a3
								}
								change_variable = {
									name = math_e_tmp
									add = var:math_e_a1
								}
								change_variable = {
									name = math_e_tmp
									divide = var:math_e_fct
								}
								change_variable = {
									name = math_e_sm
									add = var:math_e_tmp
								}
							}
						}
						change_variable = {
							name = math_pow_e
							multiply = var:math_e_sm
						}
						remove_variable = math_e_sm
						remove_variable = math_e_tmp
						remove_variable = math_e_a1
						remove_variable = math_e_a2
						remove_variable = math_e_a3
						remove_variable = math_e_fctl
						remove_variable = math_e_fct
						remove_variable = math_e_prec
						remove_variable = math_e_sq
						remove_variable = math_e_exp
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_e
						}
						remove_variable = math_pow_ln
						remove_variable = math_pow_e
					}
				}
				else = {
					set_variable = {
						name = prod_update_instances_t
						value = 0
					}
				}
				remove_variable = math_pow_base
				remove_variable = math_pow_exp
				remove_variable = math_root_exp
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_old_food
					value = var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_old_food
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_old_fiber
					value = var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_old_fiber
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_old_fuel
					value = var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_old_fuel
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_old_pottery
					value = var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_old_pottery
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_old_textile
					value = var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_old_textile
					multiply = var:prod_update_instances_t
				}
			}
			remove_variable = prod_update_instances_t
			remove_variable = prod_update_instances_tt
		}
		set_global_variable = {
			name = prod_update_instances_labor
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_farm
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_pasture
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_forest
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_workshop
			value = 0
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_labor
				value = var:prod_template.var:prod_labor
			}
			set_variable = {
				name = prod_land
				value = var:prod_template.var:prod_land
			}
			change_variable = {
				name = prod_labor
				multiply = var:prod_size
			}
			change_variable = {
				name = prod_land
				multiply = var:prod_size
			}
			change_global_variable = {
				name = prod_update_instances_labor
				add = var:prod_labor
			}
			var:prod_template = {
				if = {
					limit = {
						has_character_flag = prod_land_farm
					}
					change_global_variable = {
						name = prod_update_instances_farm
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_pasture
					}
					change_global_variable = {
						name = prod_update_instances_pasture
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_forest
					}
					change_global_variable = {
						name = prod_update_instances_forest
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_workshop
					}
					change_global_variable = {
						name = prod_update_instances_workshop
						add = prev.var:prod_land
					}
				}
			}
		}
		if = {
			limit = {
				var:pop_total = {
					compare_value >= global_var:prod_update_instances_labor
				}
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
			}
		}
		else_if = {
			limit = {
				var:pop_total = 0
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_labor
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
				change_variable = {
					name = prod_labor_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:farm_total = {
					compare_value >= global_var:prod_update_instances_farm
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:farm_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:farm_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_farm
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:pasture_total = {
					compare_value >= global_var:prod_update_instances_pasture
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:pasture_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pasture_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_pasture
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:forest_total = {
					compare_value >= global_var:prod_update_instances_forest
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:forest_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:forest_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_forest
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:workshop_total = {
					compare_value >= global_var:prod_update_instances_workshop
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:workshop_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:workshop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_workshop
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_size_actual
				value = 1
			}
			if = {
				limit = {
					var:prod_labor = {
						compare_value != prev.var:prod_labor_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_labor_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_labor
				}
			}
			if = {
				limit = {
					var:prod_land = {
						compare_value != prev.var:prod_land_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_land_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_land
				}
			}
			set_variable = {
				name = math_pow_base
				value = var:prod_size_actual
			}
			set_variable = {
				name = math_pow_exp
				value = 0.5
			}
			if = {
				limit = {
					has_variable = math_pow_base
					var:math_pow_base != 0
				}
				set_variable = {
					name = prod_size_actual
					value = 1
				}
				while = {
					limit = {
						var:math_pow_exp >= 1
					}
					change_variable = {
						name = math_pow_exp
						subtract = 1
					}
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_base
					}
				}
				while = {
					limit = {
						var:math_pow_exp < 0
					}
					change_variable = {
						name = math_pow_exp
						add = 1
					}
					change_variable = {
						name = prod_size_actual
						divide = var:math_pow_base
					}
				}
				if = {
					limit = {
						var:math_pow_exp != 0
					}
					set_variable = {
						name = math_ln_inp
						value = var:math_pow_base
					}
					set_variable = {
						name = math_pow_ln
						value = 0
					}
					set_variable = {
						name = math_ln_k
						value = 0
					}
					set_variable = {
						name = math_ln_div
						value = 10000
					}
					while = {
						limit = {
							var:math_ln_inp >= 2
						}
						change_variable = {
							name = math_ln_inp
							divide = 2
						}
						change_variable = {
							name = math_pow_ln
							add = 6931.472
						}
					}
					while = {
						limit = {
							var:math_ln_inp < 1
						}
						change_variable = {
							name = math_ln_inp
							multiply = 2
						}
						change_variable = {
							name = math_pow_ln
							subtract = 6931.472
						}
					}
					change_variable = {
						name = math_ln_inp
						multiply = 10000
					}
					while = {
						limit = {
							var:math_ln_k < 10
						}
						change_variable = {
							name = math_ln_k
							add = 1
						}
						change_variable = {
							name = math_ln_div
							divide = 2
						}
						set_variable = {
							name = math_ln_t
							value = 10000
						}
						change_variable = {
							name = math_ln_t
							add = var:math_ln_div
						}
						if = {
							limit = {
								var:math_ln_inp = {
									compare_value >= prev.var:math_ln_t
								}
							}
							change_variable = {
								name = math_ln_inp
								divide = var:math_ln_t
							}
							change_variable = {
								name = math_ln_inp
								multiply = 10000
							}
							set_variable = {
								name = math_lt_ind
								value = var:math_ln_k
							}
							if = {
								limit = {
									var:math_lt_ind >= 6
								}
								if = {
									limit = {
										var:math_lt_ind >= 8
									}
									if = {
										limit = {
											var:math_lt_ind >= 9
										}
										if = {
											limit = {
												var:math_lt_ind >= 10
											}
											set_variable = {
												name = math_ln_lt
												value = 9.761
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 19.512
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 38.986
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 7
										}
										set_variable = {
											name = math_ln_lt
											value = 77.821
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 155.042
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										var:math_lt_ind >= 3
									}
									if = {
										limit = {
											var:math_lt_ind >= 4
										}
										if = {
											limit = {
												var:math_lt_ind >= 5
											}
											set_variable = {
												name = math_ln_lt
												value = 307.717
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 606.246
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 1177.83
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 2
										}
										set_variable = {
											name = math_ln_lt
											value = 2231.436
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 4054.651
										}
									}
								}
							}
							remove_variable = math_lt_ind
							change_variable = {
								name = math_pow_ln
								add = var:math_ln_lt
							}
						}
					}
					change_variable = {
						name = math_pow_ln
						divide = 10000
					}
					remove_variable = math_ln_k
					remove_variable = math_ln_div
					remove_variable = math_ln_t
					remove_variable = math_ln_lt
					remove_variable = math_ln_inp
					change_variable = {
						name = math_pow_exp
						multiply = var:math_pow_ln
					}
					set_variable = {
						name = math_e_exp
						value = var:math_pow_exp
					}
					set_variable = {
						name = math_pow_e
						value = 1
					}
					while = {
						limit = {
							var:math_e_exp >= 1
						}
						change_variable = {
							name = math_e_exp
							subtract = 1
						}
						change_variable = {
							name = math_pow_e
							multiply = 2.718
						}
					}
					while = {
						limit = {
							var:math_e_exp < 0
						}
						change_variable = {
							name = math_e_exp
							add = 1
						}
						change_variable = {
							name = math_pow_e
							divide = 2.718
						}
					}
					set_variable = {
						name = math_e_sm
						value = 1
					}
					if = {
						limit = {
							var:math_e_exp != 0
						}
						set_variable = {
							name = math_e_sq
							value = var:math_e_exp
						}
						change_variable = {
							name = math_e_sq
							multiply = var:math_e_exp
						}
						set_variable = {
							name = math_e_fct
							value = 2
						}
						set_variable = {
							name = math_e_fctl
							value = 2
						}
						set_variable = {
							name = math_e_a1
							value = var:math_e_sq
						}
						set_variable = {
							name = math_e_a2
							value = var:math_e_exp
						}
						set_variable = {
							name = math_e_a3
							value = 2
						}
						set_variable = {
							name = math_e_tmp
							value = var:math_e_a2
						}
						change_variable = {
							name = math_e_tmp
							multiply = var:math_e_a3
						}
						change_variable = {
							name = math_e_tmp
							add = var:math_e_a1
						}
						change_variable = {
							name = math_e_tmp
							divide = var:math_e_fct
						}
						change_variable = {
							name = math_e_sm
							add = var:math_e_tmp
						}
						set_variable = {
							name = math_e_prec
							value = 3
						}
						change_variable = {
							name = math_e_prec
							subtract = 1
						}
						while = {
							limit = {
								var:math_e_prec >= 1
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_a1
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a2
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a3
								add = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
						}
					}
					change_variable = {
						name = math_pow_e
						multiply = var:math_e_sm
					}
					remove_variable = math_e_sm
					remove_variable = math_e_tmp
					remove_variable = math_e_a1
					remove_variable = math_e_a2
					remove_variable = math_e_a3
					remove_variable = math_e_fctl
					remove_variable = math_e_fct
					remove_variable = math_e_prec
					remove_variable = math_e_sq
					remove_variable = math_e_exp
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_e
					}
					remove_variable = math_pow_ln
					remove_variable = math_pow_e
				}
			}
			else = {
				set_variable = {
					name = prod_size_actual
					value = 0
				}
			}
			remove_variable = math_pow_base
			remove_variable = math_pow_exp
			change_variable = {
				name = prod_size_actual
				multiply = var:prod_size
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				set_variable = {
					name = prod_dmnd_food
					value = var:prod_template.var:prod_dmnd_food
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_location.var:modi_prod_dmnd_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				set_variable = {
					name = prod_dmnd_fuel
					value = var:prod_template.var:prod_dmnd_fuel
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_location.var:modi_prod_dmnd_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				set_variable = {
					name = prod_dmnd_fiber
					value = var:prod_template.var:prod_dmnd_fiber
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_location.var:modi_prod_dmnd_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				set_variable = {
					name = prod_dmnd_pottery
					value = var:prod_template.var:prod_dmnd_pottery
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_location.var:modi_prod_dmnd_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				set_variable = {
					name = prod_dmnd_textile
					value = var:prod_template.var:prod_dmnd_textile
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_location.var:modi_prod_dmnd_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_food
					value = var:prod_template.var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_location.var:modi_prod_sply_food
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_fuel
					value = var:prod_template.var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_location.var:modi_prod_sply_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_fiber
					value = var:prod_template.var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_location.var:modi_prod_sply_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_pottery
					value = var:prod_template.var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_location.var:modi_prod_sply_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_textile
					value = var:prod_template.var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_location.var:modi_prod_sply_textile
				}
			}
		}
	}
}
province:1561 = {
	if = {
		limit = {
			has_variable_list = prod_instances
			variable_list_size = {
				name = prod_instances
				value >= 1
			}
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_update_instances_t
				value = 1
			}
			set_variable = {
				name = prod_update_instances_tt
				value = 0
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				if = {
					limit = {
						var:prod_dmnd_food = {
							compare_value != prev.var:prod_in_food
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_food
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_food
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_food
					value = var:prod_dmnd_food
				}
				set_variable = {
					name = prod_in_old_food
					value = var:prod_in_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				if = {
					limit = {
						var:prod_dmnd_fiber = {
							compare_value != prev.var:prod_in_fiber
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fiber
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fiber
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fiber
					value = var:prod_dmnd_fiber
				}
				set_variable = {
					name = prod_in_old_fiber
					value = var:prod_in_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				if = {
					limit = {
						var:prod_dmnd_fuel = {
							compare_value != prev.var:prod_in_fuel
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fuel
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fuel
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fuel
					value = var:prod_dmnd_fuel
				}
				set_variable = {
					name = prod_in_old_fuel
					value = var:prod_in_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				if = {
					limit = {
						var:prod_dmnd_pottery = {
							compare_value != prev.var:prod_in_pottery
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_pottery
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_pottery
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_pottery
					value = var:prod_dmnd_pottery
				}
				set_variable = {
					name = prod_in_old_pottery
					value = var:prod_in_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				if = {
					limit = {
						var:prod_dmnd_textile = {
							compare_value != prev.var:prod_in_textile
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_textile
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_textile
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_textile
					value = var:prod_dmnd_textile
				}
				set_variable = {
					name = prod_in_old_textile
					value = var:prod_in_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_update_instances_tt
					var:prod_update_instances_tt > 0
				}
				set_variable = {
					name = math_root_exp
					value = 1
				}
				change_variable = {
					name = math_root_exp
					divide = var:prod_update_instances_tt
				}
				set_variable = {
					name = math_pow_base
					value = var:prod_update_instances_t
				}
				set_variable = {
					name = math_pow_exp
					value = var:math_root_exp
				}
				if = {
					limit = {
						has_variable = math_pow_base
						var:math_pow_base != 0
					}
					set_variable = {
						name = prod_update_instances_t
						value = 1
					}
					while = {
						limit = {
							var:math_pow_exp >= 1
						}
						change_variable = {
							name = math_pow_exp
							subtract = 1
						}
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_base
						}
					}
					while = {
						limit = {
							var:math_pow_exp < 0
						}
						change_variable = {
							name = math_pow_exp
							add = 1
						}
						change_variable = {
							name = prod_update_instances_t
							divide = var:math_pow_base
						}
					}
					if = {
						limit = {
							var:math_pow_exp != 0
						}
						set_variable = {
							name = math_ln_inp
							value = var:math_pow_base
						}
						set_variable = {
							name = math_pow_ln
							value = 0
						}
						set_variable = {
							name = math_ln_k
							value = 0
						}
						set_variable = {
							name = math_ln_div
							value = 10000
						}
						while = {
							limit = {
								var:math_ln_inp >= 2
							}
							change_variable = {
								name = math_ln_inp
								divide = 2
							}
							change_variable = {
								name = math_pow_ln
								add = 6931.472
							}
						}
						while = {
							limit = {
								var:math_ln_inp < 1
							}
							change_variable = {
								name = math_ln_inp
								multiply = 2
							}
							change_variable = {
								name = math_pow_ln
								subtract = 6931.472
							}
						}
						change_variable = {
							name = math_ln_inp
							multiply = 10000
						}
						while = {
							limit = {
								var:math_ln_k < 10
							}
							change_variable = {
								name = math_ln_k
								add = 1
							}
							change_variable = {
								name = math_ln_div
								divide = 2
							}
							set_variable = {
								name = math_ln_t
								value = 10000
							}
							change_variable = {
								name = math_ln_t
								add = var:math_ln_div
							}
							if = {
								limit = {
									var:math_ln_inp = {
										compare_value >= prev.var:math_ln_t
									}
								}
								change_variable = {
									name = math_ln_inp
									divide = var:math_ln_t
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								set_variable = {
									name = math_lt_ind
									value = var:math_ln_k
								}
								if = {
									limit = {
										var:math_lt_ind >= 6
									}
									if = {
										limit = {
											var:math_lt_ind >= 8
										}
										if = {
											limit = {
												var:math_lt_ind >= 9
											}
											if = {
												limit = {
													var:math_lt_ind >= 10
												}
												set_variable = {
													name = math_ln_lt
													value = 9.761
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 19.512
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 38.986
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 7
											}
											set_variable = {
												name = math_ln_lt
												value = 77.821
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 155.042
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 3
										}
										if = {
											limit = {
												var:math_lt_ind >= 4
											}
											if = {
												limit = {
													var:math_lt_ind >= 5
												}
												set_variable = {
													name = math_ln_lt
													value = 307.717
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 606.246
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 1177.83
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 2
											}
											set_variable = {
												name = math_ln_lt
												value = 2231.436
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 4054.651
											}
										}
									}
								}
								remove_variable = math_lt_ind
								change_variable = {
									name = math_pow_ln
									add = var:math_ln_lt
								}
							}
						}
						change_variable = {
							name = math_pow_ln
							divide = 10000
						}
						remove_variable = math_ln_k
						remove_variable = math_ln_div
						remove_variable = math_ln_t
						remove_variable = math_ln_lt
						remove_variable = math_ln_inp
						change_variable = {
							name = math_pow_exp
							multiply = var:math_pow_ln
						}
						set_variable = {
							name = math_e_exp
							value = var:math_pow_exp
						}
						set_variable = {
							name = math_pow_e
							value = 1
						}
						while = {
							limit = {
								var:math_e_exp >= 1
							}
							change_variable = {
								name = math_e_exp
								subtract = 1
							}
							change_variable = {
								name = math_pow_e
								multiply = 2.718
							}
						}
						while = {
							limit = {
								var:math_e_exp < 0
							}
							change_variable = {
								name = math_e_exp
								add = 1
							}
							change_variable = {
								name = math_pow_e
								divide = 2.718
							}
						}
						set_variable = {
							name = math_e_sm
							value = 1
						}
						if = {
							limit = {
								var:math_e_exp != 0
							}
							set_variable = {
								name = math_e_sq
								value = var:math_e_exp
							}
							change_variable = {
								name = math_e_sq
								multiply = var:math_e_exp
							}
							set_variable = {
								name = math_e_fct
								value = 2
							}
							set_variable = {
								name = math_e_fctl
								value = 2
							}
							set_variable = {
								name = math_e_a1
								value = var:math_e_sq
							}
							set_variable = {
								name = math_e_a2
								value = var:math_e_exp
							}
							set_variable = {
								name = math_e_a3
								value = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
							set_variable = {
								name = math_e_prec
								value = 3
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							while = {
								limit = {
									var:math_e_prec >= 1
								}
								change_variable = {
									name = math_e_prec
									subtract = 1
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_a1
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a2
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a3
									add = 2
								}
								set_variable = {
									name = math_e_tmp
									value = var:math_e_a2
								}
								change_variable = {
									name = math_e_tmp
									multiply = var:math_e_a3
								}
								change_variable = {
									name = math_e_tmp
									add = var:math_e_a1
								}
								change_variable = {
									name = math_e_tmp
									divide = var:math_e_fct
								}
								change_variable = {
									name = math_e_sm
									add = var:math_e_tmp
								}
							}
						}
						change_variable = {
							name = math_pow_e
							multiply = var:math_e_sm
						}
						remove_variable = math_e_sm
						remove_variable = math_e_tmp
						remove_variable = math_e_a1
						remove_variable = math_e_a2
						remove_variable = math_e_a3
						remove_variable = math_e_fctl
						remove_variable = math_e_fct
						remove_variable = math_e_prec
						remove_variable = math_e_sq
						remove_variable = math_e_exp
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_e
						}
						remove_variable = math_pow_ln
						remove_variable = math_pow_e
					}
				}
				else = {
					set_variable = {
						name = prod_update_instances_t
						value = 0
					}
				}
				remove_variable = math_pow_base
				remove_variable = math_pow_exp
				remove_variable = math_root_exp
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_old_food
					value = var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_old_food
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_old_fiber
					value = var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_old_fiber
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_old_fuel
					value = var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_old_fuel
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_old_pottery
					value = var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_old_pottery
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_old_textile
					value = var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_old_textile
					multiply = var:prod_update_instances_t
				}
			}
			remove_variable = prod_update_instances_t
			remove_variable = prod_update_instances_tt
		}
		set_global_variable = {
			name = prod_update_instances_labor
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_farm
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_pasture
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_forest
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_workshop
			value = 0
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_labor
				value = var:prod_template.var:prod_labor
			}
			set_variable = {
				name = prod_land
				value = var:prod_template.var:prod_land
			}
			change_variable = {
				name = prod_labor
				multiply = var:prod_size
			}
			change_variable = {
				name = prod_land
				multiply = var:prod_size
			}
			change_global_variable = {
				name = prod_update_instances_labor
				add = var:prod_labor
			}
			var:prod_template = {
				if = {
					limit = {
						has_character_flag = prod_land_farm
					}
					change_global_variable = {
						name = prod_update_instances_farm
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_pasture
					}
					change_global_variable = {
						name = prod_update_instances_pasture
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_forest
					}
					change_global_variable = {
						name = prod_update_instances_forest
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_workshop
					}
					change_global_variable = {
						name = prod_update_instances_workshop
						add = prev.var:prod_land
					}
				}
			}
		}
		if = {
			limit = {
				var:pop_total = {
					compare_value >= global_var:prod_update_instances_labor
				}
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
			}
		}
		else_if = {
			limit = {
				var:pop_total = 0
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_labor
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
				change_variable = {
					name = prod_labor_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:farm_total = {
					compare_value >= global_var:prod_update_instances_farm
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:farm_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:farm_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_farm
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:pasture_total = {
					compare_value >= global_var:prod_update_instances_pasture
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:pasture_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pasture_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_pasture
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:forest_total = {
					compare_value >= global_var:prod_update_instances_forest
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:forest_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:forest_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_forest
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:workshop_total = {
					compare_value >= global_var:prod_update_instances_workshop
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:workshop_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:workshop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_workshop
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_size_actual
				value = 1
			}
			if = {
				limit = {
					var:prod_labor = {
						compare_value != prev.var:prod_labor_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_labor_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_labor
				}
			}
			if = {
				limit = {
					var:prod_land = {
						compare_value != prev.var:prod_land_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_land_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_land
				}
			}
			set_variable = {
				name = math_pow_base
				value = var:prod_size_actual
			}
			set_variable = {
				name = math_pow_exp
				value = 0.5
			}
			if = {
				limit = {
					has_variable = math_pow_base
					var:math_pow_base != 0
				}
				set_variable = {
					name = prod_size_actual
					value = 1
				}
				while = {
					limit = {
						var:math_pow_exp >= 1
					}
					change_variable = {
						name = math_pow_exp
						subtract = 1
					}
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_base
					}
				}
				while = {
					limit = {
						var:math_pow_exp < 0
					}
					change_variable = {
						name = math_pow_exp
						add = 1
					}
					change_variable = {
						name = prod_size_actual
						divide = var:math_pow_base
					}
				}
				if = {
					limit = {
						var:math_pow_exp != 0
					}
					set_variable = {
						name = math_ln_inp
						value = var:math_pow_base
					}
					set_variable = {
						name = math_pow_ln
						value = 0
					}
					set_variable = {
						name = math_ln_k
						value = 0
					}
					set_variable = {
						name = math_ln_div
						value = 10000
					}
					while = {
						limit = {
							var:math_ln_inp >= 2
						}
						change_variable = {
							name = math_ln_inp
							divide = 2
						}
						change_variable = {
							name = math_pow_ln
							add = 6931.472
						}
					}
					while = {
						limit = {
							var:math_ln_inp < 1
						}
						change_variable = {
							name = math_ln_inp
							multiply = 2
						}
						change_variable = {
							name = math_pow_ln
							subtract = 6931.472
						}
					}
					change_variable = {
						name = math_ln_inp
						multiply = 10000
					}
					while = {
						limit = {
							var:math_ln_k < 10
						}
						change_variable = {
							name = math_ln_k
							add = 1
						}
						change_variable = {
							name = math_ln_div
							divide = 2
						}
						set_variable = {
							name = math_ln_t
							value = 10000
						}
						change_variable = {
							name = math_ln_t
							add = var:math_ln_div
						}
						if = {
							limit = {
								var:math_ln_inp = {
									compare_value >= prev.var:math_ln_t
								}
							}
							change_variable = {
								name = math_ln_inp
								divide = var:math_ln_t
							}
							change_variable = {
								name = math_ln_inp
								multiply = 10000
							}
							set_variable = {
								name = math_lt_ind
								value = var:math_ln_k
							}
							if = {
								limit = {
									var:math_lt_ind >= 6
								}
								if = {
									limit = {
										var:math_lt_ind >= 8
									}
									if = {
										limit = {
											var:math_lt_ind >= 9
										}
										if = {
											limit = {
												var:math_lt_ind >= 10
											}
											set_variable = {
												name = math_ln_lt
												value = 9.761
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 19.512
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 38.986
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 7
										}
										set_variable = {
											name = math_ln_lt
											value = 77.821
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 155.042
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										var:math_lt_ind >= 3
									}
									if = {
										limit = {
											var:math_lt_ind >= 4
										}
										if = {
											limit = {
												var:math_lt_ind >= 5
											}
											set_variable = {
												name = math_ln_lt
												value = 307.717
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 606.246
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 1177.83
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 2
										}
										set_variable = {
											name = math_ln_lt
											value = 2231.436
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 4054.651
										}
									}
								}
							}
							remove_variable = math_lt_ind
							change_variable = {
								name = math_pow_ln
								add = var:math_ln_lt
							}
						}
					}
					change_variable = {
						name = math_pow_ln
						divide = 10000
					}
					remove_variable = math_ln_k
					remove_variable = math_ln_div
					remove_variable = math_ln_t
					remove_variable = math_ln_lt
					remove_variable = math_ln_inp
					change_variable = {
						name = math_pow_exp
						multiply = var:math_pow_ln
					}
					set_variable = {
						name = math_e_exp
						value = var:math_pow_exp
					}
					set_variable = {
						name = math_pow_e
						value = 1
					}
					while = {
						limit = {
							var:math_e_exp >= 1
						}
						change_variable = {
							name = math_e_exp
							subtract = 1
						}
						change_variable = {
							name = math_pow_e
							multiply = 2.718
						}
					}
					while = {
						limit = {
							var:math_e_exp < 0
						}
						change_variable = {
							name = math_e_exp
							add = 1
						}
						change_variable = {
							name = math_pow_e
							divide = 2.718
						}
					}
					set_variable = {
						name = math_e_sm
						value = 1
					}
					if = {
						limit = {
							var:math_e_exp != 0
						}
						set_variable = {
							name = math_e_sq
							value = var:math_e_exp
						}
						change_variable = {
							name = math_e_sq
							multiply = var:math_e_exp
						}
						set_variable = {
							name = math_e_fct
							value = 2
						}
						set_variable = {
							name = math_e_fctl
							value = 2
						}
						set_variable = {
							name = math_e_a1
							value = var:math_e_sq
						}
						set_variable = {
							name = math_e_a2
							value = var:math_e_exp
						}
						set_variable = {
							name = math_e_a3
							value = 2
						}
						set_variable = {
							name = math_e_tmp
							value = var:math_e_a2
						}
						change_variable = {
							name = math_e_tmp
							multiply = var:math_e_a3
						}
						change_variable = {
							name = math_e_tmp
							add = var:math_e_a1
						}
						change_variable = {
							name = math_e_tmp
							divide = var:math_e_fct
						}
						change_variable = {
							name = math_e_sm
							add = var:math_e_tmp
						}
						set_variable = {
							name = math_e_prec
							value = 3
						}
						change_variable = {
							name = math_e_prec
							subtract = 1
						}
						while = {
							limit = {
								var:math_e_prec >= 1
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_a1
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a2
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a3
								add = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
						}
					}
					change_variable = {
						name = math_pow_e
						multiply = var:math_e_sm
					}
					remove_variable = math_e_sm
					remove_variable = math_e_tmp
					remove_variable = math_e_a1
					remove_variable = math_e_a2
					remove_variable = math_e_a3
					remove_variable = math_e_fctl
					remove_variable = math_e_fct
					remove_variable = math_e_prec
					remove_variable = math_e_sq
					remove_variable = math_e_exp
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_e
					}
					remove_variable = math_pow_ln
					remove_variable = math_pow_e
				}
			}
			else = {
				set_variable = {
					name = prod_size_actual
					value = 0
				}
			}
			remove_variable = math_pow_base
			remove_variable = math_pow_exp
			change_variable = {
				name = prod_size_actual
				multiply = var:prod_size
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				set_variable = {
					name = prod_dmnd_food
					value = var:prod_template.var:prod_dmnd_food
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_location.var:modi_prod_dmnd_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				set_variable = {
					name = prod_dmnd_fuel
					value = var:prod_template.var:prod_dmnd_fuel
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_location.var:modi_prod_dmnd_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				set_variable = {
					name = prod_dmnd_fiber
					value = var:prod_template.var:prod_dmnd_fiber
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_location.var:modi_prod_dmnd_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				set_variable = {
					name = prod_dmnd_pottery
					value = var:prod_template.var:prod_dmnd_pottery
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_location.var:modi_prod_dmnd_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				set_variable = {
					name = prod_dmnd_textile
					value = var:prod_template.var:prod_dmnd_textile
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_location.var:modi_prod_dmnd_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_food
					value = var:prod_template.var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_location.var:modi_prod_sply_food
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_fuel
					value = var:prod_template.var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_location.var:modi_prod_sply_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_fiber
					value = var:prod_template.var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_location.var:modi_prod_sply_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_pottery
					value = var:prod_template.var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_location.var:modi_prod_sply_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_textile
					value = var:prod_template.var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_location.var:modi_prod_sply_textile
				}
			}
		}
	}
}
province:1555 = {
	if = {
		limit = {
			has_variable_list = prod_instances
			variable_list_size = {
				name = prod_instances
				value >= 1
			}
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_update_instances_t
				value = 1
			}
			set_variable = {
				name = prod_update_instances_tt
				value = 0
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				if = {
					limit = {
						var:prod_dmnd_food = {
							compare_value != prev.var:prod_in_food
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_food
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_food
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_food
					value = var:prod_dmnd_food
				}
				set_variable = {
					name = prod_in_old_food
					value = var:prod_in_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				if = {
					limit = {
						var:prod_dmnd_fiber = {
							compare_value != prev.var:prod_in_fiber
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fiber
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fiber
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fiber
					value = var:prod_dmnd_fiber
				}
				set_variable = {
					name = prod_in_old_fiber
					value = var:prod_in_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				if = {
					limit = {
						var:prod_dmnd_fuel = {
							compare_value != prev.var:prod_in_fuel
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fuel
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fuel
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fuel
					value = var:prod_dmnd_fuel
				}
				set_variable = {
					name = prod_in_old_fuel
					value = var:prod_in_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				if = {
					limit = {
						var:prod_dmnd_pottery = {
							compare_value != prev.var:prod_in_pottery
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_pottery
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_pottery
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_pottery
					value = var:prod_dmnd_pottery
				}
				set_variable = {
					name = prod_in_old_pottery
					value = var:prod_in_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				if = {
					limit = {
						var:prod_dmnd_textile = {
							compare_value != prev.var:prod_in_textile
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_textile
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_textile
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_textile
					value = var:prod_dmnd_textile
				}
				set_variable = {
					name = prod_in_old_textile
					value = var:prod_in_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_update_instances_tt
					var:prod_update_instances_tt > 0
				}
				set_variable = {
					name = math_root_exp
					value = 1
				}
				change_variable = {
					name = math_root_exp
					divide = var:prod_update_instances_tt
				}
				set_variable = {
					name = math_pow_base
					value = var:prod_update_instances_t
				}
				set_variable = {
					name = math_pow_exp
					value = var:math_root_exp
				}
				if = {
					limit = {
						has_variable = math_pow_base
						var:math_pow_base != 0
					}
					set_variable = {
						name = prod_update_instances_t
						value = 1
					}
					while = {
						limit = {
							var:math_pow_exp >= 1
						}
						change_variable = {
							name = math_pow_exp
							subtract = 1
						}
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_base
						}
					}
					while = {
						limit = {
							var:math_pow_exp < 0
						}
						change_variable = {
							name = math_pow_exp
							add = 1
						}
						change_variable = {
							name = prod_update_instances_t
							divide = var:math_pow_base
						}
					}
					if = {
						limit = {
							var:math_pow_exp != 0
						}
						set_variable = {
							name = math_ln_inp
							value = var:math_pow_base
						}
						set_variable = {
							name = math_pow_ln
							value = 0
						}
						set_variable = {
							name = math_ln_k
							value = 0
						}
						set_variable = {
							name = math_ln_div
							value = 10000
						}
						while = {
							limit = {
								var:math_ln_inp >= 2
							}
							change_variable = {
								name = math_ln_inp
								divide = 2
							}
							change_variable = {
								name = math_pow_ln
								add = 6931.472
							}
						}
						while = {
							limit = {
								var:math_ln_inp < 1
							}
							change_variable = {
								name = math_ln_inp
								multiply = 2
							}
							change_variable = {
								name = math_pow_ln
								subtract = 6931.472
							}
						}
						change_variable = {
							name = math_ln_inp
							multiply = 10000
						}
						while = {
							limit = {
								var:math_ln_k < 10
							}
							change_variable = {
								name = math_ln_k
								add = 1
							}
							change_variable = {
								name = math_ln_div
								divide = 2
							}
							set_variable = {
								name = math_ln_t
								value = 10000
							}
							change_variable = {
								name = math_ln_t
								add = var:math_ln_div
							}
							if = {
								limit = {
									var:math_ln_inp = {
										compare_value >= prev.var:math_ln_t
									}
								}
								change_variable = {
									name = math_ln_inp
									divide = var:math_ln_t
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								set_variable = {
									name = math_lt_ind
									value = var:math_ln_k
								}
								if = {
									limit = {
										var:math_lt_ind >= 6
									}
									if = {
										limit = {
											var:math_lt_ind >= 8
										}
										if = {
											limit = {
												var:math_lt_ind >= 9
											}
											if = {
												limit = {
													var:math_lt_ind >= 10
												}
												set_variable = {
													name = math_ln_lt
													value = 9.761
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 19.512
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 38.986
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 7
											}
											set_variable = {
												name = math_ln_lt
												value = 77.821
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 155.042
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 3
										}
										if = {
											limit = {
												var:math_lt_ind >= 4
											}
											if = {
												limit = {
													var:math_lt_ind >= 5
												}
												set_variable = {
													name = math_ln_lt
													value = 307.717
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 606.246
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 1177.83
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 2
											}
											set_variable = {
												name = math_ln_lt
												value = 2231.436
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 4054.651
											}
										}
									}
								}
								remove_variable = math_lt_ind
								change_variable = {
									name = math_pow_ln
									add = var:math_ln_lt
								}
							}
						}
						change_variable = {
							name = math_pow_ln
							divide = 10000
						}
						remove_variable = math_ln_k
						remove_variable = math_ln_div
						remove_variable = math_ln_t
						remove_variable = math_ln_lt
						remove_variable = math_ln_inp
						change_variable = {
							name = math_pow_exp
							multiply = var:math_pow_ln
						}
						set_variable = {
							name = math_e_exp
							value = var:math_pow_exp
						}
						set_variable = {
							name = math_pow_e
							value = 1
						}
						while = {
							limit = {
								var:math_e_exp >= 1
							}
							change_variable = {
								name = math_e_exp
								subtract = 1
							}
							change_variable = {
								name = math_pow_e
								multiply = 2.718
							}
						}
						while = {
							limit = {
								var:math_e_exp < 0
							}
							change_variable = {
								name = math_e_exp
								add = 1
							}
							change_variable = {
								name = math_pow_e
								divide = 2.718
							}
						}
						set_variable = {
							name = math_e_sm
							value = 1
						}
						if = {
							limit = {
								var:math_e_exp != 0
							}
							set_variable = {
								name = math_e_sq
								value = var:math_e_exp
							}
							change_variable = {
								name = math_e_sq
								multiply = var:math_e_exp
							}
							set_variable = {
								name = math_e_fct
								value = 2
							}
							set_variable = {
								name = math_e_fctl
								value = 2
							}
							set_variable = {
								name = math_e_a1
								value = var:math_e_sq
							}
							set_variable = {
								name = math_e_a2
								value = var:math_e_exp
							}
							set_variable = {
								name = math_e_a3
								value = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
							set_variable = {
								name = math_e_prec
								value = 3
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							while = {
								limit = {
									var:math_e_prec >= 1
								}
								change_variable = {
									name = math_e_prec
									subtract = 1
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_a1
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a2
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a3
									add = 2
								}
								set_variable = {
									name = math_e_tmp
									value = var:math_e_a2
								}
								change_variable = {
									name = math_e_tmp
									multiply = var:math_e_a3
								}
								change_variable = {
									name = math_e_tmp
									add = var:math_e_a1
								}
								change_variable = {
									name = math_e_tmp
									divide = var:math_e_fct
								}
								change_variable = {
									name = math_e_sm
									add = var:math_e_tmp
								}
							}
						}
						change_variable = {
							name = math_pow_e
							multiply = var:math_e_sm
						}
						remove_variable = math_e_sm
						remove_variable = math_e_tmp
						remove_variable = math_e_a1
						remove_variable = math_e_a2
						remove_variable = math_e_a3
						remove_variable = math_e_fctl
						remove_variable = math_e_fct
						remove_variable = math_e_prec
						remove_variable = math_e_sq
						remove_variable = math_e_exp
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_e
						}
						remove_variable = math_pow_ln
						remove_variable = math_pow_e
					}
				}
				else = {
					set_variable = {
						name = prod_update_instances_t
						value = 0
					}
				}
				remove_variable = math_pow_base
				remove_variable = math_pow_exp
				remove_variable = math_root_exp
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_old_food
					value = var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_old_food
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_old_fiber
					value = var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_old_fiber
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_old_fuel
					value = var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_old_fuel
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_old_pottery
					value = var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_old_pottery
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_old_textile
					value = var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_old_textile
					multiply = var:prod_update_instances_t
				}
			}
			remove_variable = prod_update_instances_t
			remove_variable = prod_update_instances_tt
		}
		set_global_variable = {
			name = prod_update_instances_labor
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_farm
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_pasture
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_forest
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_workshop
			value = 0
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_labor
				value = var:prod_template.var:prod_labor
			}
			set_variable = {
				name = prod_land
				value = var:prod_template.var:prod_land
			}
			change_variable = {
				name = prod_labor
				multiply = var:prod_size
			}
			change_variable = {
				name = prod_land
				multiply = var:prod_size
			}
			change_global_variable = {
				name = prod_update_instances_labor
				add = var:prod_labor
			}
			var:prod_template = {
				if = {
					limit = {
						has_character_flag = prod_land_farm
					}
					change_global_variable = {
						name = prod_update_instances_farm
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_pasture
					}
					change_global_variable = {
						name = prod_update_instances_pasture
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_forest
					}
					change_global_variable = {
						name = prod_update_instances_forest
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_workshop
					}
					change_global_variable = {
						name = prod_update_instances_workshop
						add = prev.var:prod_land
					}
				}
			}
		}
		if = {
			limit = {
				var:pop_total = {
					compare_value >= global_var:prod_update_instances_labor
				}
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
			}
		}
		else_if = {
			limit = {
				var:pop_total = 0
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_labor
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
				change_variable = {
					name = prod_labor_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:farm_total = {
					compare_value >= global_var:prod_update_instances_farm
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:farm_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:farm_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_farm
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:pasture_total = {
					compare_value >= global_var:prod_update_instances_pasture
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:pasture_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pasture_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_pasture
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:forest_total = {
					compare_value >= global_var:prod_update_instances_forest
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:forest_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:forest_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_forest
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:workshop_total = {
					compare_value >= global_var:prod_update_instances_workshop
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:workshop_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:workshop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_workshop
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_size_actual
				value = 1
			}
			if = {
				limit = {
					var:prod_labor = {
						compare_value != prev.var:prod_labor_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_labor_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_labor
				}
			}
			if = {
				limit = {
					var:prod_land = {
						compare_value != prev.var:prod_land_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_land_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_land
				}
			}
			set_variable = {
				name = math_pow_base
				value = var:prod_size_actual
			}
			set_variable = {
				name = math_pow_exp
				value = 0.5
			}
			if = {
				limit = {
					has_variable = math_pow_base
					var:math_pow_base != 0
				}
				set_variable = {
					name = prod_size_actual
					value = 1
				}
				while = {
					limit = {
						var:math_pow_exp >= 1
					}
					change_variable = {
						name = math_pow_exp
						subtract = 1
					}
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_base
					}
				}
				while = {
					limit = {
						var:math_pow_exp < 0
					}
					change_variable = {
						name = math_pow_exp
						add = 1
					}
					change_variable = {
						name = prod_size_actual
						divide = var:math_pow_base
					}
				}
				if = {
					limit = {
						var:math_pow_exp != 0
					}
					set_variable = {
						name = math_ln_inp
						value = var:math_pow_base
					}
					set_variable = {
						name = math_pow_ln
						value = 0
					}
					set_variable = {
						name = math_ln_k
						value = 0
					}
					set_variable = {
						name = math_ln_div
						value = 10000
					}
					while = {
						limit = {
							var:math_ln_inp >= 2
						}
						change_variable = {
							name = math_ln_inp
							divide = 2
						}
						change_variable = {
							name = math_pow_ln
							add = 6931.472
						}
					}
					while = {
						limit = {
							var:math_ln_inp < 1
						}
						change_variable = {
							name = math_ln_inp
							multiply = 2
						}
						change_variable = {
							name = math_pow_ln
							subtract = 6931.472
						}
					}
					change_variable = {
						name = math_ln_inp
						multiply = 10000
					}
					while = {
						limit = {
							var:math_ln_k < 10
						}
						change_variable = {
							name = math_ln_k
							add = 1
						}
						change_variable = {
							name = math_ln_div
							divide = 2
						}
						set_variable = {
							name = math_ln_t
							value = 10000
						}
						change_variable = {
							name = math_ln_t
							add = var:math_ln_div
						}
						if = {
							limit = {
								var:math_ln_inp = {
									compare_value >= prev.var:math_ln_t
								}
							}
							change_variable = {
								name = math_ln_inp
								divide = var:math_ln_t
							}
							change_variable = {
								name = math_ln_inp
								multiply = 10000
							}
							set_variable = {
								name = math_lt_ind
								value = var:math_ln_k
							}
							if = {
								limit = {
									var:math_lt_ind >= 6
								}
								if = {
									limit = {
										var:math_lt_ind >= 8
									}
									if = {
										limit = {
											var:math_lt_ind >= 9
										}
										if = {
											limit = {
												var:math_lt_ind >= 10
											}
											set_variable = {
												name = math_ln_lt
												value = 9.761
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 19.512
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 38.986
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 7
										}
										set_variable = {
											name = math_ln_lt
											value = 77.821
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 155.042
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										var:math_lt_ind >= 3
									}
									if = {
										limit = {
											var:math_lt_ind >= 4
										}
										if = {
											limit = {
												var:math_lt_ind >= 5
											}
											set_variable = {
												name = math_ln_lt
												value = 307.717
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 606.246
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 1177.83
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 2
										}
										set_variable = {
											name = math_ln_lt
											value = 2231.436
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 4054.651
										}
									}
								}
							}
							remove_variable = math_lt_ind
							change_variable = {
								name = math_pow_ln
								add = var:math_ln_lt
							}
						}
					}
					change_variable = {
						name = math_pow_ln
						divide = 10000
					}
					remove_variable = math_ln_k
					remove_variable = math_ln_div
					remove_variable = math_ln_t
					remove_variable = math_ln_lt
					remove_variable = math_ln_inp
					change_variable = {
						name = math_pow_exp
						multiply = var:math_pow_ln
					}
					set_variable = {
						name = math_e_exp
						value = var:math_pow_exp
					}
					set_variable = {
						name = math_pow_e
						value = 1
					}
					while = {
						limit = {
							var:math_e_exp >= 1
						}
						change_variable = {
							name = math_e_exp
							subtract = 1
						}
						change_variable = {
							name = math_pow_e
							multiply = 2.718
						}
					}
					while = {
						limit = {
							var:math_e_exp < 0
						}
						change_variable = {
							name = math_e_exp
							add = 1
						}
						change_variable = {
							name = math_pow_e
							divide = 2.718
						}
					}
					set_variable = {
						name = math_e_sm
						value = 1
					}
					if = {
						limit = {
							var:math_e_exp != 0
						}
						set_variable = {
							name = math_e_sq
							value = var:math_e_exp
						}
						change_variable = {
							name = math_e_sq
							multiply = var:math_e_exp
						}
						set_variable = {
							name = math_e_fct
							value = 2
						}
						set_variable = {
							name = math_e_fctl
							value = 2
						}
						set_variable = {
							name = math_e_a1
							value = var:math_e_sq
						}
						set_variable = {
							name = math_e_a2
							value = var:math_e_exp
						}
						set_variable = {
							name = math_e_a3
							value = 2
						}
						set_variable = {
							name = math_e_tmp
							value = var:math_e_a2
						}
						change_variable = {
							name = math_e_tmp
							multiply = var:math_e_a3
						}
						change_variable = {
							name = math_e_tmp
							add = var:math_e_a1
						}
						change_variable = {
							name = math_e_tmp
							divide = var:math_e_fct
						}
						change_variable = {
							name = math_e_sm
							add = var:math_e_tmp
						}
						set_variable = {
							name = math_e_prec
							value = 3
						}
						change_variable = {
							name = math_e_prec
							subtract = 1
						}
						while = {
							limit = {
								var:math_e_prec >= 1
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_a1
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a2
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a3
								add = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
						}
					}
					change_variable = {
						name = math_pow_e
						multiply = var:math_e_sm
					}
					remove_variable = math_e_sm
					remove_variable = math_e_tmp
					remove_variable = math_e_a1
					remove_variable = math_e_a2
					remove_variable = math_e_a3
					remove_variable = math_e_fctl
					remove_variable = math_e_fct
					remove_variable = math_e_prec
					remove_variable = math_e_sq
					remove_variable = math_e_exp
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_e
					}
					remove_variable = math_pow_ln
					remove_variable = math_pow_e
				}
			}
			else = {
				set_variable = {
					name = prod_size_actual
					value = 0
				}
			}
			remove_variable = math_pow_base
			remove_variable = math_pow_exp
			change_variable = {
				name = prod_size_actual
				multiply = var:prod_size
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				set_variable = {
					name = prod_dmnd_food
					value = var:prod_template.var:prod_dmnd_food
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_location.var:modi_prod_dmnd_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				set_variable = {
					name = prod_dmnd_fuel
					value = var:prod_template.var:prod_dmnd_fuel
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_location.var:modi_prod_dmnd_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				set_variable = {
					name = prod_dmnd_fiber
					value = var:prod_template.var:prod_dmnd_fiber
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_location.var:modi_prod_dmnd_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				set_variable = {
					name = prod_dmnd_pottery
					value = var:prod_template.var:prod_dmnd_pottery
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_location.var:modi_prod_dmnd_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				set_variable = {
					name = prod_dmnd_textile
					value = var:prod_template.var:prod_dmnd_textile
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_location.var:modi_prod_dmnd_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_food
					value = var:prod_template.var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_location.var:modi_prod_sply_food
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_fuel
					value = var:prod_template.var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_location.var:modi_prod_sply_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_fiber
					value = var:prod_template.var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_location.var:modi_prod_sply_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_pottery
					value = var:prod_template.var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_location.var:modi_prod_sply_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_textile
					value = var:prod_template.var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_location.var:modi_prod_sply_textile
				}
			}
		}
	}
}
global_var:foo = {
	set_variable = {
		name = prod_in_fiber
		value = 20
	}
}
province:2543 = {
	if = {
		limit = {
			has_variable_list = prod_instances
			variable_list_size = {
				name = prod_instances
				value >= 1
			}
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_update_instances_t
				value = 1
			}
			set_variable = {
				name = prod_update_instances_tt
				value = 0
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				if = {
					limit = {
						var:prod_dmnd_food = {
							compare_value != prev.var:prod_in_food
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_food
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_food
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_food
					value = var:prod_dmnd_food
				}
				set_variable = {
					name = prod_in_old_food
					value = var:prod_in_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				if = {
					limit = {
						var:prod_dmnd_fiber = {
							compare_value != prev.var:prod_in_fiber
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fiber
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fiber
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fiber
					value = var:prod_dmnd_fiber
				}
				set_variable = {
					name = prod_in_old_fiber
					value = var:prod_in_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				if = {
					limit = {
						var:prod_dmnd_fuel = {
							compare_value != prev.var:prod_in_fuel
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fuel
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fuel
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fuel
					value = var:prod_dmnd_fuel
				}
				set_variable = {
					name = prod_in_old_fuel
					value = var:prod_in_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				if = {
					limit = {
						var:prod_dmnd_pottery = {
							compare_value != prev.var:prod_in_pottery
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_pottery
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_pottery
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_pottery
					value = var:prod_dmnd_pottery
				}
				set_variable = {
					name = prod_in_old_pottery
					value = var:prod_in_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				if = {
					limit = {
						var:prod_dmnd_textile = {
							compare_value != prev.var:prod_in_textile
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_textile
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_textile
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_textile
					value = var:prod_dmnd_textile
				}
				set_variable = {
					name = prod_in_old_textile
					value = var:prod_in_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_update_instances_tt
					var:prod_update_instances_tt > 0
				}
				set_variable = {
					name = math_root_exp
					value = 1
				}
				change_variable = {
					name = math_root_exp
					divide = var:prod_update_instances_tt
				}
				set_variable = {
					name = math_pow_base
					value = var:prod_update_instances_t
				}
				set_variable = {
					name = math_pow_exp
					value = var:math_root_exp
				}
				if = {
					limit = {
						has_variable = math_pow_base
						var:math_pow_base != 0
					}
					set_variable = {
						name = prod_update_instances_t
						value = 1
					}
					while = {
						limit = {
							var:math_pow_exp >= 1
						}
						change_variable = {
							name = math_pow_exp
							subtract = 1
						}
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_base
						}
					}
					while = {
						limit = {
							var:math_pow_exp < 0
						}
						change_variable = {
							name = math_pow_exp
							add = 1
						}
						change_variable = {
							name = prod_update_instances_t
							divide = var:math_pow_base
						}
					}
					if = {
						limit = {
							var:math_pow_exp != 0
						}
						set_variable = {
							name = math_ln_inp
							value = var:math_pow_base
						}
						set_variable = {
							name = math_pow_ln
							value = 0
						}
						set_variable = {
							name = math_ln_k
							value = 0
						}
						set_variable = {
							name = math_ln_div
							value = 10000
						}
						while = {
							limit = {
								var:math_ln_inp >= 2
							}
							change_variable = {
								name = math_ln_inp
								divide = 2
							}
							change_variable = {
								name = math_pow_ln
								add = 6931.472
							}
						}
						while = {
							limit = {
								var:math_ln_inp < 1
							}
							change_variable = {
								name = math_ln_inp
								multiply = 2
							}
							change_variable = {
								name = math_pow_ln
								subtract = 6931.472
							}
						}
						change_variable = {
							name = math_ln_inp
							multiply = 10000
						}
						while = {
							limit = {
								var:math_ln_k < 10
							}
							change_variable = {
								name = math_ln_k
								add = 1
							}
							change_variable = {
								name = math_ln_div
								divide = 2
							}
							set_variable = {
								name = math_ln_t
								value = 10000
							}
							change_variable = {
								name = math_ln_t
								add = var:math_ln_div
							}
							if = {
								limit = {
									var:math_ln_inp = {
										compare_value >= prev.var:math_ln_t
									}
								}
								change_variable = {
									name = math_ln_inp
									divide = var:math_ln_t
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								set_variable = {
									name = math_lt_ind
									value = var:math_ln_k
								}
								if = {
									limit = {
										var:math_lt_ind >= 6
									}
									if = {
										limit = {
											var:math_lt_ind >= 8
										}
										if = {
											limit = {
												var:math_lt_ind >= 9
											}
											if = {
												limit = {
													var:math_lt_ind >= 10
												}
												set_variable = {
													name = math_ln_lt
													value = 9.761
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 19.512
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 38.986
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 7
											}
											set_variable = {
												name = math_ln_lt
												value = 77.821
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 155.042
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 3
										}
										if = {
											limit = {
												var:math_lt_ind >= 4
											}
											if = {
												limit = {
													var:math_lt_ind >= 5
												}
												set_variable = {
													name = math_ln_lt
													value = 307.717
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 606.246
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 1177.83
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 2
											}
											set_variable = {
												name = math_ln_lt
												value = 2231.436
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 4054.651
											}
										}
									}
								}
								remove_variable = math_lt_ind
								change_variable = {
									name = math_pow_ln
									add = var:math_ln_lt
								}
							}
						}
						change_variable = {
							name = math_pow_ln
							divide = 10000
						}
						remove_variable = math_ln_k
						remove_variable = math_ln_div
						remove_variable = math_ln_t
						remove_variable = math_ln_lt
						remove_variable = math_ln_inp
						change_variable = {
							name = math_pow_exp
							multiply = var:math_pow_ln
						}
						set_variable = {
							name = math_e_exp
							value = var:math_pow_exp
						}
						set_variable = {
							name = math_pow_e
							value = 1
						}
						while = {
							limit = {
								var:math_e_exp >= 1
							}
							change_variable = {
								name = math_e_exp
								subtract = 1
							}
							change_variable = {
								name = math_pow_e
								multiply = 2.718
							}
						}
						while = {
							limit = {
								var:math_e_exp < 0
							}
							change_variable = {
								name = math_e_exp
								add = 1
							}
							change_variable = {
								name = math_pow_e
								divide = 2.718
							}
						}
						set_variable = {
							name = math_e_sm
							value = 1
						}
						if = {
							limit = {
								var:math_e_exp != 0
							}
							set_variable = {
								name = math_e_sq
								value = var:math_e_exp
							}
							change_variable = {
								name = math_e_sq
								multiply = var:math_e_exp
							}
							set_variable = {
								name = math_e_fct
								value = 2
							}
							set_variable = {
								name = math_e_fctl
								value = 2
							}
							set_variable = {
								name = math_e_a1
								value = var:math_e_sq
							}
							set_variable = {
								name = math_e_a2
								value = var:math_e_exp
							}
							set_variable = {
								name = math_e_a3
								value = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
							set_variable = {
								name = math_e_prec
								value = 3
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							while = {
								limit = {
									var:math_e_prec >= 1
								}
								change_variable = {
									name = math_e_prec
									subtract = 1
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_a1
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a2
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a3
									add = 2
								}
								set_variable = {
									name = math_e_tmp
									value = var:math_e_a2
								}
								change_variable = {
									name = math_e_tmp
									multiply = var:math_e_a3
								}
								change_variable = {
									name = math_e_tmp
									add = var:math_e_a1
								}
								change_variable = {
									name = math_e_tmp
									divide = var:math_e_fct
								}
								change_variable = {
									name = math_e_sm
									add = var:math_e_tmp
								}
							}
						}
						change_variable = {
							name = math_pow_e
							multiply = var:math_e_sm
						}
						remove_variable = math_e_sm
						remove_variable = math_e_tmp
						remove_variable = math_e_a1
						remove_variable = math_e_a2
						remove_variable = math_e_a3
						remove_variable = math_e_fctl
						remove_variable = math_e_fct
						remove_variable = math_e_prec
						remove_variable = math_e_sq
						remove_variable = math_e_exp
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_e
						}
						remove_variable = math_pow_ln
						remove_variable = math_pow_e
					}
				}
				else = {
					set_variable = {
						name = prod_update_instances_t
						value = 0
					}
				}
				remove_variable = math_pow_base
				remove_variable = math_pow_exp
				remove_variable = math_root_exp
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_old_food
					value = var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_old_food
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_old_fiber
					value = var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_old_fiber
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_old_fuel
					value = var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_old_fuel
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_old_pottery
					value = var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_old_pottery
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_old_textile
					value = var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_old_textile
					multiply = var:prod_update_instances_t
				}
			}
			remove_variable = prod_update_instances_t
			remove_variable = prod_update_instances_tt
		}
		set_global_variable = {
			name = prod_update_instances_labor
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_farm
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_pasture
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_forest
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_workshop
			value = 0
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_labor
				value = var:prod_template.var:prod_labor
			}
			set_variable = {
				name = prod_land
				value = var:prod_template.var:prod_land
			}
			change_variable = {
				name = prod_labor
				multiply = var:prod_size
			}
			change_variable = {
				name = prod_land
				multiply = var:prod_size
			}
			change_global_variable = {
				name = prod_update_instances_labor
				add = var:prod_labor
			}
			var:prod_template = {
				if = {
					limit = {
						has_character_flag = prod_land_farm
					}
					change_global_variable = {
						name = prod_update_instances_farm
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_pasture
					}
					change_global_variable = {
						name = prod_update_instances_pasture
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_forest
					}
					change_global_variable = {
						name = prod_update_instances_forest
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_workshop
					}
					change_global_variable = {
						name = prod_update_instances_workshop
						add = prev.var:prod_land
					}
				}
			}
		}
		if = {
			limit = {
				var:pop_total = {
					compare_value >= global_var:prod_update_instances_labor
				}
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
			}
		}
		else_if = {
			limit = {
				var:pop_total = 0
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_labor
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
				change_variable = {
					name = prod_labor_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:farm_total = {
					compare_value >= global_var:prod_update_instances_farm
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:farm_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:farm_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_farm
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:pasture_total = {
					compare_value >= global_var:prod_update_instances_pasture
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:pasture_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pasture_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_pasture
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:forest_total = {
					compare_value >= global_var:prod_update_instances_forest
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:forest_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:forest_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_forest
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:workshop_total = {
					compare_value >= global_var:prod_update_instances_workshop
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:workshop_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:workshop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_workshop
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_size_actual
				value = 1
			}
			if = {
				limit = {
					var:prod_labor = {
						compare_value != prev.var:prod_labor_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_labor_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_labor
				}
			}
			if = {
				limit = {
					var:prod_land = {
						compare_value != prev.var:prod_land_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_land_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_land
				}
			}
			set_variable = {
				name = math_pow_base
				value = var:prod_size_actual
			}
			set_variable = {
				name = math_pow_exp
				value = 0.5
			}
			if = {
				limit = {
					has_variable = math_pow_base
					var:math_pow_base != 0
				}
				set_variable = {
					name = prod_size_actual
					value = 1
				}
				while = {
					limit = {
						var:math_pow_exp >= 1
					}
					change_variable = {
						name = math_pow_exp
						subtract = 1
					}
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_base
					}
				}
				while = {
					limit = {
						var:math_pow_exp < 0
					}
					change_variable = {
						name = math_pow_exp
						add = 1
					}
					change_variable = {
						name = prod_size_actual
						divide = var:math_pow_base
					}
				}
				if = {
					limit = {
						var:math_pow_exp != 0
					}
					set_variable = {
						name = math_ln_inp
						value = var:math_pow_base
					}
					set_variable = {
						name = math_pow_ln
						value = 0
					}
					set_variable = {
						name = math_ln_k
						value = 0
					}
					set_variable = {
						name = math_ln_div
						value = 10000
					}
					while = {
						limit = {
							var:math_ln_inp >= 2
						}
						change_variable = {
							name = math_ln_inp
							divide = 2
						}
						change_variable = {
							name = math_pow_ln
							add = 6931.472
						}
					}
					while = {
						limit = {
							var:math_ln_inp < 1
						}
						change_variable = {
							name = math_ln_inp
							multiply = 2
						}
						change_variable = {
							name = math_pow_ln
							subtract = 6931.472
						}
					}
					change_variable = {
						name = math_ln_inp
						multiply = 10000
					}
					while = {
						limit = {
							var:math_ln_k < 10
						}
						change_variable = {
							name = math_ln_k
							add = 1
						}
						change_variable = {
							name = math_ln_div
							divide = 2
						}
						set_variable = {
							name = math_ln_t
							value = 10000
						}
						change_variable = {
							name = math_ln_t
							add = var:math_ln_div
						}
						if = {
							limit = {
								var:math_ln_inp = {
									compare_value >= prev.var:math_ln_t
								}
							}
							change_variable = {
								name = math_ln_inp
								divide = var:math_ln_t
							}
							change_variable = {
								name = math_ln_inp
								multiply = 10000
							}
							set_variable = {
								name = math_lt_ind
								value = var:math_ln_k
							}
							if = {
								limit = {
									var:math_lt_ind >= 6
								}
								if = {
									limit = {
										var:math_lt_ind >= 8
									}
									if = {
										limit = {
											var:math_lt_ind >= 9
										}
										if = {
											limit = {
												var:math_lt_ind >= 10
											}
											set_variable = {
												name = math_ln_lt
												value = 9.761
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 19.512
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 38.986
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 7
										}
										set_variable = {
											name = math_ln_lt
											value = 77.821
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 155.042
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										var:math_lt_ind >= 3
									}
									if = {
										limit = {
											var:math_lt_ind >= 4
										}
										if = {
											limit = {
												var:math_lt_ind >= 5
											}
											set_variable = {
												name = math_ln_lt
												value = 307.717
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 606.246
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 1177.83
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 2
										}
										set_variable = {
											name = math_ln_lt
											value = 2231.436
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 4054.651
										}
									}
								}
							}
							remove_variable = math_lt_ind
							change_variable = {
								name = math_pow_ln
								add = var:math_ln_lt
							}
						}
					}
					change_variable = {
						name = math_pow_ln
						divide = 10000
					}
					remove_variable = math_ln_k
					remove_variable = math_ln_div
					remove_variable = math_ln_t
					remove_variable = math_ln_lt
					remove_variable = math_ln_inp
					change_variable = {
						name = math_pow_exp
						multiply = var:math_pow_ln
					}
					set_variable = {
						name = math_e_exp
						value = var:math_pow_exp
					}
					set_variable = {
						name = math_pow_e
						value = 1
					}
					while = {
						limit = {
							var:math_e_exp >= 1
						}
						change_variable = {
							name = math_e_exp
							subtract = 1
						}
						change_variable = {
							name = math_pow_e
							multiply = 2.718
						}
					}
					while = {
						limit = {
							var:math_e_exp < 0
						}
						change_variable = {
							name = math_e_exp
							add = 1
						}
						change_variable = {
							name = math_pow_e
							divide = 2.718
						}
					}
					set_variable = {
						name = math_e_sm
						value = 1
					}
					if = {
						limit = {
							var:math_e_exp != 0
						}
						set_variable = {
							name = math_e_sq
							value = var:math_e_exp
						}
						change_variable = {
							name = math_e_sq
							multiply = var:math_e_exp
						}
						set_variable = {
							name = math_e_fct
							value = 2
						}
						set_variable = {
							name = math_e_fctl
							value = 2
						}
						set_variable = {
							name = math_e_a1
							value = var:math_e_sq
						}
						set_variable = {
							name = math_e_a2
							value = var:math_e_exp
						}
						set_variable = {
							name = math_e_a3
							value = 2
						}
						set_variable = {
							name = math_e_tmp
							value = var:math_e_a2
						}
						change_variable = {
							name = math_e_tmp
							multiply = var:math_e_a3
						}
						change_variable = {
							name = math_e_tmp
							add = var:math_e_a1
						}
						change_variable = {
							name = math_e_tmp
							divide = var:math_e_fct
						}
						change_variable = {
							name = math_e_sm
							add = var:math_e_tmp
						}
						set_variable = {
							name = math_e_prec
							value = 3
						}
						change_variable = {
							name = math_e_prec
							subtract = 1
						}
						while = {
							limit = {
								var:math_e_prec >= 1
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_a1
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a2
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a3
								add = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
						}
					}
					change_variable = {
						name = math_pow_e
						multiply = var:math_e_sm
					}
					remove_variable = math_e_sm
					remove_variable = math_e_tmp
					remove_variable = math_e_a1
					remove_variable = math_e_a2
					remove_variable = math_e_a3
					remove_variable = math_e_fctl
					remove_variable = math_e_fct
					remove_variable = math_e_prec
					remove_variable = math_e_sq
					remove_variable = math_e_exp
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_e
					}
					remove_variable = math_pow_ln
					remove_variable = math_pow_e
				}
			}
			else = {
				set_variable = {
					name = prod_size_actual
					value = 0
				}
			}
			remove_variable = math_pow_base
			remove_variable = math_pow_exp
			change_variable = {
				name = prod_size_actual
				multiply = var:prod_size
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				set_variable = {
					name = prod_dmnd_food
					value = var:prod_template.var:prod_dmnd_food
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_location.var:modi_prod_dmnd_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				set_variable = {
					name = prod_dmnd_fuel
					value = var:prod_template.var:prod_dmnd_fuel
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_location.var:modi_prod_dmnd_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				set_variable = {
					name = prod_dmnd_fiber
					value = var:prod_template.var:prod_dmnd_fiber
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_location.var:modi_prod_dmnd_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				set_variable = {
					name = prod_dmnd_pottery
					value = var:prod_template.var:prod_dmnd_pottery
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_location.var:modi_prod_dmnd_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				set_variable = {
					name = prod_dmnd_textile
					value = var:prod_template.var:prod_dmnd_textile
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_location.var:modi_prod_dmnd_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_food
					value = var:prod_template.var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_location.var:modi_prod_sply_food
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_fuel
					value = var:prod_template.var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_location.var:modi_prod_sply_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_fiber
					value = var:prod_template.var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_location.var:modi_prod_sply_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_pottery
					value = var:prod_template.var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_location.var:modi_prod_sply_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_textile
					value = var:prod_template.var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_location.var:modi_prod_sply_textile
				}
			}
		}
	}
}
province:2563 = {
	if = {
		limit = {
			has_variable_list = prod_instances
			variable_list_size = {
				name = prod_instances
				value >= 1
			}
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_update_instances_t
				value = 1
			}
			set_variable = {
				name = prod_update_instances_tt
				value = 0
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				if = {
					limit = {
						var:prod_dmnd_food = {
							compare_value != prev.var:prod_in_food
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_food
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_food
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_food
					value = var:prod_dmnd_food
				}
				set_variable = {
					name = prod_in_old_food
					value = var:prod_in_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				if = {
					limit = {
						var:prod_dmnd_fiber = {
							compare_value != prev.var:prod_in_fiber
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fiber
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fiber
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fiber
					value = var:prod_dmnd_fiber
				}
				set_variable = {
					name = prod_in_old_fiber
					value = var:prod_in_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				if = {
					limit = {
						var:prod_dmnd_fuel = {
							compare_value != prev.var:prod_in_fuel
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fuel
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fuel
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fuel
					value = var:prod_dmnd_fuel
				}
				set_variable = {
					name = prod_in_old_fuel
					value = var:prod_in_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				if = {
					limit = {
						var:prod_dmnd_pottery = {
							compare_value != prev.var:prod_in_pottery
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_pottery
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_pottery
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_pottery
					value = var:prod_dmnd_pottery
				}
				set_variable = {
					name = prod_in_old_pottery
					value = var:prod_in_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				if = {
					limit = {
						var:prod_dmnd_textile = {
							compare_value != prev.var:prod_in_textile
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_textile
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_textile
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_textile
					value = var:prod_dmnd_textile
				}
				set_variable = {
					name = prod_in_old_textile
					value = var:prod_in_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_update_instances_tt
					var:prod_update_instances_tt > 0
				}
				set_variable = {
					name = math_root_exp
					value = 1
				}
				change_variable = {
					name = math_root_exp
					divide = var:prod_update_instances_tt
				}
				set_variable = {
					name = math_pow_base
					value = var:prod_update_instances_t
				}
				set_variable = {
					name = math_pow_exp
					value = var:math_root_exp
				}
				if = {
					limit = {
						has_variable = math_pow_base
						var:math_pow_base != 0
					}
					set_variable = {
						name = prod_update_instances_t
						value = 1
					}
					while = {
						limit = {
							var:math_pow_exp >= 1
						}
						change_variable = {
							name = math_pow_exp
							subtract = 1
						}
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_base
						}
					}
					while = {
						limit = {
							var:math_pow_exp < 0
						}
						change_variable = {
							name = math_pow_exp
							add = 1
						}
						change_variable = {
							name = prod_update_instances_t
							divide = var:math_pow_base
						}
					}
					if = {
						limit = {
							var:math_pow_exp != 0
						}
						set_variable = {
							name = math_ln_inp
							value = var:math_pow_base
						}
						set_variable = {
							name = math_pow_ln
							value = 0
						}
						set_variable = {
							name = math_ln_k
							value = 0
						}
						set_variable = {
							name = math_ln_div
							value = 10000
						}
						while = {
							limit = {
								var:math_ln_inp >= 2
							}
							change_variable = {
								name = math_ln_inp
								divide = 2
							}
							change_variable = {
								name = math_pow_ln
								add = 6931.472
							}
						}
						while = {
							limit = {
								var:math_ln_inp < 1
							}
							change_variable = {
								name = math_ln_inp
								multiply = 2
							}
							change_variable = {
								name = math_pow_ln
								subtract = 6931.472
							}
						}
						change_variable = {
							name = math_ln_inp
							multiply = 10000
						}
						while = {
							limit = {
								var:math_ln_k < 10
							}
							change_variable = {
								name = math_ln_k
								add = 1
							}
							change_variable = {
								name = math_ln_div
								divide = 2
							}
							set_variable = {
								name = math_ln_t
								value = 10000
							}
							change_variable = {
								name = math_ln_t
								add = var:math_ln_div
							}
							if = {
								limit = {
									var:math_ln_inp = {
										compare_value >= prev.var:math_ln_t
									}
								}
								change_variable = {
									name = math_ln_inp
									divide = var:math_ln_t
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								set_variable = {
									name = math_lt_ind
									value = var:math_ln_k
								}
								if = {
									limit = {
										var:math_lt_ind >= 6
									}
									if = {
										limit = {
											var:math_lt_ind >= 8
										}
										if = {
											limit = {
												var:math_lt_ind >= 9
											}
											if = {
												limit = {
													var:math_lt_ind >= 10
												}
												set_variable = {
													name = math_ln_lt
													value = 9.761
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 19.512
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 38.986
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 7
											}
											set_variable = {
												name = math_ln_lt
												value = 77.821
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 155.042
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 3
										}
										if = {
											limit = {
												var:math_lt_ind >= 4
											}
											if = {
												limit = {
													var:math_lt_ind >= 5
												}
												set_variable = {
													name = math_ln_lt
													value = 307.717
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 606.246
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 1177.83
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 2
											}
											set_variable = {
												name = math_ln_lt
												value = 2231.436
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 4054.651
											}
										}
									}
								}
								remove_variable = math_lt_ind
								change_variable = {
									name = math_pow_ln
									add = var:math_ln_lt
								}
							}
						}
						change_variable = {
							name = math_pow_ln
							divide = 10000
						}
						remove_variable = math_ln_k
						remove_variable = math_ln_div
						remove_variable = math_ln_t
						remove_variable = math_ln_lt
						remove_variable = math_ln_inp
						change_variable = {
							name = math_pow_exp
							multiply = var:math_pow_ln
						}
						set_variable = {
							name = math_e_exp
							value = var:math_pow_exp
						}
						set_variable = {
							name = math_pow_e
							value = 1
						}
						while = {
							limit = {
								var:math_e_exp >= 1
							}
							change_variable = {
								name = math_e_exp
								subtract = 1
							}
							change_variable = {
								name = math_pow_e
								multiply = 2.718
							}
						}
						while = {
							limit = {
								var:math_e_exp < 0
							}
							change_variable = {
								name = math_e_exp
								add = 1
							}
							change_variable = {
								name = math_pow_e
								divide = 2.718
							}
						}
						set_variable = {
							name = math_e_sm
							value = 1
						}
						if = {
							limit = {
								var:math_e_exp != 0
							}
							set_variable = {
								name = math_e_sq
								value = var:math_e_exp
							}
							change_variable = {
								name = math_e_sq
								multiply = var:math_e_exp
							}
							set_variable = {
								name = math_e_fct
								value = 2
							}
							set_variable = {
								name = math_e_fctl
								value = 2
							}
							set_variable = {
								name = math_e_a1
								value = var:math_e_sq
							}
							set_variable = {
								name = math_e_a2
								value = var:math_e_exp
							}
							set_variable = {
								name = math_e_a3
								value = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
							set_variable = {
								name = math_e_prec
								value = 3
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							while = {
								limit = {
									var:math_e_prec >= 1
								}
								change_variable = {
									name = math_e_prec
									subtract = 1
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_a1
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a2
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a3
									add = 2
								}
								set_variable = {
									name = math_e_tmp
									value = var:math_e_a2
								}
								change_variable = {
									name = math_e_tmp
									multiply = var:math_e_a3
								}
								change_variable = {
									name = math_e_tmp
									add = var:math_e_a1
								}
								change_variable = {
									name = math_e_tmp
									divide = var:math_e_fct
								}
								change_variable = {
									name = math_e_sm
									add = var:math_e_tmp
								}
							}
						}
						change_variable = {
							name = math_pow_e
							multiply = var:math_e_sm
						}
						remove_variable = math_e_sm
						remove_variable = math_e_tmp
						remove_variable = math_e_a1
						remove_variable = math_e_a2
						remove_variable = math_e_a3
						remove_variable = math_e_fctl
						remove_variable = math_e_fct
						remove_variable = math_e_prec
						remove_variable = math_e_sq
						remove_variable = math_e_exp
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_e
						}
						remove_variable = math_pow_ln
						remove_variable = math_pow_e
					}
				}
				else = {
					set_variable = {
						name = prod_update_instances_t
						value = 0
					}
				}
				remove_variable = math_pow_base
				remove_variable = math_pow_exp
				remove_variable = math_root_exp
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_old_food
					value = var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_old_food
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_old_fiber
					value = var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_old_fiber
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_old_fuel
					value = var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_old_fuel
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_old_pottery
					value = var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_old_pottery
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_old_textile
					value = var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_old_textile
					multiply = var:prod_update_instances_t
				}
			}
			remove_variable = prod_update_instances_t
			remove_variable = prod_update_instances_tt
		}
		set_global_variable = {
			name = prod_update_instances_labor
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_farm
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_pasture
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_forest
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_workshop
			value = 0
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_labor
				value = var:prod_template.var:prod_labor
			}
			set_variable = {
				name = prod_land
				value = var:prod_template.var:prod_land
			}
			change_variable = {
				name = prod_labor
				multiply = var:prod_size
			}
			change_variable = {
				name = prod_land
				multiply = var:prod_size
			}
			change_global_variable = {
				name = prod_update_instances_labor
				add = var:prod_labor
			}
			var:prod_template = {
				if = {
					limit = {
						has_character_flag = prod_land_farm
					}
					change_global_variable = {
						name = prod_update_instances_farm
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_pasture
					}
					change_global_variable = {
						name = prod_update_instances_pasture
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_forest
					}
					change_global_variable = {
						name = prod_update_instances_forest
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_workshop
					}
					change_global_variable = {
						name = prod_update_instances_workshop
						add = prev.var:prod_land
					}
				}
			}
		}
		if = {
			limit = {
				var:pop_total = {
					compare_value >= global_var:prod_update_instances_labor
				}
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
			}
		}
		else_if = {
			limit = {
				var:pop_total = 0
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_labor
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
				change_variable = {
					name = prod_labor_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:farm_total = {
					compare_value >= global_var:prod_update_instances_farm
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:farm_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:farm_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_farm
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:pasture_total = {
					compare_value >= global_var:prod_update_instances_pasture
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:pasture_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pasture_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_pasture
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:forest_total = {
					compare_value >= global_var:prod_update_instances_forest
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:forest_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:forest_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_forest
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:workshop_total = {
					compare_value >= global_var:prod_update_instances_workshop
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:workshop_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:workshop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_workshop
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_size_actual
				value = 1
			}
			if = {
				limit = {
					var:prod_labor = {
						compare_value != prev.var:prod_labor_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_labor_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_labor
				}
			}
			if = {
				limit = {
					var:prod_land = {
						compare_value != prev.var:prod_land_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_land_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_land
				}
			}
			set_variable = {
				name = math_pow_base
				value = var:prod_size_actual
			}
			set_variable = {
				name = math_pow_exp
				value = 0.5
			}
			if = {
				limit = {
					has_variable = math_pow_base
					var:math_pow_base != 0
				}
				set_variable = {
					name = prod_size_actual
					value = 1
				}
				while = {
					limit = {
						var:math_pow_exp >= 1
					}
					change_variable = {
						name = math_pow_exp
						subtract = 1
					}
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_base
					}
				}
				while = {
					limit = {
						var:math_pow_exp < 0
					}
					change_variable = {
						name = math_pow_exp
						add = 1
					}
					change_variable = {
						name = prod_size_actual
						divide = var:math_pow_base
					}
				}
				if = {
					limit = {
						var:math_pow_exp != 0
					}
					set_variable = {
						name = math_ln_inp
						value = var:math_pow_base
					}
					set_variable = {
						name = math_pow_ln
						value = 0
					}
					set_variable = {
						name = math_ln_k
						value = 0
					}
					set_variable = {
						name = math_ln_div
						value = 10000
					}
					while = {
						limit = {
							var:math_ln_inp >= 2
						}
						change_variable = {
							name = math_ln_inp
							divide = 2
						}
						change_variable = {
							name = math_pow_ln
							add = 6931.472
						}
					}
					while = {
						limit = {
							var:math_ln_inp < 1
						}
						change_variable = {
							name = math_ln_inp
							multiply = 2
						}
						change_variable = {
							name = math_pow_ln
							subtract = 6931.472
						}
					}
					change_variable = {
						name = math_ln_inp
						multiply = 10000
					}
					while = {
						limit = {
							var:math_ln_k < 10
						}
						change_variable = {
							name = math_ln_k
							add = 1
						}
						change_variable = {
							name = math_ln_div
							divide = 2
						}
						set_variable = {
							name = math_ln_t
							value = 10000
						}
						change_variable = {
							name = math_ln_t
							add = var:math_ln_div
						}
						if = {
							limit = {
								var:math_ln_inp = {
									compare_value >= prev.var:math_ln_t
								}
							}
							change_variable = {
								name = math_ln_inp
								divide = var:math_ln_t
							}
							change_variable = {
								name = math_ln_inp
								multiply = 10000
							}
							set_variable = {
								name = math_lt_ind
								value = var:math_ln_k
							}
							if = {
								limit = {
									var:math_lt_ind >= 6
								}
								if = {
									limit = {
										var:math_lt_ind >= 8
									}
									if = {
										limit = {
											var:math_lt_ind >= 9
										}
										if = {
											limit = {
												var:math_lt_ind >= 10
											}
											set_variable = {
												name = math_ln_lt
												value = 9.761
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 19.512
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 38.986
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 7
										}
										set_variable = {
											name = math_ln_lt
											value = 77.821
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 155.042
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										var:math_lt_ind >= 3
									}
									if = {
										limit = {
											var:math_lt_ind >= 4
										}
										if = {
											limit = {
												var:math_lt_ind >= 5
											}
											set_variable = {
												name = math_ln_lt
												value = 307.717
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 606.246
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 1177.83
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 2
										}
										set_variable = {
											name = math_ln_lt
											value = 2231.436
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 4054.651
										}
									}
								}
							}
							remove_variable = math_lt_ind
							change_variable = {
								name = math_pow_ln
								add = var:math_ln_lt
							}
						}
					}
					change_variable = {
						name = math_pow_ln
						divide = 10000
					}
					remove_variable = math_ln_k
					remove_variable = math_ln_div
					remove_variable = math_ln_t
					remove_variable = math_ln_lt
					remove_variable = math_ln_inp
					change_variable = {
						name = math_pow_exp
						multiply = var:math_pow_ln
					}
					set_variable = {
						name = math_e_exp
						value = var:math_pow_exp
					}
					set_variable = {
						name = math_pow_e
						value = 1
					}
					while = {
						limit = {
							var:math_e_exp >= 1
						}
						change_variable = {
							name = math_e_exp
							subtract = 1
						}
						change_variable = {
							name = math_pow_e
							multiply = 2.718
						}
					}
					while = {
						limit = {
							var:math_e_exp < 0
						}
						change_variable = {
							name = math_e_exp
							add = 1
						}
						change_variable = {
							name = math_pow_e
							divide = 2.718
						}
					}
					set_variable = {
						name = math_e_sm
						value = 1
					}
					if = {
						limit = {
							var:math_e_exp != 0
						}
						set_variable = {
							name = math_e_sq
							value = var:math_e_exp
						}
						change_variable = {
							name = math_e_sq
							multiply = var:math_e_exp
						}
						set_variable = {
							name = math_e_fct
							value = 2
						}
						set_variable = {
							name = math_e_fctl
							value = 2
						}
						set_variable = {
							name = math_e_a1
							value = var:math_e_sq
						}
						set_variable = {
							name = math_e_a2
							value = var:math_e_exp
						}
						set_variable = {
							name = math_e_a3
							value = 2
						}
						set_variable = {
							name = math_e_tmp
							value = var:math_e_a2
						}
						change_variable = {
							name = math_e_tmp
							multiply = var:math_e_a3
						}
						change_variable = {
							name = math_e_tmp
							add = var:math_e_a1
						}
						change_variable = {
							name = math_e_tmp
							divide = var:math_e_fct
						}
						change_variable = {
							name = math_e_sm
							add = var:math_e_tmp
						}
						set_variable = {
							name = math_e_prec
							value = 3
						}
						change_variable = {
							name = math_e_prec
							subtract = 1
						}
						while = {
							limit = {
								var:math_e_prec >= 1
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_a1
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a2
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a3
								add = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
						}
					}
					change_variable = {
						name = math_pow_e
						multiply = var:math_e_sm
					}
					remove_variable = math_e_sm
					remove_variable = math_e_tmp
					remove_variable = math_e_a1
					remove_variable = math_e_a2
					remove_variable = math_e_a3
					remove_variable = math_e_fctl
					remove_variable = math_e_fct
					remove_variable = math_e_prec
					remove_variable = math_e_sq
					remove_variable = math_e_exp
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_e
					}
					remove_variable = math_pow_ln
					remove_variable = math_pow_e
				}
			}
			else = {
				set_variable = {
					name = prod_size_actual
					value = 0
				}
			}
			remove_variable = math_pow_base
			remove_variable = math_pow_exp
			change_variable = {
				name = prod_size_actual
				multiply = var:prod_size
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				set_variable = {
					name = prod_dmnd_food
					value = var:prod_template.var:prod_dmnd_food
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_location.var:modi_prod_dmnd_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				set_variable = {
					name = prod_dmnd_fuel
					value = var:prod_template.var:prod_dmnd_fuel
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_location.var:modi_prod_dmnd_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				set_variable = {
					name = prod_dmnd_fiber
					value = var:prod_template.var:prod_dmnd_fiber
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_location.var:modi_prod_dmnd_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				set_variable = {
					name = prod_dmnd_pottery
					value = var:prod_template.var:prod_dmnd_pottery
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_location.var:modi_prod_dmnd_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				set_variable = {
					name = prod_dmnd_textile
					value = var:prod_template.var:prod_dmnd_textile
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_location.var:modi_prod_dmnd_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_food
					value = var:prod_template.var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_location.var:modi_prod_sply_food
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_fuel
					value = var:prod_template.var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_location.var:modi_prod_sply_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_fiber
					value = var:prod_template.var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_location.var:modi_prod_sply_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_pottery
					value = var:prod_template.var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_location.var:modi_prod_sply_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_textile
					value = var:prod_template.var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_location.var:modi_prod_sply_textile
				}
			}
		}
	}
}
province:1582 = {
	if = {
		limit = {
			has_variable_list = prod_instances
			variable_list_size = {
				name = prod_instances
				value >= 1
			}
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_update_instances_t
				value = 1
			}
			set_variable = {
				name = prod_update_instances_tt
				value = 0
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				if = {
					limit = {
						var:prod_dmnd_food = {
							compare_value != prev.var:prod_in_food
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_food
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_food
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_food
					value = var:prod_dmnd_food
				}
				set_variable = {
					name = prod_in_old_food
					value = var:prod_in_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				if = {
					limit = {
						var:prod_dmnd_fiber = {
							compare_value != prev.var:prod_in_fiber
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fiber
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fiber
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fiber
					value = var:prod_dmnd_fiber
				}
				set_variable = {
					name = prod_in_old_fiber
					value = var:prod_in_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				if = {
					limit = {
						var:prod_dmnd_fuel = {
							compare_value != prev.var:prod_in_fuel
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fuel
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fuel
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fuel
					value = var:prod_dmnd_fuel
				}
				set_variable = {
					name = prod_in_old_fuel
					value = var:prod_in_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				if = {
					limit = {
						var:prod_dmnd_pottery = {
							compare_value != prev.var:prod_in_pottery
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_pottery
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_pottery
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_pottery
					value = var:prod_dmnd_pottery
				}
				set_variable = {
					name = prod_in_old_pottery
					value = var:prod_in_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				if = {
					limit = {
						var:prod_dmnd_textile = {
							compare_value != prev.var:prod_in_textile
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_textile
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_textile
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_textile
					value = var:prod_dmnd_textile
				}
				set_variable = {
					name = prod_in_old_textile
					value = var:prod_in_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_update_instances_tt
					var:prod_update_instances_tt > 0
				}
				set_variable = {
					name = math_root_exp
					value = 1
				}
				change_variable = {
					name = math_root_exp
					divide = var:prod_update_instances_tt
				}
				set_variable = {
					name = math_pow_base
					value = var:prod_update_instances_t
				}
				set_variable = {
					name = math_pow_exp
					value = var:math_root_exp
				}
				if = {
					limit = {
						has_variable = math_pow_base
						var:math_pow_base != 0
					}
					set_variable = {
						name = prod_update_instances_t
						value = 1
					}
					while = {
						limit = {
							var:math_pow_exp >= 1
						}
						change_variable = {
							name = math_pow_exp
							subtract = 1
						}
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_base
						}
					}
					while = {
						limit = {
							var:math_pow_exp < 0
						}
						change_variable = {
							name = math_pow_exp
							add = 1
						}
						change_variable = {
							name = prod_update_instances_t
							divide = var:math_pow_base
						}
					}
					if = {
						limit = {
							var:math_pow_exp != 0
						}
						set_variable = {
							name = math_ln_inp
							value = var:math_pow_base
						}
						set_variable = {
							name = math_pow_ln
							value = 0
						}
						set_variable = {
							name = math_ln_k
							value = 0
						}
						set_variable = {
							name = math_ln_div
							value = 10000
						}
						while = {
							limit = {
								var:math_ln_inp >= 2
							}
							change_variable = {
								name = math_ln_inp
								divide = 2
							}
							change_variable = {
								name = math_pow_ln
								add = 6931.472
							}
						}
						while = {
							limit = {
								var:math_ln_inp < 1
							}
							change_variable = {
								name = math_ln_inp
								multiply = 2
							}
							change_variable = {
								name = math_pow_ln
								subtract = 6931.472
							}
						}
						change_variable = {
							name = math_ln_inp
							multiply = 10000
						}
						while = {
							limit = {
								var:math_ln_k < 10
							}
							change_variable = {
								name = math_ln_k
								add = 1
							}
							change_variable = {
								name = math_ln_div
								divide = 2
							}
							set_variable = {
								name = math_ln_t
								value = 10000
							}
							change_variable = {
								name = math_ln_t
								add = var:math_ln_div
							}
							if = {
								limit = {
									var:math_ln_inp = {
										compare_value >= prev.var:math_ln_t
									}
								}
								change_variable = {
									name = math_ln_inp
									divide = var:math_ln_t
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								set_variable = {
									name = math_lt_ind
									value = var:math_ln_k
								}
								if = {
									limit = {
										var:math_lt_ind >= 6
									}
									if = {
										limit = {
											var:math_lt_ind >= 8
										}
										if = {
											limit = {
												var:math_lt_ind >= 9
											}
											if = {
												limit = {
													var:math_lt_ind >= 10
												}
												set_variable = {
													name = math_ln_lt
													value = 9.761
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 19.512
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 38.986
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 7
											}
											set_variable = {
												name = math_ln_lt
												value = 77.821
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 155.042
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 3
										}
										if = {
											limit = {
												var:math_lt_ind >= 4
											}
											if = {
												limit = {
													var:math_lt_ind >= 5
												}
												set_variable = {
													name = math_ln_lt
													value = 307.717
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 606.246
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 1177.83
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 2
											}
											set_variable = {
												name = math_ln_lt
												value = 2231.436
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 4054.651
											}
										}
									}
								}
								remove_variable = math_lt_ind
								change_variable = {
									name = math_pow_ln
									add = var:math_ln_lt
								}
							}
						}
						change_variable = {
							name = math_pow_ln
							divide = 10000
						}
						remove_variable = math_ln_k
						remove_variable = math_ln_div
						remove_variable = math_ln_t
						remove_variable = math_ln_lt
						remove_variable = math_ln_inp
						change_variable = {
							name = math_pow_exp
							multiply = var:math_pow_ln
						}
						set_variable = {
							name = math_e_exp
							value = var:math_pow_exp
						}
						set_variable = {
							name = math_pow_e
							value = 1
						}
						while = {
							limit = {
								var:math_e_exp >= 1
							}
							change_variable = {
								name = math_e_exp
								subtract = 1
							}
							change_variable = {
								name = math_pow_e
								multiply = 2.718
							}
						}
						while = {
							limit = {
								var:math_e_exp < 0
							}
							change_variable = {
								name = math_e_exp
								add = 1
							}
							change_variable = {
								name = math_pow_e
								divide = 2.718
							}
						}
						set_variable = {
							name = math_e_sm
							value = 1
						}
						if = {
							limit = {
								var:math_e_exp != 0
							}
							set_variable = {
								name = math_e_sq
								value = var:math_e_exp
							}
							change_variable = {
								name = math_e_sq
								multiply = var:math_e_exp
							}
							set_variable = {
								name = math_e_fct
								value = 2
							}
							set_variable = {
								name = math_e_fctl
								value = 2
							}
							set_variable = {
								name = math_e_a1
								value = var:math_e_sq
							}
							set_variable = {
								name = math_e_a2
								value = var:math_e_exp
							}
							set_variable = {
								name = math_e_a3
								value = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
							set_variable = {
								name = math_e_prec
								value = 3
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							while = {
								limit = {
									var:math_e_prec >= 1
								}
								change_variable = {
									name = math_e_prec
									subtract = 1
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_a1
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a2
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a3
									add = 2
								}
								set_variable = {
									name = math_e_tmp
									value = var:math_e_a2
								}
								change_variable = {
									name = math_e_tmp
									multiply = var:math_e_a3
								}
								change_variable = {
									name = math_e_tmp
									add = var:math_e_a1
								}
								change_variable = {
									name = math_e_tmp
									divide = var:math_e_fct
								}
								change_variable = {
									name = math_e_sm
									add = var:math_e_tmp
								}
							}
						}
						change_variable = {
							name = math_pow_e
							multiply = var:math_e_sm
						}
						remove_variable = math_e_sm
						remove_variable = math_e_tmp
						remove_variable = math_e_a1
						remove_variable = math_e_a2
						remove_variable = math_e_a3
						remove_variable = math_e_fctl
						remove_variable = math_e_fct
						remove_variable = math_e_prec
						remove_variable = math_e_sq
						remove_variable = math_e_exp
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_e
						}
						remove_variable = math_pow_ln
						remove_variable = math_pow_e
					}
				}
				else = {
					set_variable = {
						name = prod_update_instances_t
						value = 0
					}
				}
				remove_variable = math_pow_base
				remove_variable = math_pow_exp
				remove_variable = math_root_exp
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_old_food
					value = var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_old_food
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_old_fiber
					value = var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_old_fiber
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_old_fuel
					value = var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_old_fuel
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_old_pottery
					value = var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_old_pottery
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_old_textile
					value = var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_old_textile
					multiply = var:prod_update_instances_t
				}
			}
			remove_variable = prod_update_instances_t
			remove_variable = prod_update_instances_tt
		}
		set_global_variable = {
			name = prod_update_instances_labor
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_farm
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_pasture
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_forest
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_workshop
			value = 0
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_labor
				value = var:prod_template.var:prod_labor
			}
			set_variable = {
				name = prod_land
				value = var:prod_template.var:prod_land
			}
			change_variable = {
				name = prod_labor
				multiply = var:prod_size
			}
			change_variable = {
				name = prod_land
				multiply = var:prod_size
			}
			change_global_variable = {
				name = prod_update_instances_labor
				add = var:prod_labor
			}
			var:prod_template = {
				if = {
					limit = {
						has_character_flag = prod_land_farm
					}
					change_global_variable = {
						name = prod_update_instances_farm
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_pasture
					}
					change_global_variable = {
						name = prod_update_instances_pasture
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_forest
					}
					change_global_variable = {
						name = prod_update_instances_forest
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_workshop
					}
					change_global_variable = {
						name = prod_update_instances_workshop
						add = prev.var:prod_land
					}
				}
			}
		}
		if = {
			limit = {
				var:pop_total = {
					compare_value >= global_var:prod_update_instances_labor
				}
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
			}
		}
		else_if = {
			limit = {
				var:pop_total = 0
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_labor
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
				change_variable = {
					name = prod_labor_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:farm_total = {
					compare_value >= global_var:prod_update_instances_farm
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:farm_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:farm_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_farm
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:pasture_total = {
					compare_value >= global_var:prod_update_instances_pasture
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:pasture_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pasture_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_pasture
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:forest_total = {
					compare_value >= global_var:prod_update_instances_forest
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:forest_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:forest_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_forest
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:workshop_total = {
					compare_value >= global_var:prod_update_instances_workshop
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:workshop_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:workshop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_workshop
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_size_actual
				value = 1
			}
			if = {
				limit = {
					var:prod_labor = {
						compare_value != prev.var:prod_labor_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_labor_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_labor
				}
			}
			if = {
				limit = {
					var:prod_land = {
						compare_value != prev.var:prod_land_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_land_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_land
				}
			}
			set_variable = {
				name = math_pow_base
				value = var:prod_size_actual
			}
			set_variable = {
				name = math_pow_exp
				value = 0.5
			}
			if = {
				limit = {
					has_variable = math_pow_base
					var:math_pow_base != 0
				}
				set_variable = {
					name = prod_size_actual
					value = 1
				}
				while = {
					limit = {
						var:math_pow_exp >= 1
					}
					change_variable = {
						name = math_pow_exp
						subtract = 1
					}
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_base
					}
				}
				while = {
					limit = {
						var:math_pow_exp < 0
					}
					change_variable = {
						name = math_pow_exp
						add = 1
					}
					change_variable = {
						name = prod_size_actual
						divide = var:math_pow_base
					}
				}
				if = {
					limit = {
						var:math_pow_exp != 0
					}
					set_variable = {
						name = math_ln_inp
						value = var:math_pow_base
					}
					set_variable = {
						name = math_pow_ln
						value = 0
					}
					set_variable = {
						name = math_ln_k
						value = 0
					}
					set_variable = {
						name = math_ln_div
						value = 10000
					}
					while = {
						limit = {
							var:math_ln_inp >= 2
						}
						change_variable = {
							name = math_ln_inp
							divide = 2
						}
						change_variable = {
							name = math_pow_ln
							add = 6931.472
						}
					}
					while = {
						limit = {
							var:math_ln_inp < 1
						}
						change_variable = {
							name = math_ln_inp
							multiply = 2
						}
						change_variable = {
							name = math_pow_ln
							subtract = 6931.472
						}
					}
					change_variable = {
						name = math_ln_inp
						multiply = 10000
					}
					while = {
						limit = {
							var:math_ln_k < 10
						}
						change_variable = {
							name = math_ln_k
							add = 1
						}
						change_variable = {
							name = math_ln_div
							divide = 2
						}
						set_variable = {
							name = math_ln_t
							value = 10000
						}
						change_variable = {
							name = math_ln_t
							add = var:math_ln_div
						}
						if = {
							limit = {
								var:math_ln_inp = {
									compare_value >= prev.var:math_ln_t
								}
							}
							change_variable = {
								name = math_ln_inp
								divide = var:math_ln_t
							}
							change_variable = {
								name = math_ln_inp
								multiply = 10000
							}
							set_variable = {
								name = math_lt_ind
								value = var:math_ln_k
							}
							if = {
								limit = {
									var:math_lt_ind >= 6
								}
								if = {
									limit = {
										var:math_lt_ind >= 8
									}
									if = {
										limit = {
											var:math_lt_ind >= 9
										}
										if = {
											limit = {
												var:math_lt_ind >= 10
											}
											set_variable = {
												name = math_ln_lt
												value = 9.761
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 19.512
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 38.986
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 7
										}
										set_variable = {
											name = math_ln_lt
											value = 77.821
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 155.042
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										var:math_lt_ind >= 3
									}
									if = {
										limit = {
											var:math_lt_ind >= 4
										}
										if = {
											limit = {
												var:math_lt_ind >= 5
											}
											set_variable = {
												name = math_ln_lt
												value = 307.717
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 606.246
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 1177.83
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 2
										}
										set_variable = {
											name = math_ln_lt
											value = 2231.436
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 4054.651
										}
									}
								}
							}
							remove_variable = math_lt_ind
							change_variable = {
								name = math_pow_ln
								add = var:math_ln_lt
							}
						}
					}
					change_variable = {
						name = math_pow_ln
						divide = 10000
					}
					remove_variable = math_ln_k
					remove_variable = math_ln_div
					remove_variable = math_ln_t
					remove_variable = math_ln_lt
					remove_variable = math_ln_inp
					change_variable = {
						name = math_pow_exp
						multiply = var:math_pow_ln
					}
					set_variable = {
						name = math_e_exp
						value = var:math_pow_exp
					}
					set_variable = {
						name = math_pow_e
						value = 1
					}
					while = {
						limit = {
							var:math_e_exp >= 1
						}
						change_variable = {
							name = math_e_exp
							subtract = 1
						}
						change_variable = {
							name = math_pow_e
							multiply = 2.718
						}
					}
					while = {
						limit = {
							var:math_e_exp < 0
						}
						change_variable = {
							name = math_e_exp
							add = 1
						}
						change_variable = {
							name = math_pow_e
							divide = 2.718
						}
					}
					set_variable = {
						name = math_e_sm
						value = 1
					}
					if = {
						limit = {
							var:math_e_exp != 0
						}
						set_variable = {
							name = math_e_sq
							value = var:math_e_exp
						}
						change_variable = {
							name = math_e_sq
							multiply = var:math_e_exp
						}
						set_variable = {
							name = math_e_fct
							value = 2
						}
						set_variable = {
							name = math_e_fctl
							value = 2
						}
						set_variable = {
							name = math_e_a1
							value = var:math_e_sq
						}
						set_variable = {
							name = math_e_a2
							value = var:math_e_exp
						}
						set_variable = {
							name = math_e_a3
							value = 2
						}
						set_variable = {
							name = math_e_tmp
							value = var:math_e_a2
						}
						change_variable = {
							name = math_e_tmp
							multiply = var:math_e_a3
						}
						change_variable = {
							name = math_e_tmp
							add = var:math_e_a1
						}
						change_variable = {
							name = math_e_tmp
							divide = var:math_e_fct
						}
						change_variable = {
							name = math_e_sm
							add = var:math_e_tmp
						}
						set_variable = {
							name = math_e_prec
							value = 3
						}
						change_variable = {
							name = math_e_prec
							subtract = 1
						}
						while = {
							limit = {
								var:math_e_prec >= 1
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_a1
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a2
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a3
								add = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
						}
					}
					change_variable = {
						name = math_pow_e
						multiply = var:math_e_sm
					}
					remove_variable = math_e_sm
					remove_variable = math_e_tmp
					remove_variable = math_e_a1
					remove_variable = math_e_a2
					remove_variable = math_e_a3
					remove_variable = math_e_fctl
					remove_variable = math_e_fct
					remove_variable = math_e_prec
					remove_variable = math_e_sq
					remove_variable = math_e_exp
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_e
					}
					remove_variable = math_pow_ln
					remove_variable = math_pow_e
				}
			}
			else = {
				set_variable = {
					name = prod_size_actual
					value = 0
				}
			}
			remove_variable = math_pow_base
			remove_variable = math_pow_exp
			change_variable = {
				name = prod_size_actual
				multiply = var:prod_size
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				set_variable = {
					name = prod_dmnd_food
					value = var:prod_template.var:prod_dmnd_food
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_location.var:modi_prod_dmnd_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				set_variable = {
					name = prod_dmnd_fuel
					value = var:prod_template.var:prod_dmnd_fuel
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_location.var:modi_prod_dmnd_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				set_variable = {
					name = prod_dmnd_fiber
					value = var:prod_template.var:prod_dmnd_fiber
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_location.var:modi_prod_dmnd_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				set_variable = {
					name = prod_dmnd_pottery
					value = var:prod_template.var:prod_dmnd_pottery
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_location.var:modi_prod_dmnd_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				set_variable = {
					name = prod_dmnd_textile
					value = var:prod_template.var:prod_dmnd_textile
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_location.var:modi_prod_dmnd_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_food
					value = var:prod_template.var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_location.var:modi_prod_sply_food
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_fuel
					value = var:prod_template.var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_location.var:modi_prod_sply_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_fiber
					value = var:prod_template.var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_location.var:modi_prod_sply_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_pottery
					value = var:prod_template.var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_location.var:modi_prod_sply_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_textile
					value = var:prod_template.var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_location.var:modi_prod_sply_textile
				}
			}
		}
	}
}
province:1561 = {
	if = {
		limit = {
			has_variable_list = prod_instances
			variable_list_size = {
				name = prod_instances
				value >= 1
			}
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_update_instances_t
				value = 1
			}
			set_variable = {
				name = prod_update_instances_tt
				value = 0
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				if = {
					limit = {
						var:prod_dmnd_food = {
							compare_value != prev.var:prod_in_food
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_food
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_food
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_food
					value = var:prod_dmnd_food
				}
				set_variable = {
					name = prod_in_old_food
					value = var:prod_in_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				if = {
					limit = {
						var:prod_dmnd_fiber = {
							compare_value != prev.var:prod_in_fiber
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fiber
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fiber
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fiber
					value = var:prod_dmnd_fiber
				}
				set_variable = {
					name = prod_in_old_fiber
					value = var:prod_in_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				if = {
					limit = {
						var:prod_dmnd_fuel = {
							compare_value != prev.var:prod_in_fuel
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fuel
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fuel
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fuel
					value = var:prod_dmnd_fuel
				}
				set_variable = {
					name = prod_in_old_fuel
					value = var:prod_in_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				if = {
					limit = {
						var:prod_dmnd_pottery = {
							compare_value != prev.var:prod_in_pottery
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_pottery
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_pottery
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_pottery
					value = var:prod_dmnd_pottery
				}
				set_variable = {
					name = prod_in_old_pottery
					value = var:prod_in_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				if = {
					limit = {
						var:prod_dmnd_textile = {
							compare_value != prev.var:prod_in_textile
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_textile
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_textile
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_textile
					value = var:prod_dmnd_textile
				}
				set_variable = {
					name = prod_in_old_textile
					value = var:prod_in_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_update_instances_tt
					var:prod_update_instances_tt > 0
				}
				set_variable = {
					name = math_root_exp
					value = 1
				}
				change_variable = {
					name = math_root_exp
					divide = var:prod_update_instances_tt
				}
				set_variable = {
					name = math_pow_base
					value = var:prod_update_instances_t
				}
				set_variable = {
					name = math_pow_exp
					value = var:math_root_exp
				}
				if = {
					limit = {
						has_variable = math_pow_base
						var:math_pow_base != 0
					}
					set_variable = {
						name = prod_update_instances_t
						value = 1
					}
					while = {
						limit = {
							var:math_pow_exp >= 1
						}
						change_variable = {
							name = math_pow_exp
							subtract = 1
						}
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_base
						}
					}
					while = {
						limit = {
							var:math_pow_exp < 0
						}
						change_variable = {
							name = math_pow_exp
							add = 1
						}
						change_variable = {
							name = prod_update_instances_t
							divide = var:math_pow_base
						}
					}
					if = {
						limit = {
							var:math_pow_exp != 0
						}
						set_variable = {
							name = math_ln_inp
							value = var:math_pow_base
						}
						set_variable = {
							name = math_pow_ln
							value = 0
						}
						set_variable = {
							name = math_ln_k
							value = 0
						}
						set_variable = {
							name = math_ln_div
							value = 10000
						}
						while = {
							limit = {
								var:math_ln_inp >= 2
							}
							change_variable = {
								name = math_ln_inp
								divide = 2
							}
							change_variable = {
								name = math_pow_ln
								add = 6931.472
							}
						}
						while = {
							limit = {
								var:math_ln_inp < 1
							}
							change_variable = {
								name = math_ln_inp
								multiply = 2
							}
							change_variable = {
								name = math_pow_ln
								subtract = 6931.472
							}
						}
						change_variable = {
							name = math_ln_inp
							multiply = 10000
						}
						while = {
							limit = {
								var:math_ln_k < 10
							}
							change_variable = {
								name = math_ln_k
								add = 1
							}
							change_variable = {
								name = math_ln_div
								divide = 2
							}
							set_variable = {
								name = math_ln_t
								value = 10000
							}
							change_variable = {
								name = math_ln_t
								add = var:math_ln_div
							}
							if = {
								limit = {
									var:math_ln_inp = {
										compare_value >= prev.var:math_ln_t
									}
								}
								change_variable = {
									name = math_ln_inp
									divide = var:math_ln_t
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								set_variable = {
									name = math_lt_ind
									value = var:math_ln_k
								}
								if = {
									limit = {
										var:math_lt_ind >= 6
									}
									if = {
										limit = {
											var:math_lt_ind >= 8
										}
										if = {
											limit = {
												var:math_lt_ind >= 9
											}
											if = {
												limit = {
													var:math_lt_ind >= 10
												}
												set_variable = {
													name = math_ln_lt
													value = 9.761
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 19.512
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 38.986
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 7
											}
											set_variable = {
												name = math_ln_lt
												value = 77.821
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 155.042
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 3
										}
										if = {
											limit = {
												var:math_lt_ind >= 4
											}
											if = {
												limit = {
													var:math_lt_ind >= 5
												}
												set_variable = {
													name = math_ln_lt
													value = 307.717
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 606.246
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 1177.83
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 2
											}
											set_variable = {
												name = math_ln_lt
												value = 2231.436
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 4054.651
											}
										}
									}
								}
								remove_variable = math_lt_ind
								change_variable = {
									name = math_pow_ln
									add = var:math_ln_lt
								}
							}
						}
						change_variable = {
							name = math_pow_ln
							divide = 10000
						}
						remove_variable = math_ln_k
						remove_variable = math_ln_div
						remove_variable = math_ln_t
						remove_variable = math_ln_lt
						remove_variable = math_ln_inp
						change_variable = {
							name = math_pow_exp
							multiply = var:math_pow_ln
						}
						set_variable = {
							name = math_e_exp
							value = var:math_pow_exp
						}
						set_variable = {
							name = math_pow_e
							value = 1
						}
						while = {
							limit = {
								var:math_e_exp >= 1
							}
							change_variable = {
								name = math_e_exp
								subtract = 1
							}
							change_variable = {
								name = math_pow_e
								multiply = 2.718
							}
						}
						while = {
							limit = {
								var:math_e_exp < 0
							}
							change_variable = {
								name = math_e_exp
								add = 1
							}
							change_variable = {
								name = math_pow_e
								divide = 2.718
							}
						}
						set_variable = {
							name = math_e_sm
							value = 1
						}
						if = {
							limit = {
								var:math_e_exp != 0
							}
							set_variable = {
								name = math_e_sq
								value = var:math_e_exp
							}
							change_variable = {
								name = math_e_sq
								multiply = var:math_e_exp
							}
							set_variable = {
								name = math_e_fct
								value = 2
							}
							set_variable = {
								name = math_e_fctl
								value = 2
							}
							set_variable = {
								name = math_e_a1
								value = var:math_e_sq
							}
							set_variable = {
								name = math_e_a2
								value = var:math_e_exp
							}
							set_variable = {
								name = math_e_a3
								value = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
							set_variable = {
								name = math_e_prec
								value = 3
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							while = {
								limit = {
									var:math_e_prec >= 1
								}
								change_variable = {
									name = math_e_prec
									subtract = 1
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_a1
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a2
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a3
									add = 2
								}
								set_variable = {
									name = math_e_tmp
									value = var:math_e_a2
								}
								change_variable = {
									name = math_e_tmp
									multiply = var:math_e_a3
								}
								change_variable = {
									name = math_e_tmp
									add = var:math_e_a1
								}
								change_variable = {
									name = math_e_tmp
									divide = var:math_e_fct
								}
								change_variable = {
									name = math_e_sm
									add = var:math_e_tmp
								}
							}
						}
						change_variable = {
							name = math_pow_e
							multiply = var:math_e_sm
						}
						remove_variable = math_e_sm
						remove_variable = math_e_tmp
						remove_variable = math_e_a1
						remove_variable = math_e_a2
						remove_variable = math_e_a3
						remove_variable = math_e_fctl
						remove_variable = math_e_fct
						remove_variable = math_e_prec
						remove_variable = math_e_sq
						remove_variable = math_e_exp
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_e
						}
						remove_variable = math_pow_ln
						remove_variable = math_pow_e
					}
				}
				else = {
					set_variable = {
						name = prod_update_instances_t
						value = 0
					}
				}
				remove_variable = math_pow_base
				remove_variable = math_pow_exp
				remove_variable = math_root_exp
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_old_food
					value = var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_old_food
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_old_fiber
					value = var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_old_fiber
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_old_fuel
					value = var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_old_fuel
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_old_pottery
					value = var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_old_pottery
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_old_textile
					value = var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_old_textile
					multiply = var:prod_update_instances_t
				}
			}
			remove_variable = prod_update_instances_t
			remove_variable = prod_update_instances_tt
		}
		set_global_variable = {
			name = prod_update_instances_labor
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_farm
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_pasture
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_forest
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_workshop
			value = 0
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_labor
				value = var:prod_template.var:prod_labor
			}
			set_variable = {
				name = prod_land
				value = var:prod_template.var:prod_land
			}
			change_variable = {
				name = prod_labor
				multiply = var:prod_size
			}
			change_variable = {
				name = prod_land
				multiply = var:prod_size
			}
			change_global_variable = {
				name = prod_update_instances_labor
				add = var:prod_labor
			}
			var:prod_template = {
				if = {
					limit = {
						has_character_flag = prod_land_farm
					}
					change_global_variable = {
						name = prod_update_instances_farm
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_pasture
					}
					change_global_variable = {
						name = prod_update_instances_pasture
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_forest
					}
					change_global_variable = {
						name = prod_update_instances_forest
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_workshop
					}
					change_global_variable = {
						name = prod_update_instances_workshop
						add = prev.var:prod_land
					}
				}
			}
		}
		if = {
			limit = {
				var:pop_total = {
					compare_value >= global_var:prod_update_instances_labor
				}
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
			}
		}
		else_if = {
			limit = {
				var:pop_total = 0
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_labor
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
				change_variable = {
					name = prod_labor_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:farm_total = {
					compare_value >= global_var:prod_update_instances_farm
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:farm_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:farm_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_farm
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:pasture_total = {
					compare_value >= global_var:prod_update_instances_pasture
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:pasture_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pasture_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_pasture
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:forest_total = {
					compare_value >= global_var:prod_update_instances_forest
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:forest_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:forest_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_forest
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:workshop_total = {
					compare_value >= global_var:prod_update_instances_workshop
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:workshop_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:workshop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_workshop
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_size_actual
				value = 1
			}
			if = {
				limit = {
					var:prod_labor = {
						compare_value != prev.var:prod_labor_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_labor_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_labor
				}
			}
			if = {
				limit = {
					var:prod_land = {
						compare_value != prev.var:prod_land_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_land_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_land
				}
			}
			set_variable = {
				name = math_pow_base
				value = var:prod_size_actual
			}
			set_variable = {
				name = math_pow_exp
				value = 0.5
			}
			if = {
				limit = {
					has_variable = math_pow_base
					var:math_pow_base != 0
				}
				set_variable = {
					name = prod_size_actual
					value = 1
				}
				while = {
					limit = {
						var:math_pow_exp >= 1
					}
					change_variable = {
						name = math_pow_exp
						subtract = 1
					}
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_base
					}
				}
				while = {
					limit = {
						var:math_pow_exp < 0
					}
					change_variable = {
						name = math_pow_exp
						add = 1
					}
					change_variable = {
						name = prod_size_actual
						divide = var:math_pow_base
					}
				}
				if = {
					limit = {
						var:math_pow_exp != 0
					}
					set_variable = {
						name = math_ln_inp
						value = var:math_pow_base
					}
					set_variable = {
						name = math_pow_ln
						value = 0
					}
					set_variable = {
						name = math_ln_k
						value = 0
					}
					set_variable = {
						name = math_ln_div
						value = 10000
					}
					while = {
						limit = {
							var:math_ln_inp >= 2
						}
						change_variable = {
							name = math_ln_inp
							divide = 2
						}
						change_variable = {
							name = math_pow_ln
							add = 6931.472
						}
					}
					while = {
						limit = {
							var:math_ln_inp < 1
						}
						change_variable = {
							name = math_ln_inp
							multiply = 2
						}
						change_variable = {
							name = math_pow_ln
							subtract = 6931.472
						}
					}
					change_variable = {
						name = math_ln_inp
						multiply = 10000
					}
					while = {
						limit = {
							var:math_ln_k < 10
						}
						change_variable = {
							name = math_ln_k
							add = 1
						}
						change_variable = {
							name = math_ln_div
							divide = 2
						}
						set_variable = {
							name = math_ln_t
							value = 10000
						}
						change_variable = {
							name = math_ln_t
							add = var:math_ln_div
						}
						if = {
							limit = {
								var:math_ln_inp = {
									compare_value >= prev.var:math_ln_t
								}
							}
							change_variable = {
								name = math_ln_inp
								divide = var:math_ln_t
							}
							change_variable = {
								name = math_ln_inp
								multiply = 10000
							}
							set_variable = {
								name = math_lt_ind
								value = var:math_ln_k
							}
							if = {
								limit = {
									var:math_lt_ind >= 6
								}
								if = {
									limit = {
										var:math_lt_ind >= 8
									}
									if = {
										limit = {
											var:math_lt_ind >= 9
										}
										if = {
											limit = {
												var:math_lt_ind >= 10
											}
											set_variable = {
												name = math_ln_lt
												value = 9.761
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 19.512
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 38.986
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 7
										}
										set_variable = {
											name = math_ln_lt
											value = 77.821
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 155.042
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										var:math_lt_ind >= 3
									}
									if = {
										limit = {
											var:math_lt_ind >= 4
										}
										if = {
											limit = {
												var:math_lt_ind >= 5
											}
											set_variable = {
												name = math_ln_lt
												value = 307.717
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 606.246
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 1177.83
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 2
										}
										set_variable = {
											name = math_ln_lt
											value = 2231.436
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 4054.651
										}
									}
								}
							}
							remove_variable = math_lt_ind
							change_variable = {
								name = math_pow_ln
								add = var:math_ln_lt
							}
						}
					}
					change_variable = {
						name = math_pow_ln
						divide = 10000
					}
					remove_variable = math_ln_k
					remove_variable = math_ln_div
					remove_variable = math_ln_t
					remove_variable = math_ln_lt
					remove_variable = math_ln_inp
					change_variable = {
						name = math_pow_exp
						multiply = var:math_pow_ln
					}
					set_variable = {
						name = math_e_exp
						value = var:math_pow_exp
					}
					set_variable = {
						name = math_pow_e
						value = 1
					}
					while = {
						limit = {
							var:math_e_exp >= 1
						}
						change_variable = {
							name = math_e_exp
							subtract = 1
						}
						change_variable = {
							name = math_pow_e
							multiply = 2.718
						}
					}
					while = {
						limit = {
							var:math_e_exp < 0
						}
						change_variable = {
							name = math_e_exp
							add = 1
						}
						change_variable = {
							name = math_pow_e
							divide = 2.718
						}
					}
					set_variable = {
						name = math_e_sm
						value = 1
					}
					if = {
						limit = {
							var:math_e_exp != 0
						}
						set_variable = {
							name = math_e_sq
							value = var:math_e_exp
						}
						change_variable = {
							name = math_e_sq
							multiply = var:math_e_exp
						}
						set_variable = {
							name = math_e_fct
							value = 2
						}
						set_variable = {
							name = math_e_fctl
							value = 2
						}
						set_variable = {
							name = math_e_a1
							value = var:math_e_sq
						}
						set_variable = {
							name = math_e_a2
							value = var:math_e_exp
						}
						set_variable = {
							name = math_e_a3
							value = 2
						}
						set_variable = {
							name = math_e_tmp
							value = var:math_e_a2
						}
						change_variable = {
							name = math_e_tmp
							multiply = var:math_e_a3
						}
						change_variable = {
							name = math_e_tmp
							add = var:math_e_a1
						}
						change_variable = {
							name = math_e_tmp
							divide = var:math_e_fct
						}
						change_variable = {
							name = math_e_sm
							add = var:math_e_tmp
						}
						set_variable = {
							name = math_e_prec
							value = 3
						}
						change_variable = {
							name = math_e_prec
							subtract = 1
						}
						while = {
							limit = {
								var:math_e_prec >= 1
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_a1
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a2
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a3
								add = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
						}
					}
					change_variable = {
						name = math_pow_e
						multiply = var:math_e_sm
					}
					remove_variable = math_e_sm
					remove_variable = math_e_tmp
					remove_variable = math_e_a1
					remove_variable = math_e_a2
					remove_variable = math_e_a3
					remove_variable = math_e_fctl
					remove_variable = math_e_fct
					remove_variable = math_e_prec
					remove_variable = math_e_sq
					remove_variable = math_e_exp
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_e
					}
					remove_variable = math_pow_ln
					remove_variable = math_pow_e
				}
			}
			else = {
				set_variable = {
					name = prod_size_actual
					value = 0
				}
			}
			remove_variable = math_pow_base
			remove_variable = math_pow_exp
			change_variable = {
				name = prod_size_actual
				multiply = var:prod_size
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				set_variable = {
					name = prod_dmnd_food
					value = var:prod_template.var:prod_dmnd_food
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_location.var:modi_prod_dmnd_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				set_variable = {
					name = prod_dmnd_fuel
					value = var:prod_template.var:prod_dmnd_fuel
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_location.var:modi_prod_dmnd_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				set_variable = {
					name = prod_dmnd_fiber
					value = var:prod_template.var:prod_dmnd_fiber
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_location.var:modi_prod_dmnd_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				set_variable = {
					name = prod_dmnd_pottery
					value = var:prod_template.var:prod_dmnd_pottery
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_location.var:modi_prod_dmnd_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				set_variable = {
					name = prod_dmnd_textile
					value = var:prod_template.var:prod_dmnd_textile
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_location.var:modi_prod_dmnd_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_food
					value = var:prod_template.var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_location.var:modi_prod_sply_food
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_fuel
					value = var:prod_template.var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_location.var:modi_prod_sply_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_fiber
					value = var:prod_template.var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_location.var:modi_prod_sply_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_pottery
					value = var:prod_template.var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_location.var:modi_prod_sply_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_textile
					value = var:prod_template.var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_location.var:modi_prod_sply_textile
				}
			}
		}
	}
}
province:1555 = {
	if = {
		limit = {
			has_variable_list = prod_instances
			variable_list_size = {
				name = prod_instances
				value >= 1
			}
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_update_instances_t
				value = 1
			}
			set_variable = {
				name = prod_update_instances_tt
				value = 0
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				if = {
					limit = {
						var:prod_dmnd_food = {
							compare_value != prev.var:prod_in_food
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_food
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_food
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_food
					value = var:prod_dmnd_food
				}
				set_variable = {
					name = prod_in_old_food
					value = var:prod_in_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				if = {
					limit = {
						var:prod_dmnd_fiber = {
							compare_value != prev.var:prod_in_fiber
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fiber
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fiber
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fiber
					value = var:prod_dmnd_fiber
				}
				set_variable = {
					name = prod_in_old_fiber
					value = var:prod_in_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				if = {
					limit = {
						var:prod_dmnd_fuel = {
							compare_value != prev.var:prod_in_fuel
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_fuel
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_fuel
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_fuel
					value = var:prod_dmnd_fuel
				}
				set_variable = {
					name = prod_in_old_fuel
					value = var:prod_in_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				if = {
					limit = {
						var:prod_dmnd_pottery = {
							compare_value != prev.var:prod_in_pottery
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_pottery
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_pottery
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_pottery
					value = var:prod_dmnd_pottery
				}
				set_variable = {
					name = prod_in_old_pottery
					value = var:prod_in_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				if = {
					limit = {
						var:prod_dmnd_textile = {
							compare_value != prev.var:prod_in_textile
						}
					}
					change_variable = {
						name = prod_update_instances_t
						multiply = var:prod_in_textile
					}
					change_variable = {
						name = prod_update_instances_t
						divide = var:prod_dmnd_textile
					}
				}
				change_variable = {
					name = prod_update_instances_tt
					add = 1
				}
				set_variable = {
					name = prod_dmnd_old_textile
					value = var:prod_dmnd_textile
				}
				set_variable = {
					name = prod_in_old_textile
					value = var:prod_in_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_update_instances_tt
					var:prod_update_instances_tt > 0
				}
				set_variable = {
					name = math_root_exp
					value = 1
				}
				change_variable = {
					name = math_root_exp
					divide = var:prod_update_instances_tt
				}
				set_variable = {
					name = math_pow_base
					value = var:prod_update_instances_t
				}
				set_variable = {
					name = math_pow_exp
					value = var:math_root_exp
				}
				if = {
					limit = {
						has_variable = math_pow_base
						var:math_pow_base != 0
					}
					set_variable = {
						name = prod_update_instances_t
						value = 1
					}
					while = {
						limit = {
							var:math_pow_exp >= 1
						}
						change_variable = {
							name = math_pow_exp
							subtract = 1
						}
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_base
						}
					}
					while = {
						limit = {
							var:math_pow_exp < 0
						}
						change_variable = {
							name = math_pow_exp
							add = 1
						}
						change_variable = {
							name = prod_update_instances_t
							divide = var:math_pow_base
						}
					}
					if = {
						limit = {
							var:math_pow_exp != 0
						}
						set_variable = {
							name = math_ln_inp
							value = var:math_pow_base
						}
						set_variable = {
							name = math_pow_ln
							value = 0
						}
						set_variable = {
							name = math_ln_k
							value = 0
						}
						set_variable = {
							name = math_ln_div
							value = 10000
						}
						while = {
							limit = {
								var:math_ln_inp >= 2
							}
							change_variable = {
								name = math_ln_inp
								divide = 2
							}
							change_variable = {
								name = math_pow_ln
								add = 6931.472
							}
						}
						while = {
							limit = {
								var:math_ln_inp < 1
							}
							change_variable = {
								name = math_ln_inp
								multiply = 2
							}
							change_variable = {
								name = math_pow_ln
								subtract = 6931.472
							}
						}
						change_variable = {
							name = math_ln_inp
							multiply = 10000
						}
						while = {
							limit = {
								var:math_ln_k < 10
							}
							change_variable = {
								name = math_ln_k
								add = 1
							}
							change_variable = {
								name = math_ln_div
								divide = 2
							}
							set_variable = {
								name = math_ln_t
								value = 10000
							}
							change_variable = {
								name = math_ln_t
								add = var:math_ln_div
							}
							if = {
								limit = {
									var:math_ln_inp = {
										compare_value >= prev.var:math_ln_t
									}
								}
								change_variable = {
									name = math_ln_inp
									divide = var:math_ln_t
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								set_variable = {
									name = math_lt_ind
									value = var:math_ln_k
								}
								if = {
									limit = {
										var:math_lt_ind >= 6
									}
									if = {
										limit = {
											var:math_lt_ind >= 8
										}
										if = {
											limit = {
												var:math_lt_ind >= 9
											}
											if = {
												limit = {
													var:math_lt_ind >= 10
												}
												set_variable = {
													name = math_ln_lt
													value = 9.761
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 19.512
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 38.986
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 7
											}
											set_variable = {
												name = math_ln_lt
												value = 77.821
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 155.042
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 3
										}
										if = {
											limit = {
												var:math_lt_ind >= 4
											}
											if = {
												limit = {
													var:math_lt_ind >= 5
												}
												set_variable = {
													name = math_ln_lt
													value = 307.717
												}
											}
											else = {
												set_variable = {
													name = math_ln_lt
													value = 606.246
												}
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 1177.83
											}
										}
									}
									else = {
										if = {
											limit = {
												var:math_lt_ind >= 2
											}
											set_variable = {
												name = math_ln_lt
												value = 2231.436
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 4054.651
											}
										}
									}
								}
								remove_variable = math_lt_ind
								change_variable = {
									name = math_pow_ln
									add = var:math_ln_lt
								}
							}
						}
						change_variable = {
							name = math_pow_ln
							divide = 10000
						}
						remove_variable = math_ln_k
						remove_variable = math_ln_div
						remove_variable = math_ln_t
						remove_variable = math_ln_lt
						remove_variable = math_ln_inp
						change_variable = {
							name = math_pow_exp
							multiply = var:math_pow_ln
						}
						set_variable = {
							name = math_e_exp
							value = var:math_pow_exp
						}
						set_variable = {
							name = math_pow_e
							value = 1
						}
						while = {
							limit = {
								var:math_e_exp >= 1
							}
							change_variable = {
								name = math_e_exp
								subtract = 1
							}
							change_variable = {
								name = math_pow_e
								multiply = 2.718
							}
						}
						while = {
							limit = {
								var:math_e_exp < 0
							}
							change_variable = {
								name = math_e_exp
								add = 1
							}
							change_variable = {
								name = math_pow_e
								divide = 2.718
							}
						}
						set_variable = {
							name = math_e_sm
							value = 1
						}
						if = {
							limit = {
								var:math_e_exp != 0
							}
							set_variable = {
								name = math_e_sq
								value = var:math_e_exp
							}
							change_variable = {
								name = math_e_sq
								multiply = var:math_e_exp
							}
							set_variable = {
								name = math_e_fct
								value = 2
							}
							set_variable = {
								name = math_e_fctl
								value = 2
							}
							set_variable = {
								name = math_e_a1
								value = var:math_e_sq
							}
							set_variable = {
								name = math_e_a2
								value = var:math_e_exp
							}
							set_variable = {
								name = math_e_a3
								value = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
							set_variable = {
								name = math_e_prec
								value = 3
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							while = {
								limit = {
									var:math_e_prec >= 1
								}
								change_variable = {
									name = math_e_prec
									subtract = 1
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_fctl
									add = 1
								}
								change_variable = {
									name = math_e_fct
									multiply = var:math_e_fctl
								}
								change_variable = {
									name = math_e_a1
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a2
									multiply = var:math_e_sq
								}
								change_variable = {
									name = math_e_a3
									add = 2
								}
								set_variable = {
									name = math_e_tmp
									value = var:math_e_a2
								}
								change_variable = {
									name = math_e_tmp
									multiply = var:math_e_a3
								}
								change_variable = {
									name = math_e_tmp
									add = var:math_e_a1
								}
								change_variable = {
									name = math_e_tmp
									divide = var:math_e_fct
								}
								change_variable = {
									name = math_e_sm
									add = var:math_e_tmp
								}
							}
						}
						change_variable = {
							name = math_pow_e
							multiply = var:math_e_sm
						}
						remove_variable = math_e_sm
						remove_variable = math_e_tmp
						remove_variable = math_e_a1
						remove_variable = math_e_a2
						remove_variable = math_e_a3
						remove_variable = math_e_fctl
						remove_variable = math_e_fct
						remove_variable = math_e_prec
						remove_variable = math_e_sq
						remove_variable = math_e_exp
						change_variable = {
							name = prod_update_instances_t
							multiply = var:math_pow_e
						}
						remove_variable = math_pow_ln
						remove_variable = math_pow_e
					}
				}
				else = {
					set_variable = {
						name = prod_update_instances_t
						value = 0
					}
				}
				remove_variable = math_pow_base
				remove_variable = math_pow_exp
				remove_variable = math_root_exp
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_old_food
					value = var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_old_food
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_old_fiber
					value = var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_old_fiber
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_old_fuel
					value = var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_old_fuel
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_old_pottery
					value = var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_old_pottery
					multiply = var:prod_update_instances_t
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_old_textile
					value = var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_old_textile
					multiply = var:prod_update_instances_t
				}
			}
			remove_variable = prod_update_instances_t
			remove_variable = prod_update_instances_tt
		}
		set_global_variable = {
			name = prod_update_instances_labor
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_farm
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_pasture
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_forest
			value = 0
		}
		set_global_variable = {
			name = prod_update_instances_workshop
			value = 0
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_labor
				value = var:prod_template.var:prod_labor
			}
			set_variable = {
				name = prod_land
				value = var:prod_template.var:prod_land
			}
			change_variable = {
				name = prod_labor
				multiply = var:prod_size
			}
			change_variable = {
				name = prod_land
				multiply = var:prod_size
			}
			change_global_variable = {
				name = prod_update_instances_labor
				add = var:prod_labor
			}
			var:prod_template = {
				if = {
					limit = {
						has_character_flag = prod_land_farm
					}
					change_global_variable = {
						name = prod_update_instances_farm
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_pasture
					}
					change_global_variable = {
						name = prod_update_instances_pasture
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_forest
					}
					change_global_variable = {
						name = prod_update_instances_forest
						add = prev.var:prod_land
					}
				}
				else_if = {
					limit = {
						has_character_flag = prod_land_workshop
					}
					change_global_variable = {
						name = prod_update_instances_workshop
						add = prev.var:prod_land
					}
				}
			}
		}
		if = {
			limit = {
				var:pop_total = {
					compare_value >= global_var:prod_update_instances_labor
				}
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
			}
		}
		else_if = {
			limit = {
				var:pop_total = 0
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_labor
			}
			every_in_list = {
				variable = prod_instances
				set_variable = {
					name = prod_labor_actual
					value = var:prod_labor
				}
				change_variable = {
					name = prod_labor_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:farm_total = {
					compare_value >= global_var:prod_update_instances_farm
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:farm_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:farm_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_farm
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_farm
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:pasture_total = {
					compare_value >= global_var:prod_update_instances_pasture
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:pasture_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:pasture_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_pasture
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_pasture
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:forest_total = {
					compare_value >= global_var:prod_update_instances_forest
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:forest_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:forest_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_forest
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_forest
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		if = {
			limit = {
				var:workshop_total = {
					compare_value >= global_var:prod_update_instances_workshop
				}
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
			}
		}
		else_if = {
			limit = {
				var:workshop_total = 0
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = 0
				}
			}
		}
		else = {
			set_variable = {
				name = prod_update_instances_fill
				value = var:workshop_total
			}
			change_variable = {
				name = prod_update_instances_fill
				divide = global_var:prod_update_instances_workshop
			}
			every_in_list = {
				limit = {
					var:prod_template = {
						has_character_flag = prod_land_workshop
					}
				}
				variable = prod_instances
				set_variable = {
					name = prod_land_actual
					value = var:prod_land
				}
				change_variable = {
					name = prod_land_actual
					multiply = prev.var:prod_update_instances_fill
				}
			}
			remove_variable = prod_update_instances_fill
		}
		every_in_list = {
			variable = prod_instances
			set_variable = {
				name = prod_size_actual
				value = 1
			}
			if = {
				limit = {
					var:prod_labor = {
						compare_value != prev.var:prod_labor_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_labor_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_labor
				}
			}
			if = {
				limit = {
					var:prod_land = {
						compare_value != prev.var:prod_land_actual
					}
				}
				change_variable = {
					name = prod_size_actual
					multiply = var:prod_land_actual
				}
				change_variable = {
					name = prod_size_actual
					divide = var:prod_land
				}
			}
			set_variable = {
				name = math_pow_base
				value = var:prod_size_actual
			}
			set_variable = {
				name = math_pow_exp
				value = 0.5
			}
			if = {
				limit = {
					has_variable = math_pow_base
					var:math_pow_base != 0
				}
				set_variable = {
					name = prod_size_actual
					value = 1
				}
				while = {
					limit = {
						var:math_pow_exp >= 1
					}
					change_variable = {
						name = math_pow_exp
						subtract = 1
					}
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_base
					}
				}
				while = {
					limit = {
						var:math_pow_exp < 0
					}
					change_variable = {
						name = math_pow_exp
						add = 1
					}
					change_variable = {
						name = prod_size_actual
						divide = var:math_pow_base
					}
				}
				if = {
					limit = {
						var:math_pow_exp != 0
					}
					set_variable = {
						name = math_ln_inp
						value = var:math_pow_base
					}
					set_variable = {
						name = math_pow_ln
						value = 0
					}
					set_variable = {
						name = math_ln_k
						value = 0
					}
					set_variable = {
						name = math_ln_div
						value = 10000
					}
					while = {
						limit = {
							var:math_ln_inp >= 2
						}
						change_variable = {
							name = math_ln_inp
							divide = 2
						}
						change_variable = {
							name = math_pow_ln
							add = 6931.472
						}
					}
					while = {
						limit = {
							var:math_ln_inp < 1
						}
						change_variable = {
							name = math_ln_inp
							multiply = 2
						}
						change_variable = {
							name = math_pow_ln
							subtract = 6931.472
						}
					}
					change_variable = {
						name = math_ln_inp
						multiply = 10000
					}
					while = {
						limit = {
							var:math_ln_k < 10
						}
						change_variable = {
							name = math_ln_k
							add = 1
						}
						change_variable = {
							name = math_ln_div
							divide = 2
						}
						set_variable = {
							name = math_ln_t
							value = 10000
						}
						change_variable = {
							name = math_ln_t
							add = var:math_ln_div
						}
						if = {
							limit = {
								var:math_ln_inp = {
									compare_value >= prev.var:math_ln_t
								}
							}
							change_variable = {
								name = math_ln_inp
								divide = var:math_ln_t
							}
							change_variable = {
								name = math_ln_inp
								multiply = 10000
							}
							set_variable = {
								name = math_lt_ind
								value = var:math_ln_k
							}
							if = {
								limit = {
									var:math_lt_ind >= 6
								}
								if = {
									limit = {
										var:math_lt_ind >= 8
									}
									if = {
										limit = {
											var:math_lt_ind >= 9
										}
										if = {
											limit = {
												var:math_lt_ind >= 10
											}
											set_variable = {
												name = math_ln_lt
												value = 9.761
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 19.512
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 38.986
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 7
										}
										set_variable = {
											name = math_ln_lt
											value = 77.821
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 155.042
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										var:math_lt_ind >= 3
									}
									if = {
										limit = {
											var:math_lt_ind >= 4
										}
										if = {
											limit = {
												var:math_lt_ind >= 5
											}
											set_variable = {
												name = math_ln_lt
												value = 307.717
											}
										}
										else = {
											set_variable = {
												name = math_ln_lt
												value = 606.246
											}
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 1177.83
										}
									}
								}
								else = {
									if = {
										limit = {
											var:math_lt_ind >= 2
										}
										set_variable = {
											name = math_ln_lt
											value = 2231.436
										}
									}
									else = {
										set_variable = {
											name = math_ln_lt
											value = 4054.651
										}
									}
								}
							}
							remove_variable = math_lt_ind
							change_variable = {
								name = math_pow_ln
								add = var:math_ln_lt
							}
						}
					}
					change_variable = {
						name = math_pow_ln
						divide = 10000
					}
					remove_variable = math_ln_k
					remove_variable = math_ln_div
					remove_variable = math_ln_t
					remove_variable = math_ln_lt
					remove_variable = math_ln_inp
					change_variable = {
						name = math_pow_exp
						multiply = var:math_pow_ln
					}
					set_variable = {
						name = math_e_exp
						value = var:math_pow_exp
					}
					set_variable = {
						name = math_pow_e
						value = 1
					}
					while = {
						limit = {
							var:math_e_exp >= 1
						}
						change_variable = {
							name = math_e_exp
							subtract = 1
						}
						change_variable = {
							name = math_pow_e
							multiply = 2.718
						}
					}
					while = {
						limit = {
							var:math_e_exp < 0
						}
						change_variable = {
							name = math_e_exp
							add = 1
						}
						change_variable = {
							name = math_pow_e
							divide = 2.718
						}
					}
					set_variable = {
						name = math_e_sm
						value = 1
					}
					if = {
						limit = {
							var:math_e_exp != 0
						}
						set_variable = {
							name = math_e_sq
							value = var:math_e_exp
						}
						change_variable = {
							name = math_e_sq
							multiply = var:math_e_exp
						}
						set_variable = {
							name = math_e_fct
							value = 2
						}
						set_variable = {
							name = math_e_fctl
							value = 2
						}
						set_variable = {
							name = math_e_a1
							value = var:math_e_sq
						}
						set_variable = {
							name = math_e_a2
							value = var:math_e_exp
						}
						set_variable = {
							name = math_e_a3
							value = 2
						}
						set_variable = {
							name = math_e_tmp
							value = var:math_e_a2
						}
						change_variable = {
							name = math_e_tmp
							multiply = var:math_e_a3
						}
						change_variable = {
							name = math_e_tmp
							add = var:math_e_a1
						}
						change_variable = {
							name = math_e_tmp
							divide = var:math_e_fct
						}
						change_variable = {
							name = math_e_sm
							add = var:math_e_tmp
						}
						set_variable = {
							name = math_e_prec
							value = 3
						}
						change_variable = {
							name = math_e_prec
							subtract = 1
						}
						while = {
							limit = {
								var:math_e_prec >= 1
							}
							change_variable = {
								name = math_e_prec
								subtract = 1
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_fctl
								add = 1
							}
							change_variable = {
								name = math_e_fct
								multiply = var:math_e_fctl
							}
							change_variable = {
								name = math_e_a1
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a2
								multiply = var:math_e_sq
							}
							change_variable = {
								name = math_e_a3
								add = 2
							}
							set_variable = {
								name = math_e_tmp
								value = var:math_e_a2
							}
							change_variable = {
								name = math_e_tmp
								multiply = var:math_e_a3
							}
							change_variable = {
								name = math_e_tmp
								add = var:math_e_a1
							}
							change_variable = {
								name = math_e_tmp
								divide = var:math_e_fct
							}
							change_variable = {
								name = math_e_sm
								add = var:math_e_tmp
							}
						}
					}
					change_variable = {
						name = math_pow_e
						multiply = var:math_e_sm
					}
					remove_variable = math_e_sm
					remove_variable = math_e_tmp
					remove_variable = math_e_a1
					remove_variable = math_e_a2
					remove_variable = math_e_a3
					remove_variable = math_e_fctl
					remove_variable = math_e_fct
					remove_variable = math_e_prec
					remove_variable = math_e_sq
					remove_variable = math_e_exp
					change_variable = {
						name = prod_size_actual
						multiply = var:math_pow_e
					}
					remove_variable = math_pow_ln
					remove_variable = math_pow_e
				}
			}
			else = {
				set_variable = {
					name = prod_size_actual
					value = 0
				}
			}
			remove_variable = math_pow_base
			remove_variable = math_pow_exp
			change_variable = {
				name = prod_size_actual
				multiply = var:prod_size
			}
			if = {
				limit = {
					has_variable = prod_dmnd_food
				}
				set_variable = {
					name = prod_dmnd_food
					value = var:prod_template.var:prod_dmnd_food
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_food
					multiply = var:prod_location.var:modi_prod_dmnd_food
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fuel
				}
				set_variable = {
					name = prod_dmnd_fuel
					value = var:prod_template.var:prod_dmnd_fuel
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fuel
					multiply = var:prod_location.var:modi_prod_dmnd_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_fiber
				}
				set_variable = {
					name = prod_dmnd_fiber
					value = var:prod_template.var:prod_dmnd_fiber
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_fiber
					multiply = var:prod_location.var:modi_prod_dmnd_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_pottery
				}
				set_variable = {
					name = prod_dmnd_pottery
					value = var:prod_template.var:prod_dmnd_pottery
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_pottery
					multiply = var:prod_location.var:modi_prod_dmnd_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_dmnd_textile
				}
				set_variable = {
					name = prod_dmnd_textile
					value = var:prod_template.var:prod_dmnd_textile
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_dmnd_textile
					multiply = var:prod_location.var:modi_prod_dmnd_textile
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_food
				}
				set_variable = {
					name = prod_sply_food
					value = var:prod_template.var:prod_sply_food
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_food
					multiply = var:prod_location.var:modi_prod_sply_food
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fuel
				}
				set_variable = {
					name = prod_sply_fuel
					value = var:prod_template.var:prod_sply_fuel
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fuel
					multiply = var:prod_location.var:modi_prod_sply_fuel
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_fiber
				}
				set_variable = {
					name = prod_sply_fiber
					value = var:prod_template.var:prod_sply_fiber
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_fiber
					multiply = var:prod_location.var:modi_prod_sply_fiber
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_pottery
				}
				set_variable = {
					name = prod_sply_pottery
					value = var:prod_template.var:prod_sply_pottery
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_pottery
					multiply = var:prod_location.var:modi_prod_sply_pottery
				}
			}
			if = {
				limit = {
					has_variable = prod_sply_textile
				}
				set_variable = {
					name = prod_sply_textile
					value = var:prod_template.var:prod_sply_textile
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_size_actual
				}
				change_variable = {
					name = prod_sply_textile
					multiply = var:prod_location.var:modi_prod_sply_textile
				}
			}
		}
	}
}
every_county = {
	limit = {
		is_valid_prov = yes
	}
	set_variable = {
		name = pop_calorie_food
		value = pop_calorie_food
	}
	set_variable = {
		name = pop_calorie_fuel
		value = pop_calorie_fuel
	}
	set_variable = {
		name = pop_calorie_fiber
		value = pop_calorie_fiber
	}
	set_variable = {
		name = pop_calorie_pottery
		value = pop_calorie_pottery
	}
	set_variable = {
		name = pop_calorie_textile
		value = pop_calorie_textile
	}
	change_variable = {
		name = pop_calorie_food
		multiply = 10
	}
	change_variable = {
		name = pop_calorie_fuel
		multiply = 10
	}
	change_variable = {
		name = pop_calorie_fiber
		multiply = 10
	}
	change_variable = {
		name = pop_calorie_pottery
		multiply = 10
	}
	change_variable = {
		name = pop_calorie_textile
		multiply = 10
	}
	change_variable = {
		name = pop_calorie_food
		divide = var:trade_price_food
	}
	change_variable = {
		name = pop_calorie_fuel
		divide = var:trade_price_fuel
	}
	change_variable = {
		name = pop_calorie_fiber
		divide = var:trade_price_fiber
	}
	change_variable = {
		name = pop_calorie_pottery
		divide = var:trade_price_pottery
	}
	change_variable = {
		name = pop_calorie_textile
		divide = var:trade_price_textile
	}
	change_variable = {
		name = pop_calorie_food
		multiply = var:pop_calorie_food
	}
	change_variable = {
		name = pop_calorie_fuel
		multiply = var:pop_calorie_fuel
	}
	change_variable = {
		name = pop_calorie_fiber
		multiply = var:pop_calorie_fiber
	}
	change_variable = {
		name = pop_calorie_pottery
		multiply = var:pop_calorie_pottery
	}
	change_variable = {
		name = pop_calorie_textile
		multiply = var:pop_calorie_textile
	}
	set_variable = {
		name = pop_set_demand_t
		value = 0
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_calorie_food
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_calorie_fuel
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_calorie_fiber
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_calorie_pottery
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_calorie_textile
	}
	change_variable = {
		name = pop_calorie_food
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_calorie_fuel
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_calorie_fiber
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_calorie_pottery
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_calorie_textile
		divide = var:pop_set_demand_t
	}
	set_variable = {
		name = pop_calorie_cost
		value = 0
	}
	if = {
		limit = {
			has_variable = pop_calorie_food
			var:pop_calorie_food > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_calorie_food
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_calorie_food
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_food
		}
		change_variable = {
			name = pop_calorie_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_calorie_fuel
			var:pop_calorie_fuel > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_calorie_fuel
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_calorie_fuel
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_fuel
		}
		change_variable = {
			name = pop_calorie_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_calorie_fiber
			var:pop_calorie_fiber > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_calorie_fiber
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_calorie_fiber
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_fiber
		}
		change_variable = {
			name = pop_calorie_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_calorie_pottery
			var:pop_calorie_pottery > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_calorie_pottery
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_calorie_pottery
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_pottery
		}
		change_variable = {
			name = pop_calorie_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_calorie_textile
			var:pop_calorie_textile > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_calorie_textile
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_calorie_textile
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_textile
		}
		change_variable = {
			name = pop_calorie_cost
			add = var:pop_set_demand_t
		}
	}
	remove_variable = pop_set_demand_t
	set_variable = {
		name = pop_nutrient_food
		value = pop_nutrient_food
	}
	set_variable = {
		name = pop_nutrient_fuel
		value = pop_nutrient_fuel
	}
	set_variable = {
		name = pop_nutrient_fiber
		value = pop_nutrient_fiber
	}
	set_variable = {
		name = pop_nutrient_pottery
		value = pop_nutrient_pottery
	}
	set_variable = {
		name = pop_nutrient_textile
		value = pop_nutrient_textile
	}
	change_variable = {
		name = pop_nutrient_food
		multiply = 10
	}
	change_variable = {
		name = pop_nutrient_fuel
		multiply = 10
	}
	change_variable = {
		name = pop_nutrient_fiber
		multiply = 10
	}
	change_variable = {
		name = pop_nutrient_pottery
		multiply = 10
	}
	change_variable = {
		name = pop_nutrient_textile
		multiply = 10
	}
	change_variable = {
		name = pop_nutrient_food
		divide = var:trade_price_food
	}
	change_variable = {
		name = pop_nutrient_fuel
		divide = var:trade_price_fuel
	}
	change_variable = {
		name = pop_nutrient_fiber
		divide = var:trade_price_fiber
	}
	change_variable = {
		name = pop_nutrient_pottery
		divide = var:trade_price_pottery
	}
	change_variable = {
		name = pop_nutrient_textile
		divide = var:trade_price_textile
	}
	change_variable = {
		name = pop_nutrient_food
		multiply = var:pop_nutrient_food
	}
	change_variable = {
		name = pop_nutrient_fuel
		multiply = var:pop_nutrient_fuel
	}
	change_variable = {
		name = pop_nutrient_fiber
		multiply = var:pop_nutrient_fiber
	}
	change_variable = {
		name = pop_nutrient_pottery
		multiply = var:pop_nutrient_pottery
	}
	change_variable = {
		name = pop_nutrient_textile
		multiply = var:pop_nutrient_textile
	}
	set_variable = {
		name = pop_set_demand_t
		value = 0
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_nutrient_food
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_nutrient_fuel
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_nutrient_fiber
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_nutrient_pottery
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_nutrient_textile
	}
	change_variable = {
		name = pop_nutrient_food
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_nutrient_fuel
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_nutrient_fiber
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_nutrient_pottery
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_nutrient_textile
		divide = var:pop_set_demand_t
	}
	set_variable = {
		name = pop_nutrient_cost
		value = 0
	}
	if = {
		limit = {
			has_variable = pop_nutrient_food
			var:pop_nutrient_food > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_nutrient_food
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_nutrient_food
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_food
		}
		change_variable = {
			name = pop_nutrient_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_nutrient_fuel
			var:pop_nutrient_fuel > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_nutrient_fuel
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_nutrient_fuel
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_fuel
		}
		change_variable = {
			name = pop_nutrient_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_nutrient_fiber
			var:pop_nutrient_fiber > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_nutrient_fiber
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_nutrient_fiber
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_fiber
		}
		change_variable = {
			name = pop_nutrient_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_nutrient_pottery
			var:pop_nutrient_pottery > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_nutrient_pottery
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_nutrient_pottery
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_pottery
		}
		change_variable = {
			name = pop_nutrient_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_nutrient_textile
			var:pop_nutrient_textile > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_nutrient_textile
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_nutrient_textile
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_textile
		}
		change_variable = {
			name = pop_nutrient_cost
			add = var:pop_set_demand_t
		}
	}
	remove_variable = pop_set_demand_t
	set_variable = {
		name = pop_comfort_food
		value = pop_comfort_food
	}
	set_variable = {
		name = pop_comfort_fuel
		value = pop_comfort_fuel
	}
	set_variable = {
		name = pop_comfort_fiber
		value = pop_comfort_fiber
	}
	set_variable = {
		name = pop_comfort_pottery
		value = pop_comfort_pottery
	}
	set_variable = {
		name = pop_comfort_textile
		value = pop_comfort_textile
	}
	change_variable = {
		name = pop_comfort_food
		multiply = 10
	}
	change_variable = {
		name = pop_comfort_fuel
		multiply = 10
	}
	change_variable = {
		name = pop_comfort_fiber
		multiply = 10
	}
	change_variable = {
		name = pop_comfort_pottery
		multiply = 10
	}
	change_variable = {
		name = pop_comfort_textile
		multiply = 10
	}
	change_variable = {
		name = pop_comfort_food
		divide = var:trade_price_food
	}
	change_variable = {
		name = pop_comfort_fuel
		divide = var:trade_price_fuel
	}
	change_variable = {
		name = pop_comfort_fiber
		divide = var:trade_price_fiber
	}
	change_variable = {
		name = pop_comfort_pottery
		divide = var:trade_price_pottery
	}
	change_variable = {
		name = pop_comfort_textile
		divide = var:trade_price_textile
	}
	change_variable = {
		name = pop_comfort_food
		multiply = var:pop_comfort_food
	}
	change_variable = {
		name = pop_comfort_fuel
		multiply = var:pop_comfort_fuel
	}
	change_variable = {
		name = pop_comfort_fiber
		multiply = var:pop_comfort_fiber
	}
	change_variable = {
		name = pop_comfort_pottery
		multiply = var:pop_comfort_pottery
	}
	change_variable = {
		name = pop_comfort_textile
		multiply = var:pop_comfort_textile
	}
	set_variable = {
		name = pop_set_demand_t
		value = 0
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_comfort_food
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_comfort_fuel
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_comfort_fiber
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_comfort_pottery
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_comfort_textile
	}
	change_variable = {
		name = pop_comfort_food
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_comfort_fuel
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_comfort_fiber
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_comfort_pottery
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_comfort_textile
		divide = var:pop_set_demand_t
	}
	set_variable = {
		name = pop_comfort_cost
		value = 0
	}
	if = {
		limit = {
			has_variable = pop_comfort_food
			var:pop_comfort_food > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_comfort_food
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_comfort_food
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_food
		}
		change_variable = {
			name = pop_comfort_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_comfort_fuel
			var:pop_comfort_fuel > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_comfort_fuel
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_comfort_fuel
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_fuel
		}
		change_variable = {
			name = pop_comfort_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_comfort_fiber
			var:pop_comfort_fiber > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_comfort_fiber
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_comfort_fiber
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_fiber
		}
		change_variable = {
			name = pop_comfort_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_comfort_pottery
			var:pop_comfort_pottery > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_comfort_pottery
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_comfort_pottery
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_pottery
		}
		change_variable = {
			name = pop_comfort_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_comfort_textile
			var:pop_comfort_textile > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_comfort_textile
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_comfort_textile
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_textile
		}
		change_variable = {
			name = pop_comfort_cost
			add = var:pop_set_demand_t
		}
	}
	remove_variable = pop_set_demand_t
	set_variable = {
		name = pop_luxury_food
		value = pop_luxury_food
	}
	set_variable = {
		name = pop_luxury_fuel
		value = pop_luxury_fuel
	}
	set_variable = {
		name = pop_luxury_fiber
		value = pop_luxury_fiber
	}
	set_variable = {
		name = pop_luxury_pottery
		value = pop_luxury_pottery
	}
	set_variable = {
		name = pop_luxury_textile
		value = pop_luxury_textile
	}
	change_variable = {
		name = pop_luxury_food
		multiply = 10
	}
	change_variable = {
		name = pop_luxury_fuel
		multiply = 10
	}
	change_variable = {
		name = pop_luxury_fiber
		multiply = 10
	}
	change_variable = {
		name = pop_luxury_pottery
		multiply = 10
	}
	change_variable = {
		name = pop_luxury_textile
		multiply = 10
	}
	change_variable = {
		name = pop_luxury_food
		divide = var:trade_price_food
	}
	change_variable = {
		name = pop_luxury_fuel
		divide = var:trade_price_fuel
	}
	change_variable = {
		name = pop_luxury_fiber
		divide = var:trade_price_fiber
	}
	change_variable = {
		name = pop_luxury_pottery
		divide = var:trade_price_pottery
	}
	change_variable = {
		name = pop_luxury_textile
		divide = var:trade_price_textile
	}
	change_variable = {
		name = pop_luxury_food
		multiply = var:pop_luxury_food
	}
	change_variable = {
		name = pop_luxury_fuel
		multiply = var:pop_luxury_fuel
	}
	change_variable = {
		name = pop_luxury_fiber
		multiply = var:pop_luxury_fiber
	}
	change_variable = {
		name = pop_luxury_pottery
		multiply = var:pop_luxury_pottery
	}
	change_variable = {
		name = pop_luxury_textile
		multiply = var:pop_luxury_textile
	}
	set_variable = {
		name = pop_set_demand_t
		value = 0
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_luxury_food
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_luxury_fuel
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_luxury_fiber
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_luxury_pottery
	}
	change_variable = {
		name = pop_set_demand_t
		add = var:pop_luxury_textile
	}
	change_variable = {
		name = pop_luxury_food
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_luxury_fuel
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_luxury_fiber
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_luxury_pottery
		divide = var:pop_set_demand_t
	}
	change_variable = {
		name = pop_luxury_textile
		divide = var:pop_set_demand_t
	}
	set_variable = {
		name = pop_luxury_cost
		value = 0
	}
	if = {
		limit = {
			has_variable = pop_luxury_food
			var:pop_luxury_food > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_luxury_food
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_luxury_food
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_food
		}
		change_variable = {
			name = pop_luxury_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_luxury_fuel
			var:pop_luxury_fuel > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_luxury_fuel
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_luxury_fuel
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_fuel
		}
		change_variable = {
			name = pop_luxury_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_luxury_fiber
			var:pop_luxury_fiber > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_luxury_fiber
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_luxury_fiber
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_fiber
		}
		change_variable = {
			name = pop_luxury_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_luxury_pottery
			var:pop_luxury_pottery > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_luxury_pottery
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_luxury_pottery
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_pottery
		}
		change_variable = {
			name = pop_luxury_cost
			add = var:pop_set_demand_t
		}
	}
	if = {
		limit = {
			has_variable = pop_luxury_textile
			var:pop_luxury_textile > 0
		}
		set_variable = {
			name = pop_set_demand_t
			value = var:pop_luxury_textile
		}
		change_variable = {
			name = pop_set_demand_t
			divide = pop_luxury_textile
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:trade_price_textile
		}
		change_variable = {
			name = pop_luxury_cost
			add = var:pop_set_demand_t
		}
	}
	remove_variable = pop_set_demand_t
	set_variable = {
		name = pop_pay
		value = 0
	}
	set_variable = {
		name = pop_set_need_county_calorie
		value = 0
	}
	set_variable = {
		name = pop_set_need_county_nutrient
		value = 0
	}
	set_variable = {
		name = pop_set_need_county_comfort
		value = 0
	}
	set_variable = {
		name = pop_set_need_county_luxury
		value = 0
	}
	set_variable = {
		name = pop_set_need_county_cost_prev
		value = 0
	}
	if = {
		limit = {
			OR = {
				NOT = {
					has_variable = pop_pay
				}
				var:pop_pay = 0
			}
		}
		set_variable = {
			name = pop_calorie
			value = 0.5
		}
		set_variable = {
			name = pop_nutrient
			value = 0.1
		}
		set_variable = {
			name = pop_comfort
			value = 0.02
		}
		set_variable = {
			name = pop_luxury
			value = 0
		}
	}
	else_if = {
		limit = {
			var:pop_pay = 1
		}
		set_variable = {
			name = pop_calorie
			value = 1
		}
		set_variable = {
			name = pop_nutrient
			value = 0.5
		}
		set_variable = {
			name = pop_comfort
			value = 0.1
		}
		set_variable = {
			name = pop_luxury
			value = 0.02
		}
	}
	else_if = {
		limit = {
			var:pop_pay = 2
		}
		set_variable = {
			name = pop_calorie
			value = 1
		}
		set_variable = {
			name = pop_nutrient
			value = 1
		}
		set_variable = {
			name = pop_comfort
			value = 0.5
		}
		set_variable = {
			name = pop_luxury
			value = 0.1
		}
	}
	else_if = {
		limit = {
			var:pop_pay = 3
		}
		set_variable = {
			name = pop_calorie
			value = 1
		}
		set_variable = {
			name = pop_nutrient
			value = 1
		}
		set_variable = {
			name = pop_comfort
			value = 1
		}
		set_variable = {
			name = pop_luxury
			value = 0.5
		}
	}
	else = {
		set_variable = {
			name = pop_calorie
			value = 1
		}
		set_variable = {
			name = pop_nutrient
			value = 1
		}
		set_variable = {
			name = pop_comfort
			value = 1
		}
		set_variable = {
			name = pop_luxury
			value = 1
		}
	}
	change_variable = {
		name = pop_calorie
		multiply = var:pop_total
	}
	change_variable = {
		name = pop_nutrient
		multiply = var:pop_total
	}
	change_variable = {
		name = pop_comfort
		multiply = var:pop_total
	}
	change_variable = {
		name = pop_luxury
		multiply = var:pop_total
	}
	change_variable = {
		name = pop_calorie
		multiply = var:modi_pop_calorie
	}
	change_variable = {
		name = pop_nutrient
		multiply = var:modi_pop_nutrient
	}
	change_variable = {
		name = pop_comfort
		multiply = var:modi_pop_comfort
	}
	change_variable = {
		name = pop_luxury
		multiply = var:modi_pop_luxury
	}
	set_variable = {
		name = pop_set_need_county_loop
	}
	while = {
		limit = {
			has_variable = pop_set_need_county_loop
		}
		set_variable = {
			name = pop_set_need_county_cost
			value = 0
		}
		set_variable = {
			name = pop_set_need_county_t
			value = var:pop_calorie
		}
		change_variable = {
			name = pop_set_need_county_t
			multiply = var:pop_calorie_cost
		}
		change_variable = {
			name = pop_set_need_county_cost
			add = var:pop_set_need_county_t
		}
		set_variable = {
			name = pop_set_need_county_t
			value = var:pop_nutrient
		}
		change_variable = {
			name = pop_set_need_county_t
			multiply = var:pop_nutrient_cost
		}
		change_variable = {
			name = pop_set_need_county_cost
			add = var:pop_set_need_county_t
		}
		set_variable = {
			name = pop_set_need_county_t
			value = var:pop_comfort
		}
		change_variable = {
			name = pop_set_need_county_t
			multiply = var:pop_comfort_cost
		}
		change_variable = {
			name = pop_set_need_county_cost
			add = var:pop_set_need_county_t
		}
		set_variable = {
			name = pop_set_need_county_t
			value = var:pop_luxury
		}
		change_variable = {
			name = pop_set_need_county_t
			multiply = var:pop_luxury_cost
		}
		change_variable = {
			name = pop_set_need_county_cost
			add = var:pop_set_need_county_t
		}
		set_variable = {
			name = pop_set_need_county_wealth
			value = var:pop_wealth
		}
		change_variable = {
			name = pop_set_need_county_wealth
			divide = 2
		}
		if = {
			limit = {
				has_variable = pop_set_need_county_wealth
				var:pop_set_need_county_wealth = {
					compare_value >= prev.var:pop_set_need_county_cost
				}
			}
			change_variable = {
				name = pop_pay
				add = 1
			}
			set_variable = {
				name = pop_set_need_county_calorie
				value = var:pop_calorie
			}
			set_variable = {
				name = pop_set_need_county_nutrient
				value = var:pop_nutrient
			}
			set_variable = {
				name = pop_set_need_county_comfort
				value = var:pop_comfort
			}
			set_variable = {
				name = pop_set_need_county_luxury
				value = var:pop_luxury
			}
			set_variable = {
				name = pop_set_need_county_cost_prev
				value = var:pop_set_need_county_cost
			}
			if = {
				limit = {
					OR = {
						NOT = {
							has_variable = pop_pay
						}
						var:pop_pay = 0
					}
				}
				set_variable = {
					name = pop_calorie
					value = 0.5
				}
				set_variable = {
					name = pop_nutrient
					value = 0.1
				}
				set_variable = {
					name = pop_comfort
					value = 0.02
				}
				set_variable = {
					name = pop_luxury
					value = 0
				}
			}
			else_if = {
				limit = {
					var:pop_pay = 1
				}
				set_variable = {
					name = pop_calorie
					value = 1
				}
				set_variable = {
					name = pop_nutrient
					value = 0.5
				}
				set_variable = {
					name = pop_comfort
					value = 0.1
				}
				set_variable = {
					name = pop_luxury
					value = 0.02
				}
			}
			else_if = {
				limit = {
					var:pop_pay = 2
				}
				set_variable = {
					name = pop_calorie
					value = 1
				}
				set_variable = {
					name = pop_nutrient
					value = 1
				}
				set_variable = {
					name = pop_comfort
					value = 0.5
				}
				set_variable = {
					name = pop_luxury
					value = 0.1
				}
			}
			else_if = {
				limit = {
					var:pop_pay = 3
				}
				set_variable = {
					name = pop_calorie
					value = 1
				}
				set_variable = {
					name = pop_nutrient
					value = 1
				}
				set_variable = {
					name = pop_comfort
					value = 1
				}
				set_variable = {
					name = pop_luxury
					value = 0.5
				}
			}
			else = {
				set_variable = {
					name = pop_calorie
					value = 1
				}
				set_variable = {
					name = pop_nutrient
					value = 1
				}
				set_variable = {
					name = pop_comfort
					value = 1
				}
				set_variable = {
					name = pop_luxury
					value = 1
				}
			}
			change_variable = {
				name = pop_calorie
				multiply = var:pop_total
			}
			change_variable = {
				name = pop_nutrient
				multiply = var:pop_total
			}
			change_variable = {
				name = pop_comfort
				multiply = var:pop_total
			}
			change_variable = {
				name = pop_luxury
				multiply = var:pop_total
			}
			change_variable = {
				name = pop_calorie
				multiply = var:modi_pop_calorie
			}
			change_variable = {
				name = pop_nutrient
				multiply = var:modi_pop_nutrient
			}
			change_variable = {
				name = pop_comfort
				multiply = var:modi_pop_comfort
			}
			change_variable = {
				name = pop_luxury
				multiply = var:modi_pop_luxury
			}
			if = {
				limit = {
					var:pop_pay = 4
				}
				remove_variable = pop_set_need_county_loop
			}
		}
		else = {
			remove_variable = pop_set_need_county_loop
			set_variable = {
				name = pop_set_need_county_t
				value = var:pop_set_need_county_cost
			}
			change_variable = {
				name = pop_set_need_county_t
				subtract = var:pop_set_need_county_cost_prev
			}
			change_variable = {
				name = pop_set_need_county_wealth
				subtract = var:pop_set_need_county_cost_prev
			}
			change_variable = {
				name = pop_set_need_county_wealth
				divide = var:pop_set_need_county_t
			}
			change_variable = {
				name = pop_calorie
				subtract = var:pop_set_need_county_calorie
			}
			change_variable = {
				name = pop_nutrient
				subtract = var:pop_set_need_county_nutrient
			}
			change_variable = {
				name = pop_comfort
				subtract = var:pop_set_need_county_comfort
			}
			change_variable = {
				name = pop_luxury
				subtract = var:pop_set_need_county_luxury
			}
			change_variable = {
				name = pop_calorie
				multiply = var:pop_set_need_county_wealth
			}
			change_variable = {
				name = pop_nutrient
				multiply = var:pop_set_need_county_wealth
			}
			change_variable = {
				name = pop_comfort
				multiply = var:pop_set_need_county_wealth
			}
			change_variable = {
				name = pop_luxury
				multiply = var:pop_set_need_county_wealth
			}
			change_variable = {
				name = pop_calorie
				add = var:pop_set_need_county_calorie
			}
			change_variable = {
				name = pop_nutrient
				add = var:pop_set_need_county_nutrient
			}
			change_variable = {
				name = pop_comfort
				add = var:pop_set_need_county_comfort
			}
			change_variable = {
				name = pop_luxury
				add = var:pop_set_need_county_luxury
			}
		}
	}
	remove_variable = pop_set_need_county_calorie
	remove_variable = pop_set_need_county_nutrient
	remove_variable = pop_set_need_county_comfort
	remove_variable = pop_set_need_county_luxury
	remove_variable = pop_set_need_county_cost_prev
	remove_variable = pop_set_need_county_cost
	remove_variable = pop_set_need_county_t
	remove_variable = pop_set_need_county_wealth
	if = {
		limit = {
			has_variable = pop_calorie_food
			var:pop_calorie_food > 0
		}
		change_variable = {
			name = pop_calorie_food
			multiply = var:pop_calorie
		}
		change_variable = {
			name = pop_calorie_food
			divide = pop_calorie_food
		}
	}
	if = {
		limit = {
			has_variable = pop_calorie_fuel
			var:pop_calorie_fuel > 0
		}
		change_variable = {
			name = pop_calorie_fuel
			multiply = var:pop_calorie
		}
		change_variable = {
			name = pop_calorie_fuel
			divide = pop_calorie_fuel
		}
	}
	if = {
		limit = {
			has_variable = pop_calorie_fiber
			var:pop_calorie_fiber > 0
		}
		change_variable = {
			name = pop_calorie_fiber
			multiply = var:pop_calorie
		}
		change_variable = {
			name = pop_calorie_fiber
			divide = pop_calorie_fiber
		}
	}
	if = {
		limit = {
			has_variable = pop_calorie_pottery
			var:pop_calorie_pottery > 0
		}
		change_variable = {
			name = pop_calorie_pottery
			multiply = var:pop_calorie
		}
		change_variable = {
			name = pop_calorie_pottery
			divide = pop_calorie_pottery
		}
	}
	if = {
		limit = {
			has_variable = pop_calorie_textile
			var:pop_calorie_textile > 0
		}
		change_variable = {
			name = pop_calorie_textile
			multiply = var:pop_calorie
		}
		change_variable = {
			name = pop_calorie_textile
			divide = pop_calorie_textile
		}
	}
	if = {
		limit = {
			has_variable = pop_nutrient_food
			var:pop_nutrient_food > 0
		}
		change_variable = {
			name = pop_nutrient_food
			multiply = var:pop_nutrient
		}
		change_variable = {
			name = pop_nutrient_food
			divide = pop_nutrient_food
		}
	}
	if = {
		limit = {
			has_variable = pop_nutrient_fuel
			var:pop_nutrient_fuel > 0
		}
		change_variable = {
			name = pop_nutrient_fuel
			multiply = var:pop_nutrient
		}
		change_variable = {
			name = pop_nutrient_fuel
			divide = pop_nutrient_fuel
		}
	}
	if = {
		limit = {
			has_variable = pop_nutrient_fiber
			var:pop_nutrient_fiber > 0
		}
		change_variable = {
			name = pop_nutrient_fiber
			multiply = var:pop_nutrient
		}
		change_variable = {
			name = pop_nutrient_fiber
			divide = pop_nutrient_fiber
		}
	}
	if = {
		limit = {
			has_variable = pop_nutrient_pottery
			var:pop_nutrient_pottery > 0
		}
		change_variable = {
			name = pop_nutrient_pottery
			multiply = var:pop_nutrient
		}
		change_variable = {
			name = pop_nutrient_pottery
			divide = pop_nutrient_pottery
		}
	}
	if = {
		limit = {
			has_variable = pop_nutrient_textile
			var:pop_nutrient_textile > 0
		}
		change_variable = {
			name = pop_nutrient_textile
			multiply = var:pop_nutrient
		}
		change_variable = {
			name = pop_nutrient_textile
			divide = pop_nutrient_textile
		}
	}
	if = {
		limit = {
			has_variable = pop_comfort_food
			var:pop_comfort_food > 0
		}
		change_variable = {
			name = pop_comfort_food
			multiply = var:pop_comfort
		}
		change_variable = {
			name = pop_comfort_food
			divide = pop_comfort_food
		}
	}
	if = {
		limit = {
			has_variable = pop_comfort_fuel
			var:pop_comfort_fuel > 0
		}
		change_variable = {
			name = pop_comfort_fuel
			multiply = var:pop_comfort
		}
		change_variable = {
			name = pop_comfort_fuel
			divide = pop_comfort_fuel
		}
	}
	if = {
		limit = {
			has_variable = pop_comfort_fiber
			var:pop_comfort_fiber > 0
		}
		change_variable = {
			name = pop_comfort_fiber
			multiply = var:pop_comfort
		}
		change_variable = {
			name = pop_comfort_fiber
			divide = pop_comfort_fiber
		}
	}
	if = {
		limit = {
			has_variable = pop_comfort_pottery
			var:pop_comfort_pottery > 0
		}
		change_variable = {
			name = pop_comfort_pottery
			multiply = var:pop_comfort
		}
		change_variable = {
			name = pop_comfort_pottery
			divide = pop_comfort_pottery
		}
	}
	if = {
		limit = {
			has_variable = pop_comfort_textile
			var:pop_comfort_textile > 0
		}
		change_variable = {
			name = pop_comfort_textile
			multiply = var:pop_comfort
		}
		change_variable = {
			name = pop_comfort_textile
			divide = pop_comfort_textile
		}
	}
	if = {
		limit = {
			has_variable = pop_luxury_food
			var:pop_luxury_food > 0
		}
		change_variable = {
			name = pop_luxury_food
			multiply = var:pop_luxury
		}
		change_variable = {
			name = pop_luxury_food
			divide = pop_luxury_food
		}
	}
	if = {
		limit = {
			has_variable = pop_luxury_fuel
			var:pop_luxury_fuel > 0
		}
		change_variable = {
			name = pop_luxury_fuel
			multiply = var:pop_luxury
		}
		change_variable = {
			name = pop_luxury_fuel
			divide = pop_luxury_fuel
		}
	}
	if = {
		limit = {
			has_variable = pop_luxury_fiber
			var:pop_luxury_fiber > 0
		}
		change_variable = {
			name = pop_luxury_fiber
			multiply = var:pop_luxury
		}
		change_variable = {
			name = pop_luxury_fiber
			divide = pop_luxury_fiber
		}
	}
	if = {
		limit = {
			has_variable = pop_luxury_pottery
			var:pop_luxury_pottery > 0
		}
		change_variable = {
			name = pop_luxury_pottery
			multiply = var:pop_luxury
		}
		change_variable = {
			name = pop_luxury_pottery
			divide = pop_luxury_pottery
		}
	}
	if = {
		limit = {
			has_variable = pop_luxury_textile
			var:pop_luxury_textile > 0
		}
		change_variable = {
			name = pop_luxury_textile
			multiply = var:pop_luxury
		}
		change_variable = {
			name = pop_luxury_textile
			divide = pop_luxury_textile
		}
	}
	every_county_province = {
		limit = {
			is_valid_prov = yes
			is_city = yes
		}
		set_variable = {
			name = pop_calorie_food
			value = pop_calorie_food
		}
		set_variable = {
			name = pop_calorie_fuel
			value = pop_calorie_fuel
		}
		set_variable = {
			name = pop_calorie_fiber
			value = pop_calorie_fiber
		}
		set_variable = {
			name = pop_calorie_pottery
			value = pop_calorie_pottery
		}
		set_variable = {
			name = pop_calorie_textile
			value = pop_calorie_textile
		}
		change_variable = {
			name = pop_calorie_food
			multiply = 10
		}
		change_variable = {
			name = pop_calorie_fuel
			multiply = 10
		}
		change_variable = {
			name = pop_calorie_fiber
			multiply = 10
		}
		change_variable = {
			name = pop_calorie_pottery
			multiply = 10
		}
		change_variable = {
			name = pop_calorie_textile
			multiply = 10
		}
		change_variable = {
			name = pop_calorie_food
			divide = var:trade_price_food
		}
		change_variable = {
			name = pop_calorie_fuel
			divide = var:trade_price_fuel
		}
		change_variable = {
			name = pop_calorie_fiber
			divide = var:trade_price_fiber
		}
		change_variable = {
			name = pop_calorie_pottery
			divide = var:trade_price_pottery
		}
		change_variable = {
			name = pop_calorie_textile
			divide = var:trade_price_textile
		}
		change_variable = {
			name = pop_calorie_food
			multiply = var:pop_calorie_food
		}
		change_variable = {
			name = pop_calorie_fuel
			multiply = var:pop_calorie_fuel
		}
		change_variable = {
			name = pop_calorie_fiber
			multiply = var:pop_calorie_fiber
		}
		change_variable = {
			name = pop_calorie_pottery
			multiply = var:pop_calorie_pottery
		}
		change_variable = {
			name = pop_calorie_textile
			multiply = var:pop_calorie_textile
		}
		set_variable = {
			name = pop_set_demand_t
			value = 0
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_calorie_food
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_calorie_fuel
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_calorie_fiber
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_calorie_pottery
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_calorie_textile
		}
		change_variable = {
			name = pop_calorie_food
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_calorie_fuel
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_calorie_fiber
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_calorie_pottery
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_calorie_textile
			divide = var:pop_set_demand_t
		}
		set_variable = {
			name = pop_calorie_cost
			value = 0
		}
		if = {
			limit = {
				has_variable = pop_calorie_food
				var:pop_calorie_food > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_calorie_food
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_calorie_food
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_food
			}
			change_variable = {
				name = pop_calorie_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_calorie_fuel
				var:pop_calorie_fuel > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_calorie_fuel
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_calorie_fuel
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_fuel
			}
			change_variable = {
				name = pop_calorie_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_calorie_fiber
				var:pop_calorie_fiber > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_calorie_fiber
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_calorie_fiber
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_fiber
			}
			change_variable = {
				name = pop_calorie_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_calorie_pottery
				var:pop_calorie_pottery > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_calorie_pottery
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_calorie_pottery
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_pottery
			}
			change_variable = {
				name = pop_calorie_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_calorie_textile
				var:pop_calorie_textile > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_calorie_textile
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_calorie_textile
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_textile
			}
			change_variable = {
				name = pop_calorie_cost
				add = var:pop_set_demand_t
			}
		}
		remove_variable = pop_set_demand_t
		set_variable = {
			name = pop_nutrient_food
			value = pop_nutrient_food
		}
		set_variable = {
			name = pop_nutrient_fuel
			value = pop_nutrient_fuel
		}
		set_variable = {
			name = pop_nutrient_fiber
			value = pop_nutrient_fiber
		}
		set_variable = {
			name = pop_nutrient_pottery
			value = pop_nutrient_pottery
		}
		set_variable = {
			name = pop_nutrient_textile
			value = pop_nutrient_textile
		}
		change_variable = {
			name = pop_nutrient_food
			multiply = 10
		}
		change_variable = {
			name = pop_nutrient_fuel
			multiply = 10
		}
		change_variable = {
			name = pop_nutrient_fiber
			multiply = 10
		}
		change_variable = {
			name = pop_nutrient_pottery
			multiply = 10
		}
		change_variable = {
			name = pop_nutrient_textile
			multiply = 10
		}
		change_variable = {
			name = pop_nutrient_food
			divide = var:trade_price_food
		}
		change_variable = {
			name = pop_nutrient_fuel
			divide = var:trade_price_fuel
		}
		change_variable = {
			name = pop_nutrient_fiber
			divide = var:trade_price_fiber
		}
		change_variable = {
			name = pop_nutrient_pottery
			divide = var:trade_price_pottery
		}
		change_variable = {
			name = pop_nutrient_textile
			divide = var:trade_price_textile
		}
		change_variable = {
			name = pop_nutrient_food
			multiply = var:pop_nutrient_food
		}
		change_variable = {
			name = pop_nutrient_fuel
			multiply = var:pop_nutrient_fuel
		}
		change_variable = {
			name = pop_nutrient_fiber
			multiply = var:pop_nutrient_fiber
		}
		change_variable = {
			name = pop_nutrient_pottery
			multiply = var:pop_nutrient_pottery
		}
		change_variable = {
			name = pop_nutrient_textile
			multiply = var:pop_nutrient_textile
		}
		set_variable = {
			name = pop_set_demand_t
			value = 0
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_nutrient_food
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_nutrient_fuel
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_nutrient_fiber
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_nutrient_pottery
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_nutrient_textile
		}
		change_variable = {
			name = pop_nutrient_food
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_nutrient_fuel
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_nutrient_fiber
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_nutrient_pottery
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_nutrient_textile
			divide = var:pop_set_demand_t
		}
		set_variable = {
			name = pop_nutrient_cost
			value = 0
		}
		if = {
			limit = {
				has_variable = pop_nutrient_food
				var:pop_nutrient_food > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_nutrient_food
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_nutrient_food
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_food
			}
			change_variable = {
				name = pop_nutrient_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_nutrient_fuel
				var:pop_nutrient_fuel > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_nutrient_fuel
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_nutrient_fuel
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_fuel
			}
			change_variable = {
				name = pop_nutrient_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_nutrient_fiber
				var:pop_nutrient_fiber > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_nutrient_fiber
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_nutrient_fiber
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_fiber
			}
			change_variable = {
				name = pop_nutrient_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_nutrient_pottery
				var:pop_nutrient_pottery > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_nutrient_pottery
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_nutrient_pottery
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_pottery
			}
			change_variable = {
				name = pop_nutrient_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_nutrient_textile
				var:pop_nutrient_textile > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_nutrient_textile
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_nutrient_textile
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_textile
			}
			change_variable = {
				name = pop_nutrient_cost
				add = var:pop_set_demand_t
			}
		}
		remove_variable = pop_set_demand_t
		set_variable = {
			name = pop_comfort_food
			value = pop_comfort_food
		}
		set_variable = {
			name = pop_comfort_fuel
			value = pop_comfort_fuel
		}
		set_variable = {
			name = pop_comfort_fiber
			value = pop_comfort_fiber
		}
		set_variable = {
			name = pop_comfort_pottery
			value = pop_comfort_pottery
		}
		set_variable = {
			name = pop_comfort_textile
			value = pop_comfort_textile
		}
		change_variable = {
			name = pop_comfort_food
			multiply = 10
		}
		change_variable = {
			name = pop_comfort_fuel
			multiply = 10
		}
		change_variable = {
			name = pop_comfort_fiber
			multiply = 10
		}
		change_variable = {
			name = pop_comfort_pottery
			multiply = 10
		}
		change_variable = {
			name = pop_comfort_textile
			multiply = 10
		}
		change_variable = {
			name = pop_comfort_food
			divide = var:trade_price_food
		}
		change_variable = {
			name = pop_comfort_fuel
			divide = var:trade_price_fuel
		}
		change_variable = {
			name = pop_comfort_fiber
			divide = var:trade_price_fiber
		}
		change_variable = {
			name = pop_comfort_pottery
			divide = var:trade_price_pottery
		}
		change_variable = {
			name = pop_comfort_textile
			divide = var:trade_price_textile
		}
		change_variable = {
			name = pop_comfort_food
			multiply = var:pop_comfort_food
		}
		change_variable = {
			name = pop_comfort_fuel
			multiply = var:pop_comfort_fuel
		}
		change_variable = {
			name = pop_comfort_fiber
			multiply = var:pop_comfort_fiber
		}
		change_variable = {
			name = pop_comfort_pottery
			multiply = var:pop_comfort_pottery
		}
		change_variable = {
			name = pop_comfort_textile
			multiply = var:pop_comfort_textile
		}
		set_variable = {
			name = pop_set_demand_t
			value = 0
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_comfort_food
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_comfort_fuel
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_comfort_fiber
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_comfort_pottery
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_comfort_textile
		}
		change_variable = {
			name = pop_comfort_food
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_comfort_fuel
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_comfort_fiber
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_comfort_pottery
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_comfort_textile
			divide = var:pop_set_demand_t
		}
		set_variable = {
			name = pop_comfort_cost
			value = 0
		}
		if = {
			limit = {
				has_variable = pop_comfort_food
				var:pop_comfort_food > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_comfort_food
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_comfort_food
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_food
			}
			change_variable = {
				name = pop_comfort_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_comfort_fuel
				var:pop_comfort_fuel > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_comfort_fuel
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_comfort_fuel
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_fuel
			}
			change_variable = {
				name = pop_comfort_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_comfort_fiber
				var:pop_comfort_fiber > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_comfort_fiber
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_comfort_fiber
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_fiber
			}
			change_variable = {
				name = pop_comfort_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_comfort_pottery
				var:pop_comfort_pottery > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_comfort_pottery
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_comfort_pottery
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_pottery
			}
			change_variable = {
				name = pop_comfort_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_comfort_textile
				var:pop_comfort_textile > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_comfort_textile
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_comfort_textile
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_textile
			}
			change_variable = {
				name = pop_comfort_cost
				add = var:pop_set_demand_t
			}
		}
		remove_variable = pop_set_demand_t
		set_variable = {
			name = pop_luxury_food
			value = pop_luxury_food
		}
		set_variable = {
			name = pop_luxury_fuel
			value = pop_luxury_fuel
		}
		set_variable = {
			name = pop_luxury_fiber
			value = pop_luxury_fiber
		}
		set_variable = {
			name = pop_luxury_pottery
			value = pop_luxury_pottery
		}
		set_variable = {
			name = pop_luxury_textile
			value = pop_luxury_textile
		}
		change_variable = {
			name = pop_luxury_food
			multiply = 10
		}
		change_variable = {
			name = pop_luxury_fuel
			multiply = 10
		}
		change_variable = {
			name = pop_luxury_fiber
			multiply = 10
		}
		change_variable = {
			name = pop_luxury_pottery
			multiply = 10
		}
		change_variable = {
			name = pop_luxury_textile
			multiply = 10
		}
		change_variable = {
			name = pop_luxury_food
			divide = var:trade_price_food
		}
		change_variable = {
			name = pop_luxury_fuel
			divide = var:trade_price_fuel
		}
		change_variable = {
			name = pop_luxury_fiber
			divide = var:trade_price_fiber
		}
		change_variable = {
			name = pop_luxury_pottery
			divide = var:trade_price_pottery
		}
		change_variable = {
			name = pop_luxury_textile
			divide = var:trade_price_textile
		}
		change_variable = {
			name = pop_luxury_food
			multiply = var:pop_luxury_food
		}
		change_variable = {
			name = pop_luxury_fuel
			multiply = var:pop_luxury_fuel
		}
		change_variable = {
			name = pop_luxury_fiber
			multiply = var:pop_luxury_fiber
		}
		change_variable = {
			name = pop_luxury_pottery
			multiply = var:pop_luxury_pottery
		}
		change_variable = {
			name = pop_luxury_textile
			multiply = var:pop_luxury_textile
		}
		set_variable = {
			name = pop_set_demand_t
			value = 0
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_luxury_food
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_luxury_fuel
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_luxury_fiber
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_luxury_pottery
		}
		change_variable = {
			name = pop_set_demand_t
			add = var:pop_luxury_textile
		}
		change_variable = {
			name = pop_luxury_food
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_luxury_fuel
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_luxury_fiber
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_luxury_pottery
			divide = var:pop_set_demand_t
		}
		change_variable = {
			name = pop_luxury_textile
			divide = var:pop_set_demand_t
		}
		set_variable = {
			name = pop_luxury_cost
			value = 0
		}
		if = {
			limit = {
				has_variable = pop_luxury_food
				var:pop_luxury_food > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_luxury_food
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_luxury_food
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_food
			}
			change_variable = {
				name = pop_luxury_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_luxury_fuel
				var:pop_luxury_fuel > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_luxury_fuel
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_luxury_fuel
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_fuel
			}
			change_variable = {
				name = pop_luxury_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_luxury_fiber
				var:pop_luxury_fiber > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_luxury_fiber
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_luxury_fiber
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_fiber
			}
			change_variable = {
				name = pop_luxury_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_luxury_pottery
				var:pop_luxury_pottery > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_luxury_pottery
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_luxury_pottery
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_pottery
			}
			change_variable = {
				name = pop_luxury_cost
				add = var:pop_set_demand_t
			}
		}
		if = {
			limit = {
				has_variable = pop_luxury_textile
				var:pop_luxury_textile > 0
			}
			set_variable = {
				name = pop_set_demand_t
				value = var:pop_luxury_textile
			}
			change_variable = {
				name = pop_set_demand_t
				divide = pop_luxury_textile
			}
			change_variable = {
				name = pop_set_demand_t
				add = var:trade_price_textile
			}
			change_variable = {
				name = pop_luxury_cost
				add = var:pop_set_demand_t
			}
		}
		remove_variable = pop_set_demand_t
		if = {
			limit = {
				OR = {
					NOT = {
						has_variable = pop_pay
					}
					var:pop_pay = 0
				}
			}
			set_variable = {
				name = pop_calorie
				value = 0.5
			}
			set_variable = {
				name = pop_nutrient
				value = 0.1
			}
			set_variable = {
				name = pop_comfort
				value = 0.02
			}
			set_variable = {
				name = pop_luxury
				value = 0
			}
		}
		else_if = {
			limit = {
				var:pop_pay = 1
			}
			set_variable = {
				name = pop_calorie
				value = 1
			}
			set_variable = {
				name = pop_nutrient
				value = 0.5
			}
			set_variable = {
				name = pop_comfort
				value = 0.1
			}
			set_variable = {
				name = pop_luxury
				value = 0.02
			}
		}
		else_if = {
			limit = {
				var:pop_pay = 2
			}
			set_variable = {
				name = pop_calorie
				value = 1
			}
			set_variable = {
				name = pop_nutrient
				value = 1
			}
			set_variable = {
				name = pop_comfort
				value = 0.5
			}
			set_variable = {
				name = pop_luxury
				value = 0.1
			}
		}
		else_if = {
			limit = {
				var:pop_pay = 3
			}
			set_variable = {
				name = pop_calorie
				value = 1
			}
			set_variable = {
				name = pop_nutrient
				value = 1
			}
			set_variable = {
				name = pop_comfort
				value = 1
			}
			set_variable = {
				name = pop_luxury
				value = 0.5
			}
		}
		else = {
			set_variable = {
				name = pop_calorie
				value = 1
			}
			set_variable = {
				name = pop_nutrient
				value = 1
			}
			set_variable = {
				name = pop_comfort
				value = 1
			}
			set_variable = {
				name = pop_luxury
				value = 1
			}
		}
		change_variable = {
			name = pop_calorie
			multiply = var:pop_total
		}
		change_variable = {
			name = pop_nutrient
			multiply = var:pop_total
		}
		change_variable = {
			name = pop_comfort
			multiply = var:pop_total
		}
		change_variable = {
			name = pop_luxury
			multiply = var:pop_total
		}
		change_variable = {
			name = pop_calorie
			multiply = var:modi_pop_calorie
		}
		change_variable = {
			name = pop_nutrient
			multiply = var:modi_pop_nutrient
		}
		change_variable = {
			name = pop_comfort
			multiply = var:modi_pop_comfort
		}
		change_variable = {
			name = pop_luxury
			multiply = var:modi_pop_luxury
		}
		if = {
			limit = {
				has_variable = pop_calorie_food
				var:pop_calorie_food > 0
			}
			change_variable = {
				name = pop_calorie_food
				multiply = var:pop_calorie
			}
			change_variable = {
				name = pop_calorie_food
				divide = pop_calorie_food
			}
		}
		if = {
			limit = {
				has_variable = pop_calorie_fuel
				var:pop_calorie_fuel > 0
			}
			change_variable = {
				name = pop_calorie_fuel
				multiply = var:pop_calorie
			}
			change_variable = {
				name = pop_calorie_fuel
				divide = pop_calorie_fuel
			}
		}
		if = {
			limit = {
				has_variable = pop_calorie_fiber
				var:pop_calorie_fiber > 0
			}
			change_variable = {
				name = pop_calorie_fiber
				multiply = var:pop_calorie
			}
			change_variable = {
				name = pop_calorie_fiber
				divide = pop_calorie_fiber
			}
		}
		if = {
			limit = {
				has_variable = pop_calorie_pottery
				var:pop_calorie_pottery > 0
			}
			change_variable = {
				name = pop_calorie_pottery
				multiply = var:pop_calorie
			}
			change_variable = {
				name = pop_calorie_pottery
				divide = pop_calorie_pottery
			}
		}
		if = {
			limit = {
				has_variable = pop_calorie_textile
				var:pop_calorie_textile > 0
			}
			change_variable = {
				name = pop_calorie_textile
				multiply = var:pop_calorie
			}
			change_variable = {
				name = pop_calorie_textile
				divide = pop_calorie_textile
			}
		}
		if = {
			limit = {
				has_variable = pop_nutrient_food
				var:pop_nutrient_food > 0
			}
			change_variable = {
				name = pop_nutrient_food
				multiply = var:pop_nutrient
			}
			change_variable = {
				name = pop_nutrient_food
				divide = pop_nutrient_food
			}
		}
		if = {
			limit = {
				has_variable = pop_nutrient_fuel
				var:pop_nutrient_fuel > 0
			}
			change_variable = {
				name = pop_nutrient_fuel
				multiply = var:pop_nutrient
			}
			change_variable = {
				name = pop_nutrient_fuel
				divide = pop_nutrient_fuel
			}
		}
		if = {
			limit = {
				has_variable = pop_nutrient_fiber
				var:pop_nutrient_fiber > 0
			}
			change_variable = {
				name = pop_nutrient_fiber
				multiply = var:pop_nutrient
			}
			change_variable = {
				name = pop_nutrient_fiber
				divide = pop_nutrient_fiber
			}
		}
		if = {
			limit = {
				has_variable = pop_nutrient_pottery
				var:pop_nutrient_pottery > 0
			}
			change_variable = {
				name = pop_nutrient_pottery
				multiply = var:pop_nutrient
			}
			change_variable = {
				name = pop_nutrient_pottery
				divide = pop_nutrient_pottery
			}
		}
		if = {
			limit = {
				has_variable = pop_nutrient_textile
				var:pop_nutrient_textile > 0
			}
			change_variable = {
				name = pop_nutrient_textile
				multiply = var:pop_nutrient
			}
			change_variable = {
				name = pop_nutrient_textile
				divide = pop_nutrient_textile
			}
		}
		if = {
			limit = {
				has_variable = pop_comfort_food
				var:pop_comfort_food > 0
			}
			change_variable = {
				name = pop_comfort_food
				multiply = var:pop_comfort
			}
			change_variable = {
				name = pop_comfort_food
				divide = pop_comfort_food
			}
		}
		if = {
			limit = {
				has_variable = pop_comfort_fuel
				var:pop_comfort_fuel > 0
			}
			change_variable = {
				name = pop_comfort_fuel
				multiply = var:pop_comfort
			}
			change_variable = {
				name = pop_comfort_fuel
				divide = pop_comfort_fuel
			}
		}
		if = {
			limit = {
				has_variable = pop_comfort_fiber
				var:pop_comfort_fiber > 0
			}
			change_variable = {
				name = pop_comfort_fiber
				multiply = var:pop_comfort
			}
			change_variable = {
				name = pop_comfort_fiber
				divide = pop_comfort_fiber
			}
		}
		if = {
			limit = {
				has_variable = pop_comfort_pottery
				var:pop_comfort_pottery > 0
			}
			change_variable = {
				name = pop_comfort_pottery
				multiply = var:pop_comfort
			}
			change_variable = {
				name = pop_comfort_pottery
				divide = pop_comfort_pottery
			}
		}
		if = {
			limit = {
				has_variable = pop_comfort_textile
				var:pop_comfort_textile > 0
			}
			change_variable = {
				name = pop_comfort_textile
				multiply = var:pop_comfort
			}
			change_variable = {
				name = pop_comfort_textile
				divide = pop_comfort_textile
			}
		}
		if = {
			limit = {
				has_variable = pop_luxury_food
				var:pop_luxury_food > 0
			}
			change_variable = {
				name = pop_luxury_food
				multiply = var:pop_luxury
			}
			change_variable = {
				name = pop_luxury_food
				divide = pop_luxury_food
			}
		}
		if = {
			limit = {
				has_variable = pop_luxury_fuel
				var:pop_luxury_fuel > 0
			}
			change_variable = {
				name = pop_luxury_fuel
				multiply = var:pop_luxury
			}
			change_variable = {
				name = pop_luxury_fuel
				divide = pop_luxury_fuel
			}
		}
		if = {
			limit = {
				has_variable = pop_luxury_fiber
				var:pop_luxury_fiber > 0
			}
			change_variable = {
				name = pop_luxury_fiber
				multiply = var:pop_luxury
			}
			change_variable = {
				name = pop_luxury_fiber
				divide = pop_luxury_fiber
			}
		}
		if = {
			limit = {
				has_variable = pop_luxury_pottery
				var:pop_luxury_pottery > 0
			}
			change_variable = {
				name = pop_luxury_pottery
				multiply = var:pop_luxury
			}
			change_variable = {
				name = pop_luxury_pottery
				divide = pop_luxury_pottery
			}
		}
		if = {
			limit = {
				has_variable = pop_luxury_textile
				var:pop_luxury_textile > 0
			}
			change_variable = {
				name = pop_luxury_textile
				multiply = var:pop_luxury
			}
			change_variable = {
				name = pop_luxury_textile
				divide = pop_luxury_textile
			}
		}
	}
}
every_province = {
	limit = {
		is_valid_prov = yes
		is_city = yes
	}
	set_variable = {
		name = trade_out_food
		value = 0
	}
	set_variable = {
		name = trade_out_fuel
		value = 0
	}
	set_variable = {
		name = trade_out_fiber
		value = 0
	}
	set_variable = {
		name = trade_out_pottery
		value = 0
	}
	set_variable = {
		name = trade_out_textile
		value = 0
	}
	set_variable = {
		name = trade_in_food
		value = 0
	}
	set_variable = {
		name = trade_in_fuel
		value = 0
	}
	set_variable = {
		name = trade_in_fiber
		value = 0
	}
	set_variable = {
		name = trade_in_pottery
		value = 0
	}
	set_variable = {
		name = trade_in_textile
		value = 0
	}
	set_variable = {
		name = trade_earn_food
		value = 0
	}
	set_variable = {
		name = trade_earn_fuel
		value = 0
	}
	set_variable = {
		name = trade_earn_fiber
		value = 0
	}
	set_variable = {
		name = trade_earn_pottery
		value = 0
	}
	set_variable = {
		name = trade_earn_textile
		value = 0
	}
	set_variable = {
		name = trade_pay_food
		value = 0
	}
	set_variable = {
		name = trade_pay_fuel
		value = 0
	}
	set_variable = {
		name = trade_pay_fiber
		value = 0
	}
	set_variable = {
		name = trade_pay_pottery
		value = 0
	}
	set_variable = {
		name = trade_pay_textile
		value = 0
	}
	set_variable = {
		name = trade_sply_food
		value = 0
	}
	set_variable = {
		name = trade_sply_fuel
		value = 0
	}
	set_variable = {
		name = trade_sply_fiber
		value = 0
	}
	set_variable = {
		name = trade_sply_pottery
		value = 0
	}
	set_variable = {
		name = trade_sply_textile
		value = 0
	}
	set_variable = {
		name = trade_dmnd_food
		value = 0
	}
	set_variable = {
		name = trade_dmnd_fuel
		value = 0
	}
	set_variable = {
		name = trade_dmnd_fiber
		value = 0
	}
	set_variable = {
		name = trade_dmnd_pottery
		value = 0
	}
	set_variable = {
		name = trade_dmnd_textile
		value = 0
	}
	every_in_list = {
		variable = prod_instances
		if = {
			limit = {
				has_variable = prod_dmnd_food
			}
			prev = {
				change_variable = {
					name = trade_dmnd_food
					add = prev.var:prod_dmnd_food
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_dmnd_fuel
			}
			prev = {
				change_variable = {
					name = trade_dmnd_fuel
					add = prev.var:prod_dmnd_fuel
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_dmnd_fiber
			}
			prev = {
				change_variable = {
					name = trade_dmnd_fiber
					add = prev.var:prod_dmnd_fiber
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_dmnd_pottery
			}
			prev = {
				change_variable = {
					name = trade_dmnd_pottery
					add = prev.var:prod_dmnd_pottery
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_dmnd_textile
			}
			prev = {
				change_variable = {
					name = trade_dmnd_textile
					add = prev.var:prod_dmnd_textile
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_sply_old_food
			}
			prev = {
				change_variable = {
					name = trade_sply_food
					add = prev.var:prod_sply_old_food
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_sply_old_fuel
			}
			prev = {
				change_variable = {
					name = trade_sply_fuel
					add = prev.var:prod_sply_old_fuel
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_sply_old_fiber
			}
			prev = {
				change_variable = {
					name = trade_sply_fiber
					add = prev.var:prod_sply_old_fiber
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_sply_old_pottery
			}
			prev = {
				change_variable = {
					name = trade_sply_pottery
					add = prev.var:prod_sply_old_pottery
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_sply_old_textile
			}
			prev = {
				change_variable = {
					name = trade_sply_textile
					add = prev.var:prod_sply_old_textile
				}
			}
		}
	}
	change_variable = {
		name = trade_dmnd_food
		add = var:pop_calorie_food
	}
	change_variable = {
		name = trade_dmnd_food
		add = var:pop_nutrient_food
	}
	change_variable = {
		name = trade_dmnd_food
		add = var:pop_comfort_food
	}
	change_variable = {
		name = trade_dmnd_food
		add = var:pop_luxury_food
	}
	change_variable = {
		name = trade_dmnd_fuel
		add = var:pop_calorie_fuel
	}
	change_variable = {
		name = trade_dmnd_fuel
		add = var:pop_nutrient_fuel
	}
	change_variable = {
		name = trade_dmnd_fuel
		add = var:pop_comfort_fuel
	}
	change_variable = {
		name = trade_dmnd_fuel
		add = var:pop_luxury_fuel
	}
	change_variable = {
		name = trade_dmnd_fiber
		add = var:pop_calorie_fiber
	}
	change_variable = {
		name = trade_dmnd_fiber
		add = var:pop_nutrient_fiber
	}
	change_variable = {
		name = trade_dmnd_fiber
		add = var:pop_comfort_fiber
	}
	change_variable = {
		name = trade_dmnd_fiber
		add = var:pop_luxury_fiber
	}
	change_variable = {
		name = trade_dmnd_pottery
		add = var:pop_calorie_pottery
	}
	change_variable = {
		name = trade_dmnd_pottery
		add = var:pop_nutrient_pottery
	}
	change_variable = {
		name = trade_dmnd_pottery
		add = var:pop_comfort_pottery
	}
	change_variable = {
		name = trade_dmnd_pottery
		add = var:pop_luxury_pottery
	}
	change_variable = {
		name = trade_dmnd_textile
		add = var:pop_calorie_textile
	}
	change_variable = {
		name = trade_dmnd_textile
		add = var:pop_nutrient_textile
	}
	change_variable = {
		name = trade_dmnd_textile
		add = var:pop_comfort_textile
	}
	change_variable = {
		name = trade_dmnd_textile
		add = var:pop_luxury_textile
	}
}
every_county = {
	limit = {
		is_valid_prov = yes
	}
	set_variable = {
		name = trade_out_food
		value = 0
	}
	set_variable = {
		name = trade_out_fuel
		value = 0
	}
	set_variable = {
		name = trade_out_fiber
		value = 0
	}
	set_variable = {
		name = trade_out_pottery
		value = 0
	}
	set_variable = {
		name = trade_out_textile
		value = 0
	}
	set_variable = {
		name = trade_in_food
		value = 0
	}
	set_variable = {
		name = trade_in_fuel
		value = 0
	}
	set_variable = {
		name = trade_in_fiber
		value = 0
	}
	set_variable = {
		name = trade_in_pottery
		value = 0
	}
	set_variable = {
		name = trade_in_textile
		value = 0
	}
	set_variable = {
		name = trade_earn_food
		value = 0
	}
	set_variable = {
		name = trade_earn_fuel
		value = 0
	}
	set_variable = {
		name = trade_earn_fiber
		value = 0
	}
	set_variable = {
		name = trade_earn_pottery
		value = 0
	}
	set_variable = {
		name = trade_earn_textile
		value = 0
	}
	set_variable = {
		name = trade_pay_food
		value = 0
	}
	set_variable = {
		name = trade_pay_fuel
		value = 0
	}
	set_variable = {
		name = trade_pay_fiber
		value = 0
	}
	set_variable = {
		name = trade_pay_pottery
		value = 0
	}
	set_variable = {
		name = trade_pay_textile
		value = 0
	}
	set_variable = {
		name = trade_sply_food
		value = 0
	}
	set_variable = {
		name = trade_sply_fuel
		value = 0
	}
	set_variable = {
		name = trade_sply_fiber
		value = 0
	}
	set_variable = {
		name = trade_sply_pottery
		value = 0
	}
	set_variable = {
		name = trade_sply_textile
		value = 0
	}
	set_variable = {
		name = trade_dmnd_food
		value = 0
	}
	set_variable = {
		name = trade_dmnd_fuel
		value = 0
	}
	set_variable = {
		name = trade_dmnd_fiber
		value = 0
	}
	set_variable = {
		name = trade_dmnd_pottery
		value = 0
	}
	set_variable = {
		name = trade_dmnd_textile
		value = 0
	}
	every_in_list = {
		variable = prod_instances
		if = {
			limit = {
				has_variable = prod_dmnd_food
			}
			prev = {
				change_variable = {
					name = trade_dmnd_food
					add = prev.var:prod_dmnd_food
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_dmnd_fuel
			}
			prev = {
				change_variable = {
					name = trade_dmnd_fuel
					add = prev.var:prod_dmnd_fuel
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_dmnd_fiber
			}
			prev = {
				change_variable = {
					name = trade_dmnd_fiber
					add = prev.var:prod_dmnd_fiber
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_dmnd_pottery
			}
			prev = {
				change_variable = {
					name = trade_dmnd_pottery
					add = prev.var:prod_dmnd_pottery
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_dmnd_textile
			}
			prev = {
				change_variable = {
					name = trade_dmnd_textile
					add = prev.var:prod_dmnd_textile
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_sply_old_food
			}
			prev = {
				change_variable = {
					name = trade_sply_food
					add = prev.var:prod_sply_old_food
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_sply_old_fuel
			}
			prev = {
				change_variable = {
					name = trade_sply_fuel
					add = prev.var:prod_sply_old_fuel
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_sply_old_fiber
			}
			prev = {
				change_variable = {
					name = trade_sply_fiber
					add = prev.var:prod_sply_old_fiber
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_sply_old_pottery
			}
			prev = {
				change_variable = {
					name = trade_sply_pottery
					add = prev.var:prod_sply_old_pottery
				}
			}
		}
		if = {
			limit = {
				has_variable = prod_sply_old_textile
			}
			prev = {
				change_variable = {
					name = trade_sply_textile
					add = prev.var:prod_sply_old_textile
				}
			}
		}
	}
	change_variable = {
		name = trade_dmnd_food
		add = var:pop_calorie_food
	}
	change_variable = {
		name = trade_dmnd_food
		add = var:pop_nutrient_food
	}
	change_variable = {
		name = trade_dmnd_food
		add = var:pop_comfort_food
	}
	change_variable = {
		name = trade_dmnd_food
		add = var:pop_luxury_food
	}
	change_variable = {
		name = trade_dmnd_fuel
		add = var:pop_calorie_fuel
	}
	change_variable = {
		name = trade_dmnd_fuel
		add = var:pop_nutrient_fuel
	}
	change_variable = {
		name = trade_dmnd_fuel
		add = var:pop_comfort_fuel
	}
	change_variable = {
		name = trade_dmnd_fuel
		add = var:pop_luxury_fuel
	}
	change_variable = {
		name = trade_dmnd_fiber
		add = var:pop_calorie_fiber
	}
	change_variable = {
		name = trade_dmnd_fiber
		add = var:pop_nutrient_fiber
	}
	change_variable = {
		name = trade_dmnd_fiber
		add = var:pop_comfort_fiber
	}
	change_variable = {
		name = trade_dmnd_fiber
		add = var:pop_luxury_fiber
	}
	change_variable = {
		name = trade_dmnd_pottery
		add = var:pop_calorie_pottery
	}
	change_variable = {
		name = trade_dmnd_pottery
		add = var:pop_nutrient_pottery
	}
	change_variable = {
		name = trade_dmnd_pottery
		add = var:pop_comfort_pottery
	}
	change_variable = {
		name = trade_dmnd_pottery
		add = var:pop_luxury_pottery
	}
	change_variable = {
		name = trade_dmnd_textile
		add = var:pop_calorie_textile
	}
	change_variable = {
		name = trade_dmnd_textile
		add = var:pop_nutrient_textile
	}
	change_variable = {
		name = trade_dmnd_textile
		add = var:pop_comfort_textile
	}
	change_variable = {
		name = trade_dmnd_textile
		add = var:pop_luxury_textile
	}
	set_variable = {
		name = trade_sum_sply_food
		value = var:trade_sply_food
	}
	set_variable = {
		name = trade_sum_sply_fuel
		value = var:trade_sply_fuel
	}
	set_variable = {
		name = trade_sum_sply_fiber
		value = var:trade_sply_fiber
	}
	set_variable = {
		name = trade_sum_sply_pottery
		value = var:trade_sply_pottery
	}
	set_variable = {
		name = trade_sum_sply_textile
		value = var:trade_sply_textile
	}
	set_variable = {
		name = trade_sum_dmnd_food
		value = var:trade_dmnd_food
	}
	set_variable = {
		name = trade_sum_dmnd_fuel
		value = var:trade_dmnd_fuel
	}
	set_variable = {
		name = trade_sum_dmnd_fiber
		value = var:trade_dmnd_fiber
	}
	set_variable = {
		name = trade_sum_dmnd_pottery
		value = var:trade_dmnd_pottery
	}
	set_variable = {
		name = trade_sum_dmnd_textile
		value = var:trade_dmnd_textile
	}
	every_county_province = {
		limit = {
			is_valid_prov = yes
			is_city = yes
		}
		prev = {
			change_variable = {
				name = trade_sum_sply_food
				add = prev.var:trade_sply_food
			}
			change_variable = {
				name = trade_sum_sply_fuel
				add = prev.var:trade_sply_fuel
			}
			change_variable = {
				name = trade_sum_sply_fiber
				add = prev.var:trade_sply_fiber
			}
			change_variable = {
				name = trade_sum_sply_pottery
				add = prev.var:trade_sply_pottery
			}
			change_variable = {
				name = trade_sum_sply_textile
				add = prev.var:trade_sply_textile
			}
			change_variable = {
				name = trade_sum_dmnd_food
				add = prev.var:trade_dmnd_food
			}
			change_variable = {
				name = trade_sum_dmnd_fuel
				add = prev.var:trade_dmnd_fuel
			}
			change_variable = {
				name = trade_sum_dmnd_fiber
				add = prev.var:trade_dmnd_fiber
			}
			change_variable = {
				name = trade_sum_dmnd_pottery
				add = prev.var:trade_dmnd_pottery
			}
			change_variable = {
				name = trade_sum_dmnd_textile
				add = prev.var:trade_dmnd_textile
			}
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_sply_food
			has_variable = trade_sum_dmnd_food
		}
		if = {
			limit = {
				var:trade_sum_sply_food = {
					compare_value >= prev.var:trade_sum_dmnd_food
				}
			}
			set_variable = {
				name = trade_sum_in_food
				value = var:trade_sum_dmnd_food
			}
			set_variable = {
				name = trade_sum_out_food
				value = var:trade_sum_dmnd_food
			}
		}
		else = {
			set_variable = {
				name = trade_sum_in_food
				value = var:trade_sum_sply_food
			}
			set_variable = {
				name = trade_sum_out_food
				value = var:trade_sum_sply_food
			}
		}
		set_variable = {
			name = trade_sum_earn_food
			value = var:trade_sum_out_food
		}
		set_variable = {
			name = trade_sum_pay_food
			value = var:trade_sum_in_food
		}
		change_variable = {
			name = trade_sum_earn_food
			multiply = var:trade_price_food
		}
		change_variable = {
			name = trade_sum_pay_food
			multiply = var:trade_price_food
		}
	}
	else = {
		set_variable = {
			name = trade_sum_in_food
			value = 0
		}
		set_variable = {
			name = trade_sum_out_food
			value = 0
		}
		set_variable = {
			name = trade_sum_earn_food
			value = 0
		}
		set_variable = {
			name = trade_sum_pay_food
			value = 0
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_sply_fuel
			has_variable = trade_sum_dmnd_fuel
		}
		if = {
			limit = {
				var:trade_sum_sply_fuel = {
					compare_value >= prev.var:trade_sum_dmnd_fuel
				}
			}
			set_variable = {
				name = trade_sum_in_fuel
				value = var:trade_sum_dmnd_fuel
			}
			set_variable = {
				name = trade_sum_out_fuel
				value = var:trade_sum_dmnd_fuel
			}
		}
		else = {
			set_variable = {
				name = trade_sum_in_fuel
				value = var:trade_sum_sply_fuel
			}
			set_variable = {
				name = trade_sum_out_fuel
				value = var:trade_sum_sply_fuel
			}
		}
		set_variable = {
			name = trade_sum_earn_fuel
			value = var:trade_sum_out_fuel
		}
		set_variable = {
			name = trade_sum_pay_fuel
			value = var:trade_sum_in_fuel
		}
		change_variable = {
			name = trade_sum_earn_fuel
			multiply = var:trade_price_fuel
		}
		change_variable = {
			name = trade_sum_pay_fuel
			multiply = var:trade_price_fuel
		}
	}
	else = {
		set_variable = {
			name = trade_sum_in_fuel
			value = 0
		}
		set_variable = {
			name = trade_sum_out_fuel
			value = 0
		}
		set_variable = {
			name = trade_sum_earn_fuel
			value = 0
		}
		set_variable = {
			name = trade_sum_pay_fuel
			value = 0
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_sply_fiber
			has_variable = trade_sum_dmnd_fiber
		}
		if = {
			limit = {
				var:trade_sum_sply_fiber = {
					compare_value >= prev.var:trade_sum_dmnd_fiber
				}
			}
			set_variable = {
				name = trade_sum_in_fiber
				value = var:trade_sum_dmnd_fiber
			}
			set_variable = {
				name = trade_sum_out_fiber
				value = var:trade_sum_dmnd_fiber
			}
		}
		else = {
			set_variable = {
				name = trade_sum_in_fiber
				value = var:trade_sum_sply_fiber
			}
			set_variable = {
				name = trade_sum_out_fiber
				value = var:trade_sum_sply_fiber
			}
		}
		set_variable = {
			name = trade_sum_earn_fiber
			value = var:trade_sum_out_fiber
		}
		set_variable = {
			name = trade_sum_pay_fiber
			value = var:trade_sum_in_fiber
		}
		change_variable = {
			name = trade_sum_earn_fiber
			multiply = var:trade_price_fiber
		}
		change_variable = {
			name = trade_sum_pay_fiber
			multiply = var:trade_price_fiber
		}
	}
	else = {
		set_variable = {
			name = trade_sum_in_fiber
			value = 0
		}
		set_variable = {
			name = trade_sum_out_fiber
			value = 0
		}
		set_variable = {
			name = trade_sum_earn_fiber
			value = 0
		}
		set_variable = {
			name = trade_sum_pay_fiber
			value = 0
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_sply_pottery
			has_variable = trade_sum_dmnd_pottery
		}
		if = {
			limit = {
				var:trade_sum_sply_pottery = {
					compare_value >= prev.var:trade_sum_dmnd_pottery
				}
			}
			set_variable = {
				name = trade_sum_in_pottery
				value = var:trade_sum_dmnd_pottery
			}
			set_variable = {
				name = trade_sum_out_pottery
				value = var:trade_sum_dmnd_pottery
			}
		}
		else = {
			set_variable = {
				name = trade_sum_in_pottery
				value = var:trade_sum_sply_pottery
			}
			set_variable = {
				name = trade_sum_out_pottery
				value = var:trade_sum_sply_pottery
			}
		}
		set_variable = {
			name = trade_sum_earn_pottery
			value = var:trade_sum_out_pottery
		}
		set_variable = {
			name = trade_sum_pay_pottery
			value = var:trade_sum_in_pottery
		}
		change_variable = {
			name = trade_sum_earn_pottery
			multiply = var:trade_price_pottery
		}
		change_variable = {
			name = trade_sum_pay_pottery
			multiply = var:trade_price_pottery
		}
	}
	else = {
		set_variable = {
			name = trade_sum_in_pottery
			value = 0
		}
		set_variable = {
			name = trade_sum_out_pottery
			value = 0
		}
		set_variable = {
			name = trade_sum_earn_pottery
			value = 0
		}
		set_variable = {
			name = trade_sum_pay_pottery
			value = 0
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_sply_textile
			has_variable = trade_sum_dmnd_textile
		}
		if = {
			limit = {
				var:trade_sum_sply_textile = {
					compare_value >= prev.var:trade_sum_dmnd_textile
				}
			}
			set_variable = {
				name = trade_sum_in_textile
				value = var:trade_sum_dmnd_textile
			}
			set_variable = {
				name = trade_sum_out_textile
				value = var:trade_sum_dmnd_textile
			}
		}
		else = {
			set_variable = {
				name = trade_sum_in_textile
				value = var:trade_sum_sply_textile
			}
			set_variable = {
				name = trade_sum_out_textile
				value = var:trade_sum_sply_textile
			}
		}
		set_variable = {
			name = trade_sum_earn_textile
			value = var:trade_sum_out_textile
		}
		set_variable = {
			name = trade_sum_pay_textile
			value = var:trade_sum_in_textile
		}
		change_variable = {
			name = trade_sum_earn_textile
			multiply = var:trade_price_textile
		}
		change_variable = {
			name = trade_sum_pay_textile
			multiply = var:trade_price_textile
		}
	}
	else = {
		set_variable = {
			name = trade_sum_in_textile
			value = 0
		}
		set_variable = {
			name = trade_sum_out_textile
			value = 0
		}
		set_variable = {
			name = trade_sum_earn_textile
			value = 0
		}
		set_variable = {
			name = trade_sum_pay_textile
			value = 0
		}
	}
}
every_in_global_list = {
	variable = trade_merchants
	set_variable = {
		name = trade_sum_in_food
		value = 0
	}
	set_variable = {
		name = trade_sum_in_fuel
		value = 0
	}
	set_variable = {
		name = trade_sum_in_fiber
		value = 0
	}
	set_variable = {
		name = trade_sum_in_pottery
		value = 0
	}
	set_variable = {
		name = trade_sum_in_textile
		value = 0
	}
	set_variable = {
		name = trade_sum_out_food
		value = 0
	}
	set_variable = {
		name = trade_sum_out_fuel
		value = 0
	}
	set_variable = {
		name = trade_sum_out_fiber
		value = 0
	}
	set_variable = {
		name = trade_sum_out_pottery
		value = 0
	}
	set_variable = {
		name = trade_sum_out_textile
		value = 0
	}
	set_variable = {
		name = trade_sum_dmnd_food
		value = var:trade_want_food
	}
	set_variable = {
		name = trade_sum_dmnd_fuel
		value = var:trade_want_fuel
	}
	set_variable = {
		name = trade_sum_dmnd_fiber
		value = var:trade_want_fiber
	}
	set_variable = {
		name = trade_sum_dmnd_pottery
		value = var:trade_want_pottery
	}
	set_variable = {
		name = trade_sum_dmnd_textile
		value = var:trade_want_textile
	}
	change_variable = {
		name = trade_sum_dmnd_food
		subtract = var:trade_has_food
	}
	change_variable = {
		name = trade_sum_dmnd_fuel
		subtract = var:trade_has_fuel
	}
	change_variable = {
		name = trade_sum_dmnd_fiber
		subtract = var:trade_has_fiber
	}
	change_variable = {
		name = trade_sum_dmnd_pottery
		subtract = var:trade_has_pottery
	}
	change_variable = {
		name = trade_sum_dmnd_textile
		subtract = var:trade_has_textile
	}
	change_variable = {
		name = trade_sum_dmnd_food
		divide = 2
	}
	change_variable = {
		name = trade_sum_dmnd_fuel
		divide = 2
	}
	change_variable = {
		name = trade_sum_dmnd_fiber
		divide = 2
	}
	change_variable = {
		name = trade_sum_dmnd_pottery
		divide = 2
	}
	change_variable = {
		name = trade_sum_dmnd_textile
		divide = 2
	}
	set_variable = {
		name = trade_sum_sply_food
		value = var:trade_has_food
	}
	set_variable = {
		name = trade_sum_sply_fuel
		value = var:trade_has_fuel
	}
	set_variable = {
		name = trade_sum_sply_fiber
		value = var:trade_has_fiber
	}
	set_variable = {
		name = trade_sum_sply_pottery
		value = var:trade_has_pottery
	}
	set_variable = {
		name = trade_sum_sply_textile
		value = var:trade_has_textile
	}
	change_variable = {
		name = trade_sum_sply_food
		divide = 2
	}
	change_variable = {
		name = trade_sum_sply_fuel
		divide = 2
	}
	change_variable = {
		name = trade_sum_sply_fiber
		divide = 2
	}
	change_variable = {
		name = trade_sum_sply_pottery
		divide = 2
	}
	change_variable = {
		name = trade_sum_sply_textile
		divide = 2
	}
	set_variable = {
		name = trade_sum_earn_food
		value = 0
	}
	set_variable = {
		name = trade_sum_earn_fuel
		value = 0
	}
	set_variable = {
		name = trade_sum_earn_fiber
		value = 0
	}
	set_variable = {
		name = trade_sum_earn_pottery
		value = 0
	}
	set_variable = {
		name = trade_sum_earn_textile
		value = 0
	}
	set_variable = {
		name = trade_sum_pay_food
		value = 0
	}
	set_variable = {
		name = trade_sum_pay_fuel
		value = 0
	}
	set_variable = {
		name = trade_sum_pay_fiber
		value = 0
	}
	set_variable = {
		name = trade_sum_pay_pottery
		value = 0
	}
	set_variable = {
		name = trade_sum_pay_textile
		value = 0
	}
	set_variable = {
		name = trade_power
		value = var:trade_rank
	}
	change_variable = {
		name = trade_power
		multiply = var:trade_skill
	}
}
set_global_variable = {
	name = trade_do_trade_loop
}
while = {
	limit = {
		has_global_variable = trade_do_trade_loop
	}
	remove_global_variable = trade_do_trade_loop
	count = 100000
	ordered_in_global_list = {
		limit = {
			has_variable = trade_power
			var:trade_power > 0
		}
		variable = trade_merchants
		order_by = trade_do_trade_order_value_0
		position = 0
		set_global_variable = {
			name = trade_do_trade_loop
		}
		set_global_variable = {
			name = trade_do_trade_select
			value = this
		}
		every_in_list = {
			variable = trade_outposts
			prev = {
				add_to_variable_list = {
					name = trade_do_trade_t
					target = prev.title_province
				}
			}
		}
		every_province = {
			add_to_global_variable_list = {
				name = travel_distance_dijkstra_every_white
				target = this
			}
		}
		every_in_global_list = {
			variable = every_water
			add_to_global_variable_list = {
				name = travel_distance_dijkstra_every_white
				target = this
			}
		}
		every_in_global_list = {
			variable = travel_distance_dijkstra_every_white
			set_variable = {
				name = travel_distance_distance
				value = 210000
			}
			set_variable = {
				name = travel_distance_prev
				value = this
			}
		}
		var:trade_location.title_province = {
			set_variable = {
				name = travel_distance_distance
				value = 0.001
			}
			set_variable = {
				name = travel_distance_prev
				value = this
			}
			add_to_global_variable_list = {
				name = travel_distance_fray
				target = this
			}
			add_to_global_variable_list = {
				name = travel_distance_visited
				target = this
			}
		}
		if = {
			limit = {
				or = {
					always = no
				}
			}
			every_in_global_list = {
				variable = trade_do_trade_t
				set_variable = {
					name = travel_distance_distance
					value = 0.001
				}
				set_variable = {
					name = travel_distance_prev
					value = this
				}
				add_to_global_variable_list = {
					name = travel_distance_fray
					target = this
				}
				add_to_global_variable_list = {
					name = travel_distance_visited
					target = this
				}
			}
		}
		else = {
			every_in_list = {
				variable = trade_do_trade_t
				set_variable = {
					name = travel_distance_distance
					value = 0.001
				}
				set_variable = {
					name = travel_distance_prev
					value = this
				}
				add_to_global_variable_list = {
					name = travel_distance_fray
					target = this
				}
				add_to_global_variable_list = {
					name = travel_distance_visited
					target = this
				}
			}
		}
		while = {
			limit = {
				has_global_variable_list = travel_distance_fray
				global_variable_list_size = {
					name = travel_distance_fray
					value >= 1
				}
			}
			count = 100000
			ordered_in_global_list = {
				variable = travel_distance_fray
				order_by = travel_distance_order_value
				position = 0
				set_global_variable = {
					name = travel_distance_select
					value = this
				}
				remove_list_global_variable = {
					name = travel_distance_fray
					target = this
				}
			}
			global_var:travel_distance_select = {
				if = {
					limit = {
						has_variable_list = prov_neighb
					}
					every_in_list = {
						variable = prov_neighb
						limit = {
							has_variable = travel_distance_distance
						}
						set_variable = {
							name = get_distance_neighb_x_diff
							value = global_var:travel_distance_select.var:prov_x
						}
						set_variable = {
							name = get_distance_neighb_y_diff
							value = global_var:travel_distance_select.var:prov_y
						}
						change_variable = {
							name = get_distance_neighb_x_diff
							subtract = this.var:prov_x
						}
						change_variable = {
							name = get_distance_neighb_y_diff
							subtract = this.var:prov_y
						}
						change_variable = {
							name = get_distance_neighb_x_diff
							divide = 10
						}
						change_variable = {
							name = get_distance_neighb_y_diff
							divide = 10
						}
						set_variable = {
							name = math_pow_base
							value = var:get_distance_neighb_x_diff
						}
						set_variable = {
							name = math_pow_exp
							value = 2
						}
						if = {
							limit = {
								has_variable = math_pow_base
								var:math_pow_base != 0
							}
							set_variable = {
								name = get_distance_neighb_x_diff
								value = 1
							}
							while = {
								limit = {
									var:math_pow_exp >= 1
								}
								change_variable = {
									name = math_pow_exp
									subtract = 1
								}
								change_variable = {
									name = get_distance_neighb_x_diff
									multiply = var:math_pow_base
								}
							}
							while = {
								limit = {
									var:math_pow_exp < 0
								}
								change_variable = {
									name = math_pow_exp
									add = 1
								}
								change_variable = {
									name = get_distance_neighb_x_diff
									divide = var:math_pow_base
								}
							}
							if = {
								limit = {
									var:math_pow_exp != 0
								}
								set_variable = {
									name = math_ln_inp
									value = var:math_pow_base
								}
								set_variable = {
									name = math_pow_ln
									value = 0
								}
								set_variable = {
									name = math_ln_k
									value = 0
								}
								set_variable = {
									name = math_ln_div
									value = 10000
								}
								while = {
									limit = {
										var:math_ln_inp >= 2
									}
									change_variable = {
										name = math_ln_inp
										divide = 2
									}
									change_variable = {
										name = math_pow_ln
										add = 6931.472
									}
								}
								while = {
									limit = {
										var:math_ln_inp < 1
									}
									change_variable = {
										name = math_ln_inp
										multiply = 2
									}
									change_variable = {
										name = math_pow_ln
										subtract = 6931.472
									}
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								while = {
									limit = {
										var:math_ln_k < 10
									}
									change_variable = {
										name = math_ln_k
										add = 1
									}
									change_variable = {
										name = math_ln_div
										divide = 2
									}
									set_variable = {
										name = math_ln_t
										value = 10000
									}
									change_variable = {
										name = math_ln_t
										add = var:math_ln_div
									}
									if = {
										limit = {
											var:math_ln_inp = {
												compare_value >= prev.var:math_ln_t
											}
										}
										change_variable = {
											name = math_ln_inp
											divide = var:math_ln_t
										}
										change_variable = {
											name = math_ln_inp
											multiply = 10000
										}
										set_variable = {
											name = math_lt_ind
											value = var:math_ln_k
										}
										if = {
											limit = {
												var:math_lt_ind >= 6
											}
											if = {
												limit = {
													var:math_lt_ind >= 8
												}
												if = {
													limit = {
														var:math_lt_ind >= 9
													}
													if = {
														limit = {
															var:math_lt_ind >= 10
														}
														set_variable = {
															name = math_ln_lt
															value = 9.761
														}
													}
													else = {
														set_variable = {
															name = math_ln_lt
															value = 19.512
														}
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 38.986
													}
												}
											}
											else = {
												if = {
													limit = {
														var:math_lt_ind >= 7
													}
													set_variable = {
														name = math_ln_lt
														value = 77.821
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 155.042
													}
												}
											}
										}
										else = {
											if = {
												limit = {
													var:math_lt_ind >= 3
												}
												if = {
													limit = {
														var:math_lt_ind >= 4
													}
													if = {
														limit = {
															var:math_lt_ind >= 5
														}
														set_variable = {
															name = math_ln_lt
															value = 307.717
														}
													}
													else = {
														set_variable = {
															name = math_ln_lt
															value = 606.246
														}
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 1177.83
													}
												}
											}
											else = {
												if = {
													limit = {
														var:math_lt_ind >= 2
													}
													set_variable = {
														name = math_ln_lt
														value = 2231.436
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 4054.651
													}
												}
											}
										}
										remove_variable = math_lt_ind
										change_variable = {
											name = math_pow_ln
											add = var:math_ln_lt
										}
									}
								}
								change_variable = {
									name = math_pow_ln
									divide = 10000
								}
								remove_variable = math_ln_k
								remove_variable = math_ln_div
								remove_variable = math_ln_t
								remove_variable = math_ln_lt
								remove_variable = math_ln_inp
								change_variable = {
									name = math_pow_exp
									multiply = var:math_pow_ln
								}
								set_variable = {
									name = math_e_exp
									value = var:math_pow_exp
								}
								set_variable = {
									name = math_pow_e
									value = 1
								}
								while = {
									limit = {
										var:math_e_exp >= 1
									}
									change_variable = {
										name = math_e_exp
										subtract = 1
									}
									change_variable = {
										name = math_pow_e
										multiply = 2.718
									}
								}
								while = {
									limit = {
										var:math_e_exp < 0
									}
									change_variable = {
										name = math_e_exp
										add = 1
									}
									change_variable = {
										name = math_pow_e
										divide = 2.718
									}
								}
								set_variable = {
									name = math_e_sm
									value = 1
								}
								if = {
									limit = {
										var:math_e_exp != 0
									}
									set_variable = {
										name = math_e_sq
										value = var:math_e_exp
									}
									change_variable = {
										name = math_e_sq
										multiply = var:math_e_exp
									}
									set_variable = {
										name = math_e_fct
										value = 2
									}
									set_variable = {
										name = math_e_fctl
										value = 2
									}
									set_variable = {
										name = math_e_a1
										value = var:math_e_sq
									}
									set_variable = {
										name = math_e_a2
										value = var:math_e_exp
									}
									set_variable = {
										name = math_e_a3
										value = 2
									}
									set_variable = {
										name = math_e_tmp
										value = var:math_e_a2
									}
									change_variable = {
										name = math_e_tmp
										multiply = var:math_e_a3
									}
									change_variable = {
										name = math_e_tmp
										add = var:math_e_a1
									}
									change_variable = {
										name = math_e_tmp
										divide = var:math_e_fct
									}
									change_variable = {
										name = math_e_sm
										add = var:math_e_tmp
									}
									set_variable = {
										name = math_e_prec
										value = 3
									}
									change_variable = {
										name = math_e_prec
										subtract = 1
									}
									while = {
										limit = {
											var:math_e_prec >= 1
										}
										change_variable = {
											name = math_e_prec
											subtract = 1
										}
										change_variable = {
											name = math_e_fctl
											add = 1
										}
										change_variable = {
											name = math_e_fct
											multiply = var:math_e_fctl
										}
										change_variable = {
											name = math_e_fctl
											add = 1
										}
										change_variable = {
											name = math_e_fct
											multiply = var:math_e_fctl
										}
										change_variable = {
											name = math_e_a1
											multiply = var:math_e_sq
										}
										change_variable = {
											name = math_e_a2
											multiply = var:math_e_sq
										}
										change_variable = {
											name = math_e_a3
											add = 2
										}
										set_variable = {
											name = math_e_tmp
											value = var:math_e_a2
										}
										change_variable = {
											name = math_e_tmp
											multiply = var:math_e_a3
										}
										change_variable = {
											name = math_e_tmp
											add = var:math_e_a1
										}
										change_variable = {
											name = math_e_tmp
											divide = var:math_e_fct
										}
										change_variable = {
											name = math_e_sm
											add = var:math_e_tmp
										}
									}
								}
								change_variable = {
									name = math_pow_e
									multiply = var:math_e_sm
								}
								remove_variable = math_e_sm
								remove_variable = math_e_tmp
								remove_variable = math_e_a1
								remove_variable = math_e_a2
								remove_variable = math_e_a3
								remove_variable = math_e_fctl
								remove_variable = math_e_fct
								remove_variable = math_e_prec
								remove_variable = math_e_sq
								remove_variable = math_e_exp
								change_variable = {
									name = get_distance_neighb_x_diff
									multiply = var:math_pow_e
								}
								remove_variable = math_pow_ln
								remove_variable = math_pow_e
							}
						}
						else = {
							set_variable = {
								name = get_distance_neighb_x_diff
								value = 0
							}
						}
						remove_variable = math_pow_base
						remove_variable = math_pow_exp
						set_variable = {
							name = math_pow_base
							value = var:get_distance_neighb_y_diff
						}
						set_variable = {
							name = math_pow_exp
							value = 2
						}
						if = {
							limit = {
								has_variable = math_pow_base
								var:math_pow_base != 0
							}
							set_variable = {
								name = get_distance_neighb_y_diff
								value = 1
							}
							while = {
								limit = {
									var:math_pow_exp >= 1
								}
								change_variable = {
									name = math_pow_exp
									subtract = 1
								}
								change_variable = {
									name = get_distance_neighb_y_diff
									multiply = var:math_pow_base
								}
							}
							while = {
								limit = {
									var:math_pow_exp < 0
								}
								change_variable = {
									name = math_pow_exp
									add = 1
								}
								change_variable = {
									name = get_distance_neighb_y_diff
									divide = var:math_pow_base
								}
							}
							if = {
								limit = {
									var:math_pow_exp != 0
								}
								set_variable = {
									name = math_ln_inp
									value = var:math_pow_base
								}
								set_variable = {
									name = math_pow_ln
									value = 0
								}
								set_variable = {
									name = math_ln_k
									value = 0
								}
								set_variable = {
									name = math_ln_div
									value = 10000
								}
								while = {
									limit = {
										var:math_ln_inp >= 2
									}
									change_variable = {
										name = math_ln_inp
										divide = 2
									}
									change_variable = {
										name = math_pow_ln
										add = 6931.472
									}
								}
								while = {
									limit = {
										var:math_ln_inp < 1
									}
									change_variable = {
										name = math_ln_inp
										multiply = 2
									}
									change_variable = {
										name = math_pow_ln
										subtract = 6931.472
									}
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								while = {
									limit = {
										var:math_ln_k < 10
									}
									change_variable = {
										name = math_ln_k
										add = 1
									}
									change_variable = {
										name = math_ln_div
										divide = 2
									}
									set_variable = {
										name = math_ln_t
										value = 10000
									}
									change_variable = {
										name = math_ln_t
										add = var:math_ln_div
									}
									if = {
										limit = {
											var:math_ln_inp = {
												compare_value >= prev.var:math_ln_t
											}
										}
										change_variable = {
											name = math_ln_inp
											divide = var:math_ln_t
										}
										change_variable = {
											name = math_ln_inp
											multiply = 10000
										}
										set_variable = {
											name = math_lt_ind
											value = var:math_ln_k
										}
										if = {
											limit = {
												var:math_lt_ind >= 6
											}
											if = {
												limit = {
													var:math_lt_ind >= 8
												}
												if = {
													limit = {
														var:math_lt_ind >= 9
													}
													if = {
														limit = {
															var:math_lt_ind >= 10
														}
														set_variable = {
															name = math_ln_lt
															value = 9.761
														}
													}
													else = {
														set_variable = {
															name = math_ln_lt
															value = 19.512
														}
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 38.986
													}
												}
											}
											else = {
												if = {
													limit = {
														var:math_lt_ind >= 7
													}
													set_variable = {
														name = math_ln_lt
														value = 77.821
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 155.042
													}
												}
											}
										}
										else = {
											if = {
												limit = {
													var:math_lt_ind >= 3
												}
												if = {
													limit = {
														var:math_lt_ind >= 4
													}
													if = {
														limit = {
															var:math_lt_ind >= 5
														}
														set_variable = {
															name = math_ln_lt
															value = 307.717
														}
													}
													else = {
														set_variable = {
															name = math_ln_lt
															value = 606.246
														}
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 1177.83
													}
												}
											}
											else = {
												if = {
													limit = {
														var:math_lt_ind >= 2
													}
													set_variable = {
														name = math_ln_lt
														value = 2231.436
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 4054.651
													}
												}
											}
										}
										remove_variable = math_lt_ind
										change_variable = {
											name = math_pow_ln
											add = var:math_ln_lt
										}
									}
								}
								change_variable = {
									name = math_pow_ln
									divide = 10000
								}
								remove_variable = math_ln_k
								remove_variable = math_ln_div
								remove_variable = math_ln_t
								remove_variable = math_ln_lt
								remove_variable = math_ln_inp
								change_variable = {
									name = math_pow_exp
									multiply = var:math_pow_ln
								}
								set_variable = {
									name = math_e_exp
									value = var:math_pow_exp
								}
								set_variable = {
									name = math_pow_e
									value = 1
								}
								while = {
									limit = {
										var:math_e_exp >= 1
									}
									change_variable = {
										name = math_e_exp
										subtract = 1
									}
									change_variable = {
										name = math_pow_e
										multiply = 2.718
									}
								}
								while = {
									limit = {
										var:math_e_exp < 0
									}
									change_variable = {
										name = math_e_exp
										add = 1
									}
									change_variable = {
										name = math_pow_e
										divide = 2.718
									}
								}
								set_variable = {
									name = math_e_sm
									value = 1
								}
								if = {
									limit = {
										var:math_e_exp != 0
									}
									set_variable = {
										name = math_e_sq
										value = var:math_e_exp
									}
									change_variable = {
										name = math_e_sq
										multiply = var:math_e_exp
									}
									set_variable = {
										name = math_e_fct
										value = 2
									}
									set_variable = {
										name = math_e_fctl
										value = 2
									}
									set_variable = {
										name = math_e_a1
										value = var:math_e_sq
									}
									set_variable = {
										name = math_e_a2
										value = var:math_e_exp
									}
									set_variable = {
										name = math_e_a3
										value = 2
									}
									set_variable = {
										name = math_e_tmp
										value = var:math_e_a2
									}
									change_variable = {
										name = math_e_tmp
										multiply = var:math_e_a3
									}
									change_variable = {
										name = math_e_tmp
										add = var:math_e_a1
									}
									change_variable = {
										name = math_e_tmp
										divide = var:math_e_fct
									}
									change_variable = {
										name = math_e_sm
										add = var:math_e_tmp
									}
									set_variable = {
										name = math_e_prec
										value = 3
									}
									change_variable = {
										name = math_e_prec
										subtract = 1
									}
									while = {
										limit = {
											var:math_e_prec >= 1
										}
										change_variable = {
											name = math_e_prec
											subtract = 1
										}
										change_variable = {
											name = math_e_fctl
											add = 1
										}
										change_variable = {
											name = math_e_fct
											multiply = var:math_e_fctl
										}
										change_variable = {
											name = math_e_fctl
											add = 1
										}
										change_variable = {
											name = math_e_fct
											multiply = var:math_e_fctl
										}
										change_variable = {
											name = math_e_a1
											multiply = var:math_e_sq
										}
										change_variable = {
											name = math_e_a2
											multiply = var:math_e_sq
										}
										change_variable = {
											name = math_e_a3
											add = 2
										}
										set_variable = {
											name = math_e_tmp
											value = var:math_e_a2
										}
										change_variable = {
											name = math_e_tmp
											multiply = var:math_e_a3
										}
										change_variable = {
											name = math_e_tmp
											add = var:math_e_a1
										}
										change_variable = {
											name = math_e_tmp
											divide = var:math_e_fct
										}
										change_variable = {
											name = math_e_sm
											add = var:math_e_tmp
										}
									}
								}
								change_variable = {
									name = math_pow_e
									multiply = var:math_e_sm
								}
								remove_variable = math_e_sm
								remove_variable = math_e_tmp
								remove_variable = math_e_a1
								remove_variable = math_e_a2
								remove_variable = math_e_a3
								remove_variable = math_e_fctl
								remove_variable = math_e_fct
								remove_variable = math_e_prec
								remove_variable = math_e_sq
								remove_variable = math_e_exp
								change_variable = {
									name = get_distance_neighb_y_diff
									multiply = var:math_pow_e
								}
								remove_variable = math_pow_ln
								remove_variable = math_pow_e
							}
						}
						else = {
							set_variable = {
								name = get_distance_neighb_y_diff
								value = 0
							}
						}
						remove_variable = math_pow_base
						remove_variable = math_pow_exp
						set_variable = {
							name = get_distance_neighb_diff
							value = var:get_distance_neighb_x_diff
						}
						change_variable = {
							name = get_distance_neighb_diff
							add = var:get_distance_neighb_y_diff
						}
						set_variable = {
							name = math_pow_base
							value = var:get_distance_neighb_diff
						}
						set_variable = {
							name = math_pow_exp
							value = 0.5
						}
						if = {
							limit = {
								has_variable = math_pow_base
								var:math_pow_base != 0
							}
							set_variable = {
								name = get_distance_neighb_diff
								value = 1
							}
							while = {
								limit = {
									var:math_pow_exp >= 1
								}
								change_variable = {
									name = math_pow_exp
									subtract = 1
								}
								change_variable = {
									name = get_distance_neighb_diff
									multiply = var:math_pow_base
								}
							}
							while = {
								limit = {
									var:math_pow_exp < 0
								}
								change_variable = {
									name = math_pow_exp
									add = 1
								}
								change_variable = {
									name = get_distance_neighb_diff
									divide = var:math_pow_base
								}
							}
							if = {
								limit = {
									var:math_pow_exp != 0
								}
								set_variable = {
									name = math_ln_inp
									value = var:math_pow_base
								}
								set_variable = {
									name = math_pow_ln
									value = 0
								}
								set_variable = {
									name = math_ln_k
									value = 0
								}
								set_variable = {
									name = math_ln_div
									value = 10000
								}
								while = {
									limit = {
										var:math_ln_inp >= 2
									}
									change_variable = {
										name = math_ln_inp
										divide = 2
									}
									change_variable = {
										name = math_pow_ln
										add = 6931.472
									}
								}
								while = {
									limit = {
										var:math_ln_inp < 1
									}
									change_variable = {
										name = math_ln_inp
										multiply = 2
									}
									change_variable = {
										name = math_pow_ln
										subtract = 6931.472
									}
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								while = {
									limit = {
										var:math_ln_k < 10
									}
									change_variable = {
										name = math_ln_k
										add = 1
									}
									change_variable = {
										name = math_ln_div
										divide = 2
									}
									set_variable = {
										name = math_ln_t
										value = 10000
									}
									change_variable = {
										name = math_ln_t
										add = var:math_ln_div
									}
									if = {
										limit = {
											var:math_ln_inp = {
												compare_value >= prev.var:math_ln_t
											}
										}
										change_variable = {
											name = math_ln_inp
											divide = var:math_ln_t
										}
										change_variable = {
											name = math_ln_inp
											multiply = 10000
										}
										set_variable = {
											name = math_lt_ind
											value = var:math_ln_k
										}
										if = {
											limit = {
												var:math_lt_ind >= 6
											}
											if = {
												limit = {
													var:math_lt_ind >= 8
												}
												if = {
													limit = {
														var:math_lt_ind >= 9
													}
													if = {
														limit = {
															var:math_lt_ind >= 10
														}
														set_variable = {
															name = math_ln_lt
															value = 9.761
														}
													}
													else = {
														set_variable = {
															name = math_ln_lt
															value = 19.512
														}
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 38.986
													}
												}
											}
											else = {
												if = {
													limit = {
														var:math_lt_ind >= 7
													}
													set_variable = {
														name = math_ln_lt
														value = 77.821
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 155.042
													}
												}
											}
										}
										else = {
											if = {
												limit = {
													var:math_lt_ind >= 3
												}
												if = {
													limit = {
														var:math_lt_ind >= 4
													}
													if = {
														limit = {
															var:math_lt_ind >= 5
														}
														set_variable = {
															name = math_ln_lt
															value = 307.717
														}
													}
													else = {
														set_variable = {
															name = math_ln_lt
															value = 606.246
														}
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 1177.83
													}
												}
											}
											else = {
												if = {
													limit = {
														var:math_lt_ind >= 2
													}
													set_variable = {
														name = math_ln_lt
														value = 2231.436
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 4054.651
													}
												}
											}
										}
										remove_variable = math_lt_ind
										change_variable = {
											name = math_pow_ln
											add = var:math_ln_lt
										}
									}
								}
								change_variable = {
									name = math_pow_ln
									divide = 10000
								}
								remove_variable = math_ln_k
								remove_variable = math_ln_div
								remove_variable = math_ln_t
								remove_variable = math_ln_lt
								remove_variable = math_ln_inp
								change_variable = {
									name = math_pow_exp
									multiply = var:math_pow_ln
								}
								set_variable = {
									name = math_e_exp
									value = var:math_pow_exp
								}
								set_variable = {
									name = math_pow_e
									value = 1
								}
								while = {
									limit = {
										var:math_e_exp >= 1
									}
									change_variable = {
										name = math_e_exp
										subtract = 1
									}
									change_variable = {
										name = math_pow_e
										multiply = 2.718
									}
								}
								while = {
									limit = {
										var:math_e_exp < 0
									}
									change_variable = {
										name = math_e_exp
										add = 1
									}
									change_variable = {
										name = math_pow_e
										divide = 2.718
									}
								}
								set_variable = {
									name = math_e_sm
									value = 1
								}
								if = {
									limit = {
										var:math_e_exp != 0
									}
									set_variable = {
										name = math_e_sq
										value = var:math_e_exp
									}
									change_variable = {
										name = math_e_sq
										multiply = var:math_e_exp
									}
									set_variable = {
										name = math_e_fct
										value = 2
									}
									set_variable = {
										name = math_e_fctl
										value = 2
									}
									set_variable = {
										name = math_e_a1
										value = var:math_e_sq
									}
									set_variable = {
										name = math_e_a2
										value = var:math_e_exp
									}
									set_variable = {
										name = math_e_a3
										value = 2
									}
									set_variable = {
										name = math_e_tmp
										value = var:math_e_a2
									}
									change_variable = {
										name = math_e_tmp
										multiply = var:math_e_a3
									}
									change_variable = {
										name = math_e_tmp
										add = var:math_e_a1
									}
									change_variable = {
										name = math_e_tmp
										divide = var:math_e_fct
									}
									change_variable = {
										name = math_e_sm
										add = var:math_e_tmp
									}
									set_variable = {
										name = math_e_prec
										value = 3
									}
									change_variable = {
										name = math_e_prec
										subtract = 1
									}
									while = {
										limit = {
											var:math_e_prec >= 1
										}
										change_variable = {
											name = math_e_prec
											subtract = 1
										}
										change_variable = {
											name = math_e_fctl
											add = 1
										}
										change_variable = {
											name = math_e_fct
											multiply = var:math_e_fctl
										}
										change_variable = {
											name = math_e_fctl
											add = 1
										}
										change_variable = {
											name = math_e_fct
											multiply = var:math_e_fctl
										}
										change_variable = {
											name = math_e_a1
											multiply = var:math_e_sq
										}
										change_variable = {
											name = math_e_a2
											multiply = var:math_e_sq
										}
										change_variable = {
											name = math_e_a3
											add = 2
										}
										set_variable = {
											name = math_e_tmp
											value = var:math_e_a2
										}
										change_variable = {
											name = math_e_tmp
											multiply = var:math_e_a3
										}
										change_variable = {
											name = math_e_tmp
											add = var:math_e_a1
										}
										change_variable = {
											name = math_e_tmp
											divide = var:math_e_fct
										}
										change_variable = {
											name = math_e_sm
											add = var:math_e_tmp
										}
									}
								}
								change_variable = {
									name = math_pow_e
									multiply = var:math_e_sm
								}
								remove_variable = math_e_sm
								remove_variable = math_e_tmp
								remove_variable = math_e_a1
								remove_variable = math_e_a2
								remove_variable = math_e_a3
								remove_variable = math_e_fctl
								remove_variable = math_e_fct
								remove_variable = math_e_prec
								remove_variable = math_e_sq
								remove_variable = math_e_exp
								change_variable = {
									name = get_distance_neighb_diff
									multiply = var:math_pow_e
								}
								remove_variable = math_pow_ln
								remove_variable = math_pow_e
							}
						}
						else = {
							set_variable = {
								name = get_distance_neighb_diff
								value = 0
							}
						}
						remove_variable = math_pow_base
						remove_variable = math_pow_exp
						set_variable = {
							name = get_distance_neighb_cost
							value = global_var:travel_distance_select.var:prov_cost
						}
						change_variable = {
							name = get_distance_neighb_cost
							add = this.var:prov_cost
						}
						set_variable = {
							name = travel_distance_distance_new
							value = var:get_distance_neighb_diff
						}
						change_variable = {
							name = travel_distance_distance_new
							multiply = var:get_distance_neighb_cost
						}
						change_variable = {
							name = travel_distance_distance_new
							add = global_var:travel_distance_select.var:travel_distance_distance
						}
						remove_variable = get_distance_neighb_x_diff
						remove_variable = get_distance_neighb_y_diff
						remove_variable = get_distance_neighb_diff
						remove_variable = get_distance_neighb_cost
						if = {
							limit = {
								var:travel_distance_distance_new <= 285
								var:travel_distance_distance_new = {
									compare_value < prev.var:travel_distance_distance
								}
							}
							add_to_global_variable_list = {
								name = travel_distance_fray
								target = this
							}
							add_to_global_variable_list = {
								name = travel_distance_visited
								target = this
							}
							set_variable = {
								name = travel_distance_distance
								value = var:travel_distance_distance_new
							}
							set_variable = {
								name = travel_distance_prev
								value = global_var:travel_distance_select
							}
						}
					}
				}
				if = {
					limit = {
						has_variable_list = prov_port
					}
					every_in_list = {
						variable = prov_port
						limit = {
							has_variable = travel_distance_distance
						}
						set_variable = {
							name = get_distance_port_cost
							value = 20
						}
						set_variable = {
							name = get_distance_neighb_x_diff
							value = global_var:travel_distance_select.var:prov_x
						}
						set_variable = {
							name = get_distance_neighb_y_diff
							value = global_var:travel_distance_select.var:prov_y
						}
						change_variable = {
							name = get_distance_neighb_x_diff
							subtract = this.var:prov_x
						}
						change_variable = {
							name = get_distance_neighb_y_diff
							subtract = this.var:prov_y
						}
						change_variable = {
							name = get_distance_neighb_x_diff
							divide = 10
						}
						change_variable = {
							name = get_distance_neighb_y_diff
							divide = 10
						}
						set_variable = {
							name = math_pow_base
							value = var:get_distance_neighb_x_diff
						}
						set_variable = {
							name = math_pow_exp
							value = 2
						}
						if = {
							limit = {
								has_variable = math_pow_base
								var:math_pow_base != 0
							}
							set_variable = {
								name = get_distance_neighb_x_diff
								value = 1
							}
							while = {
								limit = {
									var:math_pow_exp >= 1
								}
								change_variable = {
									name = math_pow_exp
									subtract = 1
								}
								change_variable = {
									name = get_distance_neighb_x_diff
									multiply = var:math_pow_base
								}
							}
							while = {
								limit = {
									var:math_pow_exp < 0
								}
								change_variable = {
									name = math_pow_exp
									add = 1
								}
								change_variable = {
									name = get_distance_neighb_x_diff
									divide = var:math_pow_base
								}
							}
							if = {
								limit = {
									var:math_pow_exp != 0
								}
								set_variable = {
									name = math_ln_inp
									value = var:math_pow_base
								}
								set_variable = {
									name = math_pow_ln
									value = 0
								}
								set_variable = {
									name = math_ln_k
									value = 0
								}
								set_variable = {
									name = math_ln_div
									value = 10000
								}
								while = {
									limit = {
										var:math_ln_inp >= 2
									}
									change_variable = {
										name = math_ln_inp
										divide = 2
									}
									change_variable = {
										name = math_pow_ln
										add = 6931.472
									}
								}
								while = {
									limit = {
										var:math_ln_inp < 1
									}
									change_variable = {
										name = math_ln_inp
										multiply = 2
									}
									change_variable = {
										name = math_pow_ln
										subtract = 6931.472
									}
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								while = {
									limit = {
										var:math_ln_k < 10
									}
									change_variable = {
										name = math_ln_k
										add = 1
									}
									change_variable = {
										name = math_ln_div
										divide = 2
									}
									set_variable = {
										name = math_ln_t
										value = 10000
									}
									change_variable = {
										name = math_ln_t
										add = var:math_ln_div
									}
									if = {
										limit = {
											var:math_ln_inp = {
												compare_value >= prev.var:math_ln_t
											}
										}
										change_variable = {
											name = math_ln_inp
											divide = var:math_ln_t
										}
										change_variable = {
											name = math_ln_inp
											multiply = 10000
										}
										set_variable = {
											name = math_lt_ind
											value = var:math_ln_k
										}
										if = {
											limit = {
												var:math_lt_ind >= 6
											}
											if = {
												limit = {
													var:math_lt_ind >= 8
												}
												if = {
													limit = {
														var:math_lt_ind >= 9
													}
													if = {
														limit = {
															var:math_lt_ind >= 10
														}
														set_variable = {
															name = math_ln_lt
															value = 9.761
														}
													}
													else = {
														set_variable = {
															name = math_ln_lt
															value = 19.512
														}
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 38.986
													}
												}
											}
											else = {
												if = {
													limit = {
														var:math_lt_ind >= 7
													}
													set_variable = {
														name = math_ln_lt
														value = 77.821
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 155.042
													}
												}
											}
										}
										else = {
											if = {
												limit = {
													var:math_lt_ind >= 3
												}
												if = {
													limit = {
														var:math_lt_ind >= 4
													}
													if = {
														limit = {
															var:math_lt_ind >= 5
														}
														set_variable = {
															name = math_ln_lt
															value = 307.717
														}
													}
													else = {
														set_variable = {
															name = math_ln_lt
															value = 606.246
														}
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 1177.83
													}
												}
											}
											else = {
												if = {
													limit = {
														var:math_lt_ind >= 2
													}
													set_variable = {
														name = math_ln_lt
														value = 2231.436
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 4054.651
													}
												}
											}
										}
										remove_variable = math_lt_ind
										change_variable = {
											name = math_pow_ln
											add = var:math_ln_lt
										}
									}
								}
								change_variable = {
									name = math_pow_ln
									divide = 10000
								}
								remove_variable = math_ln_k
								remove_variable = math_ln_div
								remove_variable = math_ln_t
								remove_variable = math_ln_lt
								remove_variable = math_ln_inp
								change_variable = {
									name = math_pow_exp
									multiply = var:math_pow_ln
								}
								set_variable = {
									name = math_e_exp
									value = var:math_pow_exp
								}
								set_variable = {
									name = math_pow_e
									value = 1
								}
								while = {
									limit = {
										var:math_e_exp >= 1
									}
									change_variable = {
										name = math_e_exp
										subtract = 1
									}
									change_variable = {
										name = math_pow_e
										multiply = 2.718
									}
								}
								while = {
									limit = {
										var:math_e_exp < 0
									}
									change_variable = {
										name = math_e_exp
										add = 1
									}
									change_variable = {
										name = math_pow_e
										divide = 2.718
									}
								}
								set_variable = {
									name = math_e_sm
									value = 1
								}
								if = {
									limit = {
										var:math_e_exp != 0
									}
									set_variable = {
										name = math_e_sq
										value = var:math_e_exp
									}
									change_variable = {
										name = math_e_sq
										multiply = var:math_e_exp
									}
									set_variable = {
										name = math_e_fct
										value = 2
									}
									set_variable = {
										name = math_e_fctl
										value = 2
									}
									set_variable = {
										name = math_e_a1
										value = var:math_e_sq
									}
									set_variable = {
										name = math_e_a2
										value = var:math_e_exp
									}
									set_variable = {
										name = math_e_a3
										value = 2
									}
									set_variable = {
										name = math_e_tmp
										value = var:math_e_a2
									}
									change_variable = {
										name = math_e_tmp
										multiply = var:math_e_a3
									}
									change_variable = {
										name = math_e_tmp
										add = var:math_e_a1
									}
									change_variable = {
										name = math_e_tmp
										divide = var:math_e_fct
									}
									change_variable = {
										name = math_e_sm
										add = var:math_e_tmp
									}
									set_variable = {
										name = math_e_prec
										value = 3
									}
									change_variable = {
										name = math_e_prec
										subtract = 1
									}
									while = {
										limit = {
											var:math_e_prec >= 1
										}
										change_variable = {
											name = math_e_prec
											subtract = 1
										}
										change_variable = {
											name = math_e_fctl
											add = 1
										}
										change_variable = {
											name = math_e_fct
											multiply = var:math_e_fctl
										}
										change_variable = {
											name = math_e_fctl
											add = 1
										}
										change_variable = {
											name = math_e_fct
											multiply = var:math_e_fctl
										}
										change_variable = {
											name = math_e_a1
											multiply = var:math_e_sq
										}
										change_variable = {
											name = math_e_a2
											multiply = var:math_e_sq
										}
										change_variable = {
											name = math_e_a3
											add = 2
										}
										set_variable = {
											name = math_e_tmp
											value = var:math_e_a2
										}
										change_variable = {
											name = math_e_tmp
											multiply = var:math_e_a3
										}
										change_variable = {
											name = math_e_tmp
											add = var:math_e_a1
										}
										change_variable = {
											name = math_e_tmp
											divide = var:math_e_fct
										}
										change_variable = {
											name = math_e_sm
											add = var:math_e_tmp
										}
									}
								}
								change_variable = {
									name = math_pow_e
									multiply = var:math_e_sm
								}
								remove_variable = math_e_sm
								remove_variable = math_e_tmp
								remove_variable = math_e_a1
								remove_variable = math_e_a2
								remove_variable = math_e_a3
								remove_variable = math_e_fctl
								remove_variable = math_e_fct
								remove_variable = math_e_prec
								remove_variable = math_e_sq
								remove_variable = math_e_exp
								change_variable = {
									name = get_distance_neighb_x_diff
									multiply = var:math_pow_e
								}
								remove_variable = math_pow_ln
								remove_variable = math_pow_e
							}
						}
						else = {
							set_variable = {
								name = get_distance_neighb_x_diff
								value = 0
							}
						}
						remove_variable = math_pow_base
						remove_variable = math_pow_exp
						set_variable = {
							name = math_pow_base
							value = var:get_distance_neighb_y_diff
						}
						set_variable = {
							name = math_pow_exp
							value = 2
						}
						if = {
							limit = {
								has_variable = math_pow_base
								var:math_pow_base != 0
							}
							set_variable = {
								name = get_distance_neighb_y_diff
								value = 1
							}
							while = {
								limit = {
									var:math_pow_exp >= 1
								}
								change_variable = {
									name = math_pow_exp
									subtract = 1
								}
								change_variable = {
									name = get_distance_neighb_y_diff
									multiply = var:math_pow_base
								}
							}
							while = {
								limit = {
									var:math_pow_exp < 0
								}
								change_variable = {
									name = math_pow_exp
									add = 1
								}
								change_variable = {
									name = get_distance_neighb_y_diff
									divide = var:math_pow_base
								}
							}
							if = {
								limit = {
									var:math_pow_exp != 0
								}
								set_variable = {
									name = math_ln_inp
									value = var:math_pow_base
								}
								set_variable = {
									name = math_pow_ln
									value = 0
								}
								set_variable = {
									name = math_ln_k
									value = 0
								}
								set_variable = {
									name = math_ln_div
									value = 10000
								}
								while = {
									limit = {
										var:math_ln_inp >= 2
									}
									change_variable = {
										name = math_ln_inp
										divide = 2
									}
									change_variable = {
										name = math_pow_ln
										add = 6931.472
									}
								}
								while = {
									limit = {
										var:math_ln_inp < 1
									}
									change_variable = {
										name = math_ln_inp
										multiply = 2
									}
									change_variable = {
										name = math_pow_ln
										subtract = 6931.472
									}
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								while = {
									limit = {
										var:math_ln_k < 10
									}
									change_variable = {
										name = math_ln_k
										add = 1
									}
									change_variable = {
										name = math_ln_div
										divide = 2
									}
									set_variable = {
										name = math_ln_t
										value = 10000
									}
									change_variable = {
										name = math_ln_t
										add = var:math_ln_div
									}
									if = {
										limit = {
											var:math_ln_inp = {
												compare_value >= prev.var:math_ln_t
											}
										}
										change_variable = {
											name = math_ln_inp
											divide = var:math_ln_t
										}
										change_variable = {
											name = math_ln_inp
											multiply = 10000
										}
										set_variable = {
											name = math_lt_ind
											value = var:math_ln_k
										}
										if = {
											limit = {
												var:math_lt_ind >= 6
											}
											if = {
												limit = {
													var:math_lt_ind >= 8
												}
												if = {
													limit = {
														var:math_lt_ind >= 9
													}
													if = {
														limit = {
															var:math_lt_ind >= 10
														}
														set_variable = {
															name = math_ln_lt
															value = 9.761
														}
													}
													else = {
														set_variable = {
															name = math_ln_lt
															value = 19.512
														}
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 38.986
													}
												}
											}
											else = {
												if = {
													limit = {
														var:math_lt_ind >= 7
													}
													set_variable = {
														name = math_ln_lt
														value = 77.821
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 155.042
													}
												}
											}
										}
										else = {
											if = {
												limit = {
													var:math_lt_ind >= 3
												}
												if = {
													limit = {
														var:math_lt_ind >= 4
													}
													if = {
														limit = {
															var:math_lt_ind >= 5
														}
														set_variable = {
															name = math_ln_lt
															value = 307.717
														}
													}
													else = {
														set_variable = {
															name = math_ln_lt
															value = 606.246
														}
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 1177.83
													}
												}
											}
											else = {
												if = {
													limit = {
														var:math_lt_ind >= 2
													}
													set_variable = {
														name = math_ln_lt
														value = 2231.436
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 4054.651
													}
												}
											}
										}
										remove_variable = math_lt_ind
										change_variable = {
											name = math_pow_ln
											add = var:math_ln_lt
										}
									}
								}
								change_variable = {
									name = math_pow_ln
									divide = 10000
								}
								remove_variable = math_ln_k
								remove_variable = math_ln_div
								remove_variable = math_ln_t
								remove_variable = math_ln_lt
								remove_variable = math_ln_inp
								change_variable = {
									name = math_pow_exp
									multiply = var:math_pow_ln
								}
								set_variable = {
									name = math_e_exp
									value = var:math_pow_exp
								}
								set_variable = {
									name = math_pow_e
									value = 1
								}
								while = {
									limit = {
										var:math_e_exp >= 1
									}
									change_variable = {
										name = math_e_exp
										subtract = 1
									}
									change_variable = {
										name = math_pow_e
										multiply = 2.718
									}
								}
								while = {
									limit = {
										var:math_e_exp < 0
									}
									change_variable = {
										name = math_e_exp
										add = 1
									}
									change_variable = {
										name = math_pow_e
										divide = 2.718
									}
								}
								set_variable = {
									name = math_e_sm
									value = 1
								}
								if = {
									limit = {
										var:math_e_exp != 0
									}
									set_variable = {
										name = math_e_sq
										value = var:math_e_exp
									}
									change_variable = {
										name = math_e_sq
										multiply = var:math_e_exp
									}
									set_variable = {
										name = math_e_fct
										value = 2
									}
									set_variable = {
										name = math_e_fctl
										value = 2
									}
									set_variable = {
										name = math_e_a1
										value = var:math_e_sq
									}
									set_variable = {
										name = math_e_a2
										value = var:math_e_exp
									}
									set_variable = {
										name = math_e_a3
										value = 2
									}
									set_variable = {
										name = math_e_tmp
										value = var:math_e_a2
									}
									change_variable = {
										name = math_e_tmp
										multiply = var:math_e_a3
									}
									change_variable = {
										name = math_e_tmp
										add = var:math_e_a1
									}
									change_variable = {
										name = math_e_tmp
										divide = var:math_e_fct
									}
									change_variable = {
										name = math_e_sm
										add = var:math_e_tmp
									}
									set_variable = {
										name = math_e_prec
										value = 3
									}
									change_variable = {
										name = math_e_prec
										subtract = 1
									}
									while = {
										limit = {
											var:math_e_prec >= 1
										}
										change_variable = {
											name = math_e_prec
											subtract = 1
										}
										change_variable = {
											name = math_e_fctl
											add = 1
										}
										change_variable = {
											name = math_e_fct
											multiply = var:math_e_fctl
										}
										change_variable = {
											name = math_e_fctl
											add = 1
										}
										change_variable = {
											name = math_e_fct
											multiply = var:math_e_fctl
										}
										change_variable = {
											name = math_e_a1
											multiply = var:math_e_sq
										}
										change_variable = {
											name = math_e_a2
											multiply = var:math_e_sq
										}
										change_variable = {
											name = math_e_a3
											add = 2
										}
										set_variable = {
											name = math_e_tmp
											value = var:math_e_a2
										}
										change_variable = {
											name = math_e_tmp
											multiply = var:math_e_a3
										}
										change_variable = {
											name = math_e_tmp
											add = var:math_e_a1
										}
										change_variable = {
											name = math_e_tmp
											divide = var:math_e_fct
										}
										change_variable = {
											name = math_e_sm
											add = var:math_e_tmp
										}
									}
								}
								change_variable = {
									name = math_pow_e
									multiply = var:math_e_sm
								}
								remove_variable = math_e_sm
								remove_variable = math_e_tmp
								remove_variable = math_e_a1
								remove_variable = math_e_a2
								remove_variable = math_e_a3
								remove_variable = math_e_fctl
								remove_variable = math_e_fct
								remove_variable = math_e_prec
								remove_variable = math_e_sq
								remove_variable = math_e_exp
								change_variable = {
									name = get_distance_neighb_y_diff
									multiply = var:math_pow_e
								}
								remove_variable = math_pow_ln
								remove_variable = math_pow_e
							}
						}
						else = {
							set_variable = {
								name = get_distance_neighb_y_diff
								value = 0
							}
						}
						remove_variable = math_pow_base
						remove_variable = math_pow_exp
						set_variable = {
							name = get_distance_neighb_diff
							value = var:get_distance_neighb_x_diff
						}
						change_variable = {
							name = get_distance_neighb_diff
							add = var:get_distance_neighb_y_diff
						}
						set_variable = {
							name = math_pow_base
							value = var:get_distance_neighb_diff
						}
						set_variable = {
							name = math_pow_exp
							value = 0.5
						}
						if = {
							limit = {
								has_variable = math_pow_base
								var:math_pow_base != 0
							}
							set_variable = {
								name = get_distance_neighb_diff
								value = 1
							}
							while = {
								limit = {
									var:math_pow_exp >= 1
								}
								change_variable = {
									name = math_pow_exp
									subtract = 1
								}
								change_variable = {
									name = get_distance_neighb_diff
									multiply = var:math_pow_base
								}
							}
							while = {
								limit = {
									var:math_pow_exp < 0
								}
								change_variable = {
									name = math_pow_exp
									add = 1
								}
								change_variable = {
									name = get_distance_neighb_diff
									divide = var:math_pow_base
								}
							}
							if = {
								limit = {
									var:math_pow_exp != 0
								}
								set_variable = {
									name = math_ln_inp
									value = var:math_pow_base
								}
								set_variable = {
									name = math_pow_ln
									value = 0
								}
								set_variable = {
									name = math_ln_k
									value = 0
								}
								set_variable = {
									name = math_ln_div
									value = 10000
								}
								while = {
									limit = {
										var:math_ln_inp >= 2
									}
									change_variable = {
										name = math_ln_inp
										divide = 2
									}
									change_variable = {
										name = math_pow_ln
										add = 6931.472
									}
								}
								while = {
									limit = {
										var:math_ln_inp < 1
									}
									change_variable = {
										name = math_ln_inp
										multiply = 2
									}
									change_variable = {
										name = math_pow_ln
										subtract = 6931.472
									}
								}
								change_variable = {
									name = math_ln_inp
									multiply = 10000
								}
								while = {
									limit = {
										var:math_ln_k < 10
									}
									change_variable = {
										name = math_ln_k
										add = 1
									}
									change_variable = {
										name = math_ln_div
										divide = 2
									}
									set_variable = {
										name = math_ln_t
										value = 10000
									}
									change_variable = {
										name = math_ln_t
										add = var:math_ln_div
									}
									if = {
										limit = {
											var:math_ln_inp = {
												compare_value >= prev.var:math_ln_t
											}
										}
										change_variable = {
											name = math_ln_inp
											divide = var:math_ln_t
										}
										change_variable = {
											name = math_ln_inp
											multiply = 10000
										}
										set_variable = {
											name = math_lt_ind
											value = var:math_ln_k
										}
										if = {
											limit = {
												var:math_lt_ind >= 6
											}
											if = {
												limit = {
													var:math_lt_ind >= 8
												}
												if = {
													limit = {
														var:math_lt_ind >= 9
													}
													if = {
														limit = {
															var:math_lt_ind >= 10
														}
														set_variable = {
															name = math_ln_lt
															value = 9.761
														}
													}
													else = {
														set_variable = {
															name = math_ln_lt
															value = 19.512
														}
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 38.986
													}
												}
											}
											else = {
												if = {
													limit = {
														var:math_lt_ind >= 7
													}
													set_variable = {
														name = math_ln_lt
														value = 77.821
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 155.042
													}
												}
											}
										}
										else = {
											if = {
												limit = {
													var:math_lt_ind >= 3
												}
												if = {
													limit = {
														var:math_lt_ind >= 4
													}
													if = {
														limit = {
															var:math_lt_ind >= 5
														}
														set_variable = {
															name = math_ln_lt
															value = 307.717
														}
													}
													else = {
														set_variable = {
															name = math_ln_lt
															value = 606.246
														}
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 1177.83
													}
												}
											}
											else = {
												if = {
													limit = {
														var:math_lt_ind >= 2
													}
													set_variable = {
														name = math_ln_lt
														value = 2231.436
													}
												}
												else = {
													set_variable = {
														name = math_ln_lt
														value = 4054.651
													}
												}
											}
										}
										remove_variable = math_lt_ind
										change_variable = {
											name = math_pow_ln
											add = var:math_ln_lt
										}
									}
								}
								change_variable = {
									name = math_pow_ln
									divide = 10000
								}
								remove_variable = math_ln_k
								remove_variable = math_ln_div
								remove_variable = math_ln_t
								remove_variable = math_ln_lt
								remove_variable = math_ln_inp
								change_variable = {
									name = math_pow_exp
									multiply = var:math_pow_ln
								}
								set_variable = {
									name = math_e_exp
									value = var:math_pow_exp
								}
								set_variable = {
									name = math_pow_e
									value = 1
								}
								while = {
									limit = {
										var:math_e_exp >= 1
									}
									change_variable = {
										name = math_e_exp
										subtract = 1
									}
									change_variable = {
										name = math_pow_e
										multiply = 2.718
									}
								}
								while = {
									limit = {
										var:math_e_exp < 0
									}
									change_variable = {
										name = math_e_exp
										add = 1
									}
									change_variable = {
										name = math_pow_e
										divide = 2.718
									}
								}
								set_variable = {
									name = math_e_sm
									value = 1
								}
								if = {
									limit = {
										var:math_e_exp != 0
									}
									set_variable = {
										name = math_e_sq
										value = var:math_e_exp
									}
									change_variable = {
										name = math_e_sq
										multiply = var:math_e_exp
									}
									set_variable = {
										name = math_e_fct
										value = 2
									}
									set_variable = {
										name = math_e_fctl
										value = 2
									}
									set_variable = {
										name = math_e_a1
										value = var:math_e_sq
									}
									set_variable = {
										name = math_e_a2
										value = var:math_e_exp
									}
									set_variable = {
										name = math_e_a3
										value = 2
									}
									set_variable = {
										name = math_e_tmp
										value = var:math_e_a2
									}
									change_variable = {
										name = math_e_tmp
										multiply = var:math_e_a3
									}
									change_variable = {
										name = math_e_tmp
										add = var:math_e_a1
									}
									change_variable = {
										name = math_e_tmp
										divide = var:math_e_fct
									}
									change_variable = {
										name = math_e_sm
										add = var:math_e_tmp
									}
									set_variable = {
										name = math_e_prec
										value = 3
									}
									change_variable = {
										name = math_e_prec
										subtract = 1
									}
									while = {
										limit = {
											var:math_e_prec >= 1
										}
										change_variable = {
											name = math_e_prec
											subtract = 1
										}
										change_variable = {
											name = math_e_fctl
											add = 1
										}
										change_variable = {
											name = math_e_fct
											multiply = var:math_e_fctl
										}
										change_variable = {
											name = math_e_fctl
											add = 1
										}
										change_variable = {
											name = math_e_fct
											multiply = var:math_e_fctl
										}
										change_variable = {
											name = math_e_a1
											multiply = var:math_e_sq
										}
										change_variable = {
											name = math_e_a2
											multiply = var:math_e_sq
										}
										change_variable = {
											name = math_e_a3
											add = 2
										}
										set_variable = {
											name = math_e_tmp
											value = var:math_e_a2
										}
										change_variable = {
											name = math_e_tmp
											multiply = var:math_e_a3
										}
										change_variable = {
											name = math_e_tmp
											add = var:math_e_a1
										}
										change_variable = {
											name = math_e_tmp
											divide = var:math_e_fct
										}
										change_variable = {
											name = math_e_sm
											add = var:math_e_tmp
										}
									}
								}
								change_variable = {
									name = math_pow_e
									multiply = var:math_e_sm
								}
								remove_variable = math_e_sm
								remove_variable = math_e_tmp
								remove_variable = math_e_a1
								remove_variable = math_e_a2
								remove_variable = math_e_a3
								remove_variable = math_e_fctl
								remove_variable = math_e_fct
								remove_variable = math_e_prec
								remove_variable = math_e_sq
								remove_variable = math_e_exp
								change_variable = {
									name = get_distance_neighb_diff
									multiply = var:math_pow_e
								}
								remove_variable = math_pow_ln
								remove_variable = math_pow_e
							}
						}
						else = {
							set_variable = {
								name = get_distance_neighb_diff
								value = 0
							}
						}
						remove_variable = math_pow_base
						remove_variable = math_pow_exp
						set_variable = {
							name = get_distance_neighb_cost
							value = global_var:travel_distance_select.var:prov_cost
						}
						change_variable = {
							name = get_distance_neighb_cost
							add = this.var:prov_cost
						}
						set_variable = {
							name = travel_distance_distance_new
							value = var:get_distance_neighb_diff
						}
						change_variable = {
							name = travel_distance_distance_new
							multiply = var:get_distance_neighb_cost
						}
						change_variable = {
							name = travel_distance_distance_new
							add = global_var:travel_distance_select.var:travel_distance_distance
						}
						remove_variable = get_distance_neighb_x_diff
						remove_variable = get_distance_neighb_y_diff
						remove_variable = get_distance_neighb_diff
						remove_variable = get_distance_neighb_cost
						change_variable = {
							name = travel_distance_distance_new
							add = var:get_distance_port_cost
						}
						remove_variable = get_distance_port_cost
						if = {
							limit = {
								var:travel_distance_distance_new <= 285
								var:travel_distance_distance_new = {
									compare_value < prev.var:travel_distance_distance
								}
							}
							add_to_global_variable_list = {
								name = travel_distance_fray
								target = this
							}
							add_to_global_variable_list = {
								name = travel_distance_visited
								target = this
							}
							set_variable = {
								name = travel_distance_distance
								value = var:travel_distance_distance_new
							}
							set_variable = {
								name = travel_distance_prev
								value = global_var:travel_distance_select
							}
						}
					}
				}
			}
		}
		every_in_global_list = {
			variable = travel_distance_visited
			limit = {
				var:prov_sea = 2
			}
			while = {
				limit = {
					var:travel_distance_prev.var:prov_sea = 2
				}
				set_variable = {
					name = travel_distance_prev
					value = var:travel_distance_prev.var:travel_distance_prev
				}
			}
		}
		every_in_global_list = {
			variable = travel_distance_visited
			limit = {
				var:prov_sea = 1
			}
			while = {
				limit = {
					var:travel_distance_prev.var:prov_sea = 2
				}
				set_variable = {
					name = travel_distance_prev
					value = var:travel_distance_prev.var:travel_distance_prev
				}
			}
		}
		every_in_global_list = {
			variable = travel_distance_visited
			set_variable = {
				name = trade_do_trade_dist
				value = var:travel_distance_distance
			}
			set_variable = {
				name = trade_do_trade_prev
				value = var:travel_distance_prev
			}
			remove_variable = travel_distance_distance_new
			remove_variable = travel_distance_distance
			remove_variable = travel_distance_prev
		}
		clear_global_variable_list = travel_distance_fray
		clear_global_variable_list = travel_distance_visited
		remove_global_variable = travel_distance_select
		every_in_global_list = {
			variable = travel_distance_dijkstra_every_white
			remove_variable = travel_distance_distance
			remove_variable = travel_distance_prev
		}
		clear_global_variable_list = travel_distance_dijkstra_every_white
		clear_variable_list = trade_do_trade_t
		every_county = {
			limit = {
				any_county_province = {
					is_city = yes
					has_variable = trade_do_trade_dist
				}
			}
			add_to_global_variable_list = {
				name = trade_do_trade_list
				target = this
			}
			ordered_county_province = {
				limit = {
					is_city = yes
					has_variable = trade_do_trade_dist
				}
				order_by = trade_do_trade_order_value_1
				position = 0
				prev = {
					set_variable = {
						name = trade_do_trade_dist
						value = prev.var:trade_do_trade_dist
					}
					set_variable = {
						name = trade_do_trade_prev
						value = prev
					}
				}
			}
		}
		set_variable = {
			name = trade_do_trade_select
		}
		every_in_global_list = {
			variable = trade_merchants
			limit = {
				NOT = {
					has_variable = trade_do_trade_select
				}
				var:trade_location = {
					has_variable = trade_do_trade_dist
				}
			}
			add_to_global_variable_list = {
				name = trade_do_trade_list
				target = this
			}
			set_variable = {
				name = trade_do_trade_dist
				value = var:trade_location.var:trade_do_trade_dist
			}
			set_variable = {
				name = trade_do_trade_prev
				value = var:trade_location
			}
		}
		remove_variable = trade_do_trade_select
		set_variable = {
			name = trade_sum_buy_food
			value = 0
		}
		set_variable = {
			name = trade_sum_buy_fuel
			value = 0
		}
		set_variable = {
			name = trade_sum_buy_fiber
			value = 0
		}
		set_variable = {
			name = trade_sum_buy_pottery
			value = 0
		}
		set_variable = {
			name = trade_sum_buy_textile
			value = 0
		}
		set_variable = {
			name = trade_sum_sell_food
			value = 0
		}
		set_variable = {
			name = trade_sum_sell_fuel
			value = 0
		}
		set_variable = {
			name = trade_sum_sell_fiber
			value = 0
		}
		set_variable = {
			name = trade_sum_sell_pottery
			value = 0
		}
		set_variable = {
			name = trade_sum_sell_textile
			value = 0
		}
		set_variable = {
			name = trade_buy_food
			value = var:trade_sum_dmnd_food
		}
		set_variable = {
			name = trade_buy_fiber
			value = var:trade_sum_dmnd_fiber
		}
		set_variable = {
			name = trade_buy_fuel
			value = var:trade_sum_dmnd_fuel
		}
		set_variable = {
			name = trade_buy_pottery
			value = var:trade_sum_dmnd_pottery
		}
		set_variable = {
			name = trade_buy_textile
			value = var:trade_sum_dmnd_textile
		}
		change_variable = {
			name = trade_buy_food
			subtract = var:trade_sum_in_food
		}
		change_variable = {
			name = trade_buy_fiber
			subtract = var:trade_sum_in_fiber
		}
		change_variable = {
			name = trade_buy_fuel
			subtract = var:trade_sum_in_fuel
		}
		change_variable = {
			name = trade_buy_pottery
			subtract = var:trade_sum_in_pottery
		}
		change_variable = {
			name = trade_buy_textile
			subtract = var:trade_sum_in_textile
		}
		set_variable = {
			name = trade_sell_food
			value = var:trade_sum_sply_food
		}
		set_variable = {
			name = trade_sell_fiber
			value = var:trade_sum_sply_fiber
		}
		set_variable = {
			name = trade_sell_fuel
			value = var:trade_sum_sply_fuel
		}
		set_variable = {
			name = trade_sell_pottery
			value = var:trade_sum_sply_pottery
		}
		set_variable = {
			name = trade_sell_textile
			value = var:trade_sum_sply_textile
		}
		change_variable = {
			name = trade_sell_food
			subtract = var:trade_sum_out_food
		}
		change_variable = {
			name = trade_sell_fiber
			subtract = var:trade_sum_out_fiber
		}
		change_variable = {
			name = trade_sell_fuel
			subtract = var:trade_sum_out_fuel
		}
		change_variable = {
			name = trade_sell_pottery
			subtract = var:trade_sum_out_pottery
		}
		change_variable = {
			name = trade_sell_textile
			subtract = var:trade_sum_out_textile
		}
		every_in_global_list = {
			variable = trade_do_trade_list
			set_variable = {
				name = trade_cost
				value = var:trade_do_trade_dist
			}
			change_variable = {
				name = trade_cost
				divide = 15
			}
			change_variable = {
				name = trade_cost
				add = 1
			}
			set_variable = {
				name = trade_point_food
				value = var:trade_price_food
			}
			set_variable = {
				name = trade_point_fuel
				value = var:trade_price_fuel
			}
			set_variable = {
				name = trade_point_fiber
				value = var:trade_price_fiber
			}
			set_variable = {
				name = trade_point_pottery
				value = var:trade_price_pottery
			}
			set_variable = {
				name = trade_point_textile
				value = var:trade_price_textile
			}
			change_variable = {
				name = trade_point_food
				subtract = prev.var:trade_price_food
			}
			change_variable = {
				name = trade_point_fuel
				subtract = prev.var:trade_price_fuel
			}
			change_variable = {
				name = trade_point_fiber
				subtract = prev.var:trade_price_fiber
			}
			change_variable = {
				name = trade_point_pottery
				subtract = prev.var:trade_price_pottery
			}
			change_variable = {
				name = trade_point_textile
				subtract = prev.var:trade_price_textile
			}
			change_variable = {
				name = trade_point_food
				divide = var:trade_cost
			}
			change_variable = {
				name = trade_point_fuel
				divide = var:trade_cost
			}
			change_variable = {
				name = trade_point_fiber
				divide = var:trade_cost
			}
			change_variable = {
				name = trade_point_pottery
				divide = var:trade_cost
			}
			change_variable = {
				name = trade_point_textile
				divide = var:trade_cost
			}
			change_variable = {
				name = trade_point_food
				multiply = var:trade_point_food
			}
			change_variable = {
				name = trade_point_fuel
				multiply = var:trade_point_fuel
			}
			change_variable = {
				name = trade_point_fiber
				multiply = var:trade_point_fiber
			}
			change_variable = {
				name = trade_point_pottery
				multiply = var:trade_point_pottery
			}
			change_variable = {
				name = trade_point_textile
				multiply = var:trade_point_textile
			}
			change_variable = {
				name = trade_point_food
				add = 0.01
			}
			change_variable = {
				name = trade_point_fuel
				add = 0.01
			}
			change_variable = {
				name = trade_point_fiber
				add = 0.01
			}
			change_variable = {
				name = trade_point_pottery
				add = 0.01
			}
			change_variable = {
				name = trade_point_textile
				add = 0.01
			}
			set_variable = {
				name = trade_point_min
				value = var:trade_point_food
			}
			if = {
				limit = {
					OR = {
						NOT = {
							has_variable = trade_point_min
						}
						var:trade_point_min = {
							compare_value > prev.var:trade_point_fuel
						}
					}
				}
				set_variable = {
					name = trade_point_min
					value = var:trade_point_fuel
				}
			}
			if = {
				limit = {
					OR = {
						NOT = {
							has_variable = trade_point_min
						}
						var:trade_point_min = {
							compare_value > prev.var:trade_point_fiber
						}
					}
				}
				set_variable = {
					name = trade_point_min
					value = var:trade_point_fiber
				}
			}
			if = {
				limit = {
					OR = {
						NOT = {
							has_variable = trade_point_min
						}
						var:trade_point_min = {
							compare_value > prev.var:trade_point_pottery
						}
					}
				}
				set_variable = {
					name = trade_point_min
					value = var:trade_point_pottery
				}
			}
			if = {
				limit = {
					OR = {
						NOT = {
							has_variable = trade_point_min
						}
						var:trade_point_min = {
							compare_value > prev.var:trade_point_textile
						}
					}
				}
				set_variable = {
					name = trade_point_min
					value = var:trade_point_textile
				}
			}
			set_variable = {
				name = trade_buy_food
				value = var:trade_sum_dmnd_food
			}
			set_variable = {
				name = trade_buy_fiber
				value = var:trade_sum_dmnd_fiber
			}
			set_variable = {
				name = trade_buy_fuel
				value = var:trade_sum_dmnd_fuel
			}
			set_variable = {
				name = trade_buy_pottery
				value = var:trade_sum_dmnd_pottery
			}
			set_variable = {
				name = trade_buy_textile
				value = var:trade_sum_dmnd_textile
			}
			change_variable = {
				name = trade_buy_food
				subtract = var:trade_sum_in_food
			}
			change_variable = {
				name = trade_buy_fiber
				subtract = var:trade_sum_in_fiber
			}
			change_variable = {
				name = trade_buy_fuel
				subtract = var:trade_sum_in_fuel
			}
			change_variable = {
				name = trade_buy_pottery
				subtract = var:trade_sum_in_pottery
			}
			change_variable = {
				name = trade_buy_textile
				subtract = var:trade_sum_in_textile
			}
			set_variable = {
				name = trade_sell_food
				value = var:trade_sum_sply_food
			}
			set_variable = {
				name = trade_sell_fiber
				value = var:trade_sum_sply_fiber
			}
			set_variable = {
				name = trade_sell_fuel
				value = var:trade_sum_sply_fuel
			}
			set_variable = {
				name = trade_sell_pottery
				value = var:trade_sum_sply_pottery
			}
			set_variable = {
				name = trade_sell_textile
				value = var:trade_sum_sply_textile
			}
			change_variable = {
				name = trade_sell_food
				subtract = var:trade_sum_out_food
			}
			change_variable = {
				name = trade_sell_fiber
				subtract = var:trade_sum_out_fiber
			}
			change_variable = {
				name = trade_sell_fuel
				subtract = var:trade_sum_out_fuel
			}
			change_variable = {
				name = trade_sell_pottery
				subtract = var:trade_sum_out_pottery
			}
			change_variable = {
				name = trade_sell_textile
				subtract = var:trade_sum_out_textile
			}
			if = {
				limit = {
					var:trade_price_food = {
						compare_value >= global_var:trade_do_trade_select.var:trade_price_food
					}
				}
				set_variable = {
					name = trade_sell_food
					value = 0
				}
			}
			if = {
				limit = {
					var:trade_price_fuel = {
						compare_value >= global_var:trade_do_trade_select.var:trade_price_fuel
					}
				}
				set_variable = {
					name = trade_sell_fuel
					value = 0
				}
			}
			if = {
				limit = {
					var:trade_price_fiber = {
						compare_value >= global_var:trade_do_trade_select.var:trade_price_fiber
					}
				}
				set_variable = {
					name = trade_sell_fiber
					value = 0
				}
			}
			if = {
				limit = {
					var:trade_price_pottery = {
						compare_value >= global_var:trade_do_trade_select.var:trade_price_pottery
					}
				}
				set_variable = {
					name = trade_sell_pottery
					value = 0
				}
			}
			if = {
				limit = {
					var:trade_price_textile = {
						compare_value >= global_var:trade_do_trade_select.var:trade_price_textile
					}
				}
				set_variable = {
					name = trade_sell_textile
					value = 0
				}
			}
			if = {
				limit = {
					var:trade_price_food = {
						compare_value <= global_var:trade_do_trade_select.var:trade_price_food
					}
				}
				set_variable = {
					name = trade_buy_food
					value = 0
				}
			}
			if = {
				limit = {
					var:trade_price_fuel = {
						compare_value <= global_var:trade_do_trade_select.var:trade_price_fuel
					}
				}
				set_variable = {
					name = trade_buy_fuel
					value = 0
				}
			}
			if = {
				limit = {
					var:trade_price_fiber = {
						compare_value <= global_var:trade_do_trade_select.var:trade_price_fiber
					}
				}
				set_variable = {
					name = trade_buy_fiber
					value = 0
				}
			}
			if = {
				limit = {
					var:trade_price_pottery = {
						compare_value <= global_var:trade_do_trade_select.var:trade_price_pottery
					}
				}
				set_variable = {
					name = trade_buy_pottery
					value = 0
				}
			}
			if = {
				limit = {
					var:trade_price_textile = {
						compare_value <= global_var:trade_do_trade_select.var:trade_price_textile
					}
				}
				set_variable = {
					name = trade_buy_textile
					value = 0
				}
			}
			prev = {
				change_variable = {
					name = trade_sum_buy_food
					add = prev.var:trade_buy_food
				}
				change_variable = {
					name = trade_sum_buy_fuel
					add = prev.var:trade_buy_fuel
				}
				change_variable = {
					name = trade_sum_buy_fiber
					add = prev.var:trade_buy_fiber
				}
				change_variable = {
					name = trade_sum_buy_pottery
					add = prev.var:trade_buy_pottery
				}
				change_variable = {
					name = trade_sum_buy_textile
					add = prev.var:trade_buy_textile
				}
				change_variable = {
					name = trade_sum_sell_food
					add = prev.var:trade_sell_food
				}
				change_variable = {
					name = trade_sum_sell_fuel
					add = prev.var:trade_sell_fuel
				}
				change_variable = {
					name = trade_sum_sell_fiber
					add = prev.var:trade_sell_fiber
				}
				change_variable = {
					name = trade_sum_sell_pottery
					add = prev.var:trade_sell_pottery
				}
				change_variable = {
					name = trade_sum_sell_textile
					add = prev.var:trade_sell_textile
				}
			}
		}
		set_variable = {
			name = trade_cost
			value = 0
		}
		if = {
			limit = {
				OR = {
					AND = {
						var:trade_sell_food = 0
						NOT = {
							var:trade_sum_buy_food = 0
						}
					}
					var:trade_sell_food = {
						compare_value < prev.var:trade_sum_buy_food
					}
				}
			}
			set_variable = {
				name = trade_point_min
				value = 0.01
			}
			ordered_in_global_list = {
				limit = {
					var:trade_buy_food > 0
				}
				variable = trade_do_trade_list
				order_by = trade_do_trade_order_value_food
				position = 0
				prev = {
					set_variable = {
						name = trade_point_min
						value = prev.var:trade_point_food
					}
				}
			}
			set_variable = {
				name = trade_do_trade_helper_2_t
				value = var:trade_sell_food
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				multiply = 100
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				divide = var:trade_sum_buy_food
			}
			set_variable = {
				name = trade_sum_buy_food
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_food > 0
				}
				variable = trade_do_trade_list
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					subtract = prev.var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_point_food
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					add = 100
				}
				change_variable = {
					name = trade_buy_food
					multiply = var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_buy_food
					divide = 100
				}
				prev = {
					change_variable = {
						name = trade_sum_buy_food
						add = prev.var:trade_buy_food
					}
				}
			}
			if = {
				limit = {
					var:trade_sell_food = {
						compare_value < prev.var:trade_sum_buy_food
					}
				}
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = var:trade_sell_food
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_sum_buy_food
				}
				every_in_global_list = {
					limit = {
						var:trade_buy_food > 0
					}
					variable = trade_do_trade_list
					change_variable = {
						name = trade_buy_food
						multiply = prev.var:trade_do_trade_helper_2_t
					}
					change_variable = {
						name = trade_buy_food
						divide = 100
					}
				}
			}
			set_variable = {
				name = trade_sum_buy_food
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_food > 0
				}
				variable = trade_do_trade_list
				prev = {
					change_variable = {
						name = trade_sum_buy_food
						add = prev.var:trade_buy_food
					}
				}
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_food > 0
				}
				variable = trade_do_trade_list
				remove_variable = trade_do_trade_helper_2_t
			}
			remove_variable = trade_do_trade_helper_2_t
			remove_variable = trade_point_min
		}
		if = {
			limit = {
				OR = {
					AND = {
						var:trade_sell_fiber = 0
						NOT = {
							var:trade_sum_buy_fiber = 0
						}
					}
					var:trade_sell_fiber = {
						compare_value < prev.var:trade_sum_buy_fiber
					}
				}
			}
			set_variable = {
				name = trade_point_min
				value = 0.01
			}
			ordered_in_global_list = {
				limit = {
					var:trade_buy_fiber > 0
				}
				variable = trade_do_trade_list
				order_by = trade_do_trade_order_value_fiber
				position = 0
				prev = {
					set_variable = {
						name = trade_point_min
						value = prev.var:trade_point_fiber
					}
				}
			}
			set_variable = {
				name = trade_do_trade_helper_2_t
				value = var:trade_sell_fiber
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				multiply = 100
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				divide = var:trade_sum_buy_fiber
			}
			set_variable = {
				name = trade_sum_buy_fiber
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_fiber > 0
				}
				variable = trade_do_trade_list
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					subtract = prev.var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_point_fiber
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					add = 100
				}
				change_variable = {
					name = trade_buy_fiber
					multiply = var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_buy_fiber
					divide = 100
				}
				prev = {
					change_variable = {
						name = trade_sum_buy_fiber
						add = prev.var:trade_buy_fiber
					}
				}
			}
			if = {
				limit = {
					var:trade_sell_fiber = {
						compare_value < prev.var:trade_sum_buy_fiber
					}
				}
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = var:trade_sell_fiber
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_sum_buy_fiber
				}
				every_in_global_list = {
					limit = {
						var:trade_buy_fiber > 0
					}
					variable = trade_do_trade_list
					change_variable = {
						name = trade_buy_fiber
						multiply = prev.var:trade_do_trade_helper_2_t
					}
					change_variable = {
						name = trade_buy_fiber
						divide = 100
					}
				}
			}
			set_variable = {
				name = trade_sum_buy_fiber
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_fiber > 0
				}
				variable = trade_do_trade_list
				prev = {
					change_variable = {
						name = trade_sum_buy_fiber
						add = prev.var:trade_buy_fiber
					}
				}
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_fiber > 0
				}
				variable = trade_do_trade_list
				remove_variable = trade_do_trade_helper_2_t
			}
			remove_variable = trade_do_trade_helper_2_t
			remove_variable = trade_point_min
		}
		if = {
			limit = {
				OR = {
					AND = {
						var:trade_sell_fuel = 0
						NOT = {
							var:trade_sum_buy_fuel = 0
						}
					}
					var:trade_sell_fuel = {
						compare_value < prev.var:trade_sum_buy_fuel
					}
				}
			}
			set_variable = {
				name = trade_point_min
				value = 0.01
			}
			ordered_in_global_list = {
				limit = {
					var:trade_buy_fuel > 0
				}
				variable = trade_do_trade_list
				order_by = trade_do_trade_order_value_fuel
				position = 0
				prev = {
					set_variable = {
						name = trade_point_min
						value = prev.var:trade_point_fuel
					}
				}
			}
			set_variable = {
				name = trade_do_trade_helper_2_t
				value = var:trade_sell_fuel
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				multiply = 100
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				divide = var:trade_sum_buy_fuel
			}
			set_variable = {
				name = trade_sum_buy_fuel
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_fuel > 0
				}
				variable = trade_do_trade_list
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					subtract = prev.var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_point_fuel
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					add = 100
				}
				change_variable = {
					name = trade_buy_fuel
					multiply = var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_buy_fuel
					divide = 100
				}
				prev = {
					change_variable = {
						name = trade_sum_buy_fuel
						add = prev.var:trade_buy_fuel
					}
				}
			}
			if = {
				limit = {
					var:trade_sell_fuel = {
						compare_value < prev.var:trade_sum_buy_fuel
					}
				}
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = var:trade_sell_fuel
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_sum_buy_fuel
				}
				every_in_global_list = {
					limit = {
						var:trade_buy_fuel > 0
					}
					variable = trade_do_trade_list
					change_variable = {
						name = trade_buy_fuel
						multiply = prev.var:trade_do_trade_helper_2_t
					}
					change_variable = {
						name = trade_buy_fuel
						divide = 100
					}
				}
			}
			set_variable = {
				name = trade_sum_buy_fuel
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_fuel > 0
				}
				variable = trade_do_trade_list
				prev = {
					change_variable = {
						name = trade_sum_buy_fuel
						add = prev.var:trade_buy_fuel
					}
				}
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_fuel > 0
				}
				variable = trade_do_trade_list
				remove_variable = trade_do_trade_helper_2_t
			}
			remove_variable = trade_do_trade_helper_2_t
			remove_variable = trade_point_min
		}
		if = {
			limit = {
				OR = {
					AND = {
						var:trade_sell_pottery = 0
						NOT = {
							var:trade_sum_buy_pottery = 0
						}
					}
					var:trade_sell_pottery = {
						compare_value < prev.var:trade_sum_buy_pottery
					}
				}
			}
			set_variable = {
				name = trade_point_min
				value = 0.01
			}
			ordered_in_global_list = {
				limit = {
					var:trade_buy_pottery > 0
				}
				variable = trade_do_trade_list
				order_by = trade_do_trade_order_value_pottery
				position = 0
				prev = {
					set_variable = {
						name = trade_point_min
						value = prev.var:trade_point_pottery
					}
				}
			}
			set_variable = {
				name = trade_do_trade_helper_2_t
				value = var:trade_sell_pottery
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				multiply = 100
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				divide = var:trade_sum_buy_pottery
			}
			set_variable = {
				name = trade_sum_buy_pottery
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_pottery > 0
				}
				variable = trade_do_trade_list
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					subtract = prev.var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_point_pottery
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					add = 100
				}
				change_variable = {
					name = trade_buy_pottery
					multiply = var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_buy_pottery
					divide = 100
				}
				prev = {
					change_variable = {
						name = trade_sum_buy_pottery
						add = prev.var:trade_buy_pottery
					}
				}
			}
			if = {
				limit = {
					var:trade_sell_pottery = {
						compare_value < prev.var:trade_sum_buy_pottery
					}
				}
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = var:trade_sell_pottery
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_sum_buy_pottery
				}
				every_in_global_list = {
					limit = {
						var:trade_buy_pottery > 0
					}
					variable = trade_do_trade_list
					change_variable = {
						name = trade_buy_pottery
						multiply = prev.var:trade_do_trade_helper_2_t
					}
					change_variable = {
						name = trade_buy_pottery
						divide = 100
					}
				}
			}
			set_variable = {
				name = trade_sum_buy_pottery
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_pottery > 0
				}
				variable = trade_do_trade_list
				prev = {
					change_variable = {
						name = trade_sum_buy_pottery
						add = prev.var:trade_buy_pottery
					}
				}
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_pottery > 0
				}
				variable = trade_do_trade_list
				remove_variable = trade_do_trade_helper_2_t
			}
			remove_variable = trade_do_trade_helper_2_t
			remove_variable = trade_point_min
		}
		if = {
			limit = {
				OR = {
					AND = {
						var:trade_sell_textile = 0
						NOT = {
							var:trade_sum_buy_textile = 0
						}
					}
					var:trade_sell_textile = {
						compare_value < prev.var:trade_sum_buy_textile
					}
				}
			}
			set_variable = {
				name = trade_point_min
				value = 0.01
			}
			ordered_in_global_list = {
				limit = {
					var:trade_buy_textile > 0
				}
				variable = trade_do_trade_list
				order_by = trade_do_trade_order_value_textile
				position = 0
				prev = {
					set_variable = {
						name = trade_point_min
						value = prev.var:trade_point_textile
					}
				}
			}
			set_variable = {
				name = trade_do_trade_helper_2_t
				value = var:trade_sell_textile
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				multiply = 100
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				divide = var:trade_sum_buy_textile
			}
			set_variable = {
				name = trade_sum_buy_textile
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_textile > 0
				}
				variable = trade_do_trade_list
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					subtract = prev.var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_point_textile
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					add = 100
				}
				change_variable = {
					name = trade_buy_textile
					multiply = var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_buy_textile
					divide = 100
				}
				prev = {
					change_variable = {
						name = trade_sum_buy_textile
						add = prev.var:trade_buy_textile
					}
				}
			}
			if = {
				limit = {
					var:trade_sell_textile = {
						compare_value < prev.var:trade_sum_buy_textile
					}
				}
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = var:trade_sell_textile
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_sum_buy_textile
				}
				every_in_global_list = {
					limit = {
						var:trade_buy_textile > 0
					}
					variable = trade_do_trade_list
					change_variable = {
						name = trade_buy_textile
						multiply = prev.var:trade_do_trade_helper_2_t
					}
					change_variable = {
						name = trade_buy_textile
						divide = 100
					}
				}
			}
			set_variable = {
				name = trade_sum_buy_textile
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_textile > 0
				}
				variable = trade_do_trade_list
				prev = {
					change_variable = {
						name = trade_sum_buy_textile
						add = prev.var:trade_buy_textile
					}
				}
			}
			every_in_global_list = {
				limit = {
					var:trade_buy_textile > 0
				}
				variable = trade_do_trade_list
				remove_variable = trade_do_trade_helper_2_t
			}
			remove_variable = trade_do_trade_helper_2_t
			remove_variable = trade_point_min
		}
		if = {
			limit = {
				OR = {
					AND = {
						var:trade_buy_food = 0
						NOT = {
							var:trade_sum_sell_food = 0
						}
					}
					var:trade_buy_food = {
						compare_value < prev.var:trade_sum_sell_food
					}
				}
			}
			set_variable = {
				name = trade_point_min
				value = 0.01
			}
			ordered_in_global_list = {
				limit = {
					var:trade_sell_food > 0
				}
				variable = trade_do_trade_list
				order_by = trade_do_trade_order_value_food
				position = 0
				prev = {
					set_variable = {
						name = trade_point_min
						value = prev.var:trade_point_food
					}
				}
			}
			set_variable = {
				name = trade_do_trade_helper_2_t
				value = var:trade_buy_food
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				multiply = 100
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				divide = var:trade_sum_sell_food
			}
			set_variable = {
				name = trade_sum_sell_food
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_food > 0
				}
				variable = trade_do_trade_list
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					subtract = prev.var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_point_food
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					add = 100
				}
				change_variable = {
					name = trade_sell_food
					multiply = var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_sell_food
					divide = 100
				}
				prev = {
					change_variable = {
						name = trade_sum_sell_food
						add = prev.var:trade_sell_food
					}
				}
			}
			if = {
				limit = {
					var:trade_buy_food = {
						compare_value < prev.var:trade_sum_sell_food
					}
				}
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = var:trade_buy_food
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_sum_sell_food
				}
				every_in_global_list = {
					limit = {
						var:trade_sell_food > 0
					}
					variable = trade_do_trade_list
					change_variable = {
						name = trade_sell_food
						multiply = prev.var:trade_do_trade_helper_2_t
					}
					change_variable = {
						name = trade_sell_food
						divide = 100
					}
				}
			}
			set_variable = {
				name = trade_sum_sell_food
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_food > 0
				}
				variable = trade_do_trade_list
				prev = {
					change_variable = {
						name = trade_sum_sell_food
						add = prev.var:trade_sell_food
					}
				}
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_food > 0
				}
				variable = trade_do_trade_list
				remove_variable = trade_do_trade_helper_2_t
			}
			remove_variable = trade_do_trade_helper_2_t
			remove_variable = trade_point_min
		}
		if = {
			limit = {
				OR = {
					AND = {
						var:trade_buy_fiber = 0
						NOT = {
							var:trade_sum_sell_fiber = 0
						}
					}
					var:trade_buy_fiber = {
						compare_value < prev.var:trade_sum_sell_fiber
					}
				}
			}
			set_variable = {
				name = trade_point_min
				value = 0.01
			}
			ordered_in_global_list = {
				limit = {
					var:trade_sell_fiber > 0
				}
				variable = trade_do_trade_list
				order_by = trade_do_trade_order_value_fiber
				position = 0
				prev = {
					set_variable = {
						name = trade_point_min
						value = prev.var:trade_point_fiber
					}
				}
			}
			set_variable = {
				name = trade_do_trade_helper_2_t
				value = var:trade_buy_fiber
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				multiply = 100
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				divide = var:trade_sum_sell_fiber
			}
			set_variable = {
				name = trade_sum_sell_fiber
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_fiber > 0
				}
				variable = trade_do_trade_list
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					subtract = prev.var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_point_fiber
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					add = 100
				}
				change_variable = {
					name = trade_sell_fiber
					multiply = var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_sell_fiber
					divide = 100
				}
				prev = {
					change_variable = {
						name = trade_sum_sell_fiber
						add = prev.var:trade_sell_fiber
					}
				}
			}
			if = {
				limit = {
					var:trade_buy_fiber = {
						compare_value < prev.var:trade_sum_sell_fiber
					}
				}
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = var:trade_buy_fiber
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_sum_sell_fiber
				}
				every_in_global_list = {
					limit = {
						var:trade_sell_fiber > 0
					}
					variable = trade_do_trade_list
					change_variable = {
						name = trade_sell_fiber
						multiply = prev.var:trade_do_trade_helper_2_t
					}
					change_variable = {
						name = trade_sell_fiber
						divide = 100
					}
				}
			}
			set_variable = {
				name = trade_sum_sell_fiber
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_fiber > 0
				}
				variable = trade_do_trade_list
				prev = {
					change_variable = {
						name = trade_sum_sell_fiber
						add = prev.var:trade_sell_fiber
					}
				}
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_fiber > 0
				}
				variable = trade_do_trade_list
				remove_variable = trade_do_trade_helper_2_t
			}
			remove_variable = trade_do_trade_helper_2_t
			remove_variable = trade_point_min
		}
		if = {
			limit = {
				OR = {
					AND = {
						var:trade_buy_fuel = 0
						NOT = {
							var:trade_sum_sell_fuel = 0
						}
					}
					var:trade_buy_fuel = {
						compare_value < prev.var:trade_sum_sell_fuel
					}
				}
			}
			set_variable = {
				name = trade_point_min
				value = 0.01
			}
			ordered_in_global_list = {
				limit = {
					var:trade_sell_fuel > 0
				}
				variable = trade_do_trade_list
				order_by = trade_do_trade_order_value_fuel
				position = 0
				prev = {
					set_variable = {
						name = trade_point_min
						value = prev.var:trade_point_fuel
					}
				}
			}
			set_variable = {
				name = trade_do_trade_helper_2_t
				value = var:trade_buy_fuel
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				multiply = 100
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				divide = var:trade_sum_sell_fuel
			}
			set_variable = {
				name = trade_sum_sell_fuel
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_fuel > 0
				}
				variable = trade_do_trade_list
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					subtract = prev.var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_point_fuel
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					add = 100
				}
				change_variable = {
					name = trade_sell_fuel
					multiply = var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_sell_fuel
					divide = 100
				}
				prev = {
					change_variable = {
						name = trade_sum_sell_fuel
						add = prev.var:trade_sell_fuel
					}
				}
			}
			if = {
				limit = {
					var:trade_buy_fuel = {
						compare_value < prev.var:trade_sum_sell_fuel
					}
				}
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = var:trade_buy_fuel
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_sum_sell_fuel
				}
				every_in_global_list = {
					limit = {
						var:trade_sell_fuel > 0
					}
					variable = trade_do_trade_list
					change_variable = {
						name = trade_sell_fuel
						multiply = prev.var:trade_do_trade_helper_2_t
					}
					change_variable = {
						name = trade_sell_fuel
						divide = 100
					}
				}
			}
			set_variable = {
				name = trade_sum_sell_fuel
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_fuel > 0
				}
				variable = trade_do_trade_list
				prev = {
					change_variable = {
						name = trade_sum_sell_fuel
						add = prev.var:trade_sell_fuel
					}
				}
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_fuel > 0
				}
				variable = trade_do_trade_list
				remove_variable = trade_do_trade_helper_2_t
			}
			remove_variable = trade_do_trade_helper_2_t
			remove_variable = trade_point_min
		}
		if = {
			limit = {
				OR = {
					AND = {
						var:trade_buy_pottery = 0
						NOT = {
							var:trade_sum_sell_pottery = 0
						}
					}
					var:trade_buy_pottery = {
						compare_value < prev.var:trade_sum_sell_pottery
					}
				}
			}
			set_variable = {
				name = trade_point_min
				value = 0.01
			}
			ordered_in_global_list = {
				limit = {
					var:trade_sell_pottery > 0
				}
				variable = trade_do_trade_list
				order_by = trade_do_trade_order_value_pottery
				position = 0
				prev = {
					set_variable = {
						name = trade_point_min
						value = prev.var:trade_point_pottery
					}
				}
			}
			set_variable = {
				name = trade_do_trade_helper_2_t
				value = var:trade_buy_pottery
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				multiply = 100
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				divide = var:trade_sum_sell_pottery
			}
			set_variable = {
				name = trade_sum_sell_pottery
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_pottery > 0
				}
				variable = trade_do_trade_list
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					subtract = prev.var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_point_pottery
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					add = 100
				}
				change_variable = {
					name = trade_sell_pottery
					multiply = var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_sell_pottery
					divide = 100
				}
				prev = {
					change_variable = {
						name = trade_sum_sell_pottery
						add = prev.var:trade_sell_pottery
					}
				}
			}
			if = {
				limit = {
					var:trade_buy_pottery = {
						compare_value < prev.var:trade_sum_sell_pottery
					}
				}
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = var:trade_buy_pottery
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_sum_sell_pottery
				}
				every_in_global_list = {
					limit = {
						var:trade_sell_pottery > 0
					}
					variable = trade_do_trade_list
					change_variable = {
						name = trade_sell_pottery
						multiply = prev.var:trade_do_trade_helper_2_t
					}
					change_variable = {
						name = trade_sell_pottery
						divide = 100
					}
				}
			}
			set_variable = {
				name = trade_sum_sell_pottery
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_pottery > 0
				}
				variable = trade_do_trade_list
				prev = {
					change_variable = {
						name = trade_sum_sell_pottery
						add = prev.var:trade_sell_pottery
					}
				}
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_pottery > 0
				}
				variable = trade_do_trade_list
				remove_variable = trade_do_trade_helper_2_t
			}
			remove_variable = trade_do_trade_helper_2_t
			remove_variable = trade_point_min
		}
		if = {
			limit = {
				OR = {
					AND = {
						var:trade_buy_textile = 0
						NOT = {
							var:trade_sum_sell_textile = 0
						}
					}
					var:trade_buy_textile = {
						compare_value < prev.var:trade_sum_sell_textile
					}
				}
			}
			set_variable = {
				name = trade_point_min
				value = 0.01
			}
			ordered_in_global_list = {
				limit = {
					var:trade_sell_textile > 0
				}
				variable = trade_do_trade_list
				order_by = trade_do_trade_order_value_textile
				position = 0
				prev = {
					set_variable = {
						name = trade_point_min
						value = prev.var:trade_point_textile
					}
				}
			}
			set_variable = {
				name = trade_do_trade_helper_2_t
				value = var:trade_buy_textile
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				multiply = 100
			}
			change_variable = {
				name = trade_do_trade_helper_2_t
				divide = var:trade_sum_sell_textile
			}
			set_variable = {
				name = trade_sum_sell_textile
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_textile > 0
				}
				variable = trade_do_trade_list
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					subtract = prev.var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_point_textile
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					add = 100
				}
				change_variable = {
					name = trade_sell_textile
					multiply = var:trade_do_trade_helper_2_t
				}
				change_variable = {
					name = trade_sell_textile
					divide = 100
				}
				prev = {
					change_variable = {
						name = trade_sum_sell_textile
						add = prev.var:trade_sell_textile
					}
				}
			}
			if = {
				limit = {
					var:trade_buy_textile = {
						compare_value < prev.var:trade_sum_sell_textile
					}
				}
				set_variable = {
					name = trade_do_trade_helper_2_t
					value = var:trade_buy_textile
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					multiply = 100
				}
				change_variable = {
					name = trade_do_trade_helper_2_t
					divide = var:trade_sum_sell_textile
				}
				every_in_global_list = {
					limit = {
						var:trade_sell_textile > 0
					}
					variable = trade_do_trade_list
					change_variable = {
						name = trade_sell_textile
						multiply = prev.var:trade_do_trade_helper_2_t
					}
					change_variable = {
						name = trade_sell_textile
						divide = 100
					}
				}
			}
			set_variable = {
				name = trade_sum_sell_textile
				value = 0
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_textile > 0
				}
				variable = trade_do_trade_list
				prev = {
					change_variable = {
						name = trade_sum_sell_textile
						add = prev.var:trade_sell_textile
					}
				}
			}
			every_in_global_list = {
				limit = {
					var:trade_sell_textile > 0
				}
				variable = trade_do_trade_list
				remove_variable = trade_do_trade_helper_2_t
			}
			remove_variable = trade_do_trade_helper_2_t
			remove_variable = trade_point_min
		}
		set_variable = {
			name = trade_cost
			value = 0
		}
		every_in_global_list = {
			variable = trade_do_trade_list
			set_variable = {
				name = trade_cost_food
				value = var:trade_buy_food
			}
			set_variable = {
				name = trade_cost_fiber
				value = var:trade_buy_fiber
			}
			set_variable = {
				name = trade_cost_fuel
				value = var:trade_buy_fuel
			}
			set_variable = {
				name = trade_cost_pottery
				value = var:trade_buy_pottery
			}
			set_variable = {
				name = trade_cost_textile
				value = var:trade_buy_textile
			}
			change_variable = {
				name = trade_cost_food
				add = var:trade_sell_food
			}
			change_variable = {
				name = trade_cost_fiber
				add = var:trade_sell_fiber
			}
			change_variable = {
				name = trade_cost_fuel
				add = var:trade_sell_fuel
			}
			change_variable = {
				name = trade_cost_pottery
				add = var:trade_sell_pottery
			}
			change_variable = {
				name = trade_cost_textile
				add = var:trade_sell_textile
			}
			change_variable = {
				name = trade_cost_food
				multiply = var:trade_cost
			}
			change_variable = {
				name = trade_cost_fiber
				multiply = var:trade_cost
			}
			change_variable = {
				name = trade_cost_fuel
				multiply = var:trade_cost
			}
			change_variable = {
				name = trade_cost_pottery
				multiply = var:trade_cost
			}
			change_variable = {
				name = trade_cost_textile
				multiply = var:trade_cost
			}
			prev = {
				change_variable = {
					name = trade_cost
					add = prev.var:trade_cost_food
				}
				change_variable = {
					name = trade_cost
					add = prev.var:trade_cost_fuel
				}
				change_variable = {
					name = trade_cost
					add = prev.var:trade_cost_fiber
				}
				change_variable = {
					name = trade_cost
					add = prev.var:trade_cost_pottery
				}
				change_variable = {
					name = trade_cost
					add = prev.var:trade_cost_textile
				}
			}
		}
		if = {
			limit = {
				has_variable = trade_cost
				var:trade_cost = {
					compare_value > prev.var:trade_power
				}
			}
			set_variable = {
				name = trade_point_min
				value = 0.01
			}
			ordered_in_global_list = {
				limit = {
					trade_has_trade = yes
				}
				variable = trade_do_trade_list
				order_by = trade_do_trade_order_value_2
				position = 0
				prev = {
					set_variable = {
						name = trade_point_min
						value = prev.var:trade_point_min
					}
				}
			}
			set_variable = {
				name = trade_do_trade_t
				value = var:trade_power
			}
			change_variable = {
				name = trade_do_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_do_trade_t
				divide = var:trade_cost
			}
			set_variable = {
				name = trade_cost
				value = 0
			}
			every_in_global_list = {
				limit = {
					trade_has_trade = yes
				}
				variable = trade_do_trade_list
				set_variable = {
					name = trade_do_trade_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_t
					subtract = prev.var:trade_do_trade_t
				}
				change_variable = {
					name = trade_do_trade_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_t
					divide = var:trade_point_food
				}
				change_variable = {
					name = trade_do_trade_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_t
					add = 100
				}
				change_variable = {
					name = trade_buy_food
					multiply = var:trade_do_trade_t
				}
				change_variable = {
					name = trade_sell_food
					multiply = var:trade_do_trade_t
				}
				change_variable = {
					name = trade_buy_food
					divide = 100
				}
				change_variable = {
					name = trade_sell_food
					divide = 100
				}
				set_variable = {
					name = trade_cost_food
					value = var:trade_buy_food
				}
				change_variable = {
					name = trade_cost_food
					add = var:trade_sell_food
				}
				change_variable = {
					name = trade_cost_food
					multiply = var:trade_cost
				}
				remove_variable = trade_do_trade_t
				set_variable = {
					name = trade_do_trade_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_t
					subtract = prev.var:trade_do_trade_t
				}
				change_variable = {
					name = trade_do_trade_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_t
					divide = var:trade_point_fuel
				}
				change_variable = {
					name = trade_do_trade_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_t
					add = 100
				}
				change_variable = {
					name = trade_buy_fuel
					multiply = var:trade_do_trade_t
				}
				change_variable = {
					name = trade_sell_fuel
					multiply = var:trade_do_trade_t
				}
				change_variable = {
					name = trade_buy_fuel
					divide = 100
				}
				change_variable = {
					name = trade_sell_fuel
					divide = 100
				}
				set_variable = {
					name = trade_cost_fuel
					value = var:trade_buy_fuel
				}
				change_variable = {
					name = trade_cost_fuel
					add = var:trade_sell_fuel
				}
				change_variable = {
					name = trade_cost_fuel
					multiply = var:trade_cost
				}
				remove_variable = trade_do_trade_t
				set_variable = {
					name = trade_do_trade_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_t
					subtract = prev.var:trade_do_trade_t
				}
				change_variable = {
					name = trade_do_trade_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_t
					divide = var:trade_point_fiber
				}
				change_variable = {
					name = trade_do_trade_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_t
					add = 100
				}
				change_variable = {
					name = trade_buy_fiber
					multiply = var:trade_do_trade_t
				}
				change_variable = {
					name = trade_sell_fiber
					multiply = var:trade_do_trade_t
				}
				change_variable = {
					name = trade_buy_fiber
					divide = 100
				}
				change_variable = {
					name = trade_sell_fiber
					divide = 100
				}
				set_variable = {
					name = trade_cost_fiber
					value = var:trade_buy_fiber
				}
				change_variable = {
					name = trade_cost_fiber
					add = var:trade_sell_fiber
				}
				change_variable = {
					name = trade_cost_fiber
					multiply = var:trade_cost
				}
				remove_variable = trade_do_trade_t
				set_variable = {
					name = trade_do_trade_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_t
					subtract = prev.var:trade_do_trade_t
				}
				change_variable = {
					name = trade_do_trade_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_t
					divide = var:trade_point_pottery
				}
				change_variable = {
					name = trade_do_trade_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_t
					add = 100
				}
				change_variable = {
					name = trade_buy_pottery
					multiply = var:trade_do_trade_t
				}
				change_variable = {
					name = trade_sell_pottery
					multiply = var:trade_do_trade_t
				}
				change_variable = {
					name = trade_buy_pottery
					divide = 100
				}
				change_variable = {
					name = trade_sell_pottery
					divide = 100
				}
				set_variable = {
					name = trade_cost_pottery
					value = var:trade_buy_pottery
				}
				change_variable = {
					name = trade_cost_pottery
					add = var:trade_sell_pottery
				}
				change_variable = {
					name = trade_cost_pottery
					multiply = var:trade_cost
				}
				remove_variable = trade_do_trade_t
				set_variable = {
					name = trade_do_trade_t
					value = 100
				}
				change_variable = {
					name = trade_do_trade_t
					subtract = prev.var:trade_do_trade_t
				}
				change_variable = {
					name = trade_do_trade_t
					multiply = prev.var:trade_point_min
				}
				change_variable = {
					name = trade_do_trade_t
					divide = var:trade_point_textile
				}
				change_variable = {
					name = trade_do_trade_t
					multiply = -1
				}
				change_variable = {
					name = trade_do_trade_t
					add = 100
				}
				change_variable = {
					name = trade_buy_textile
					multiply = var:trade_do_trade_t
				}
				change_variable = {
					name = trade_sell_textile
					multiply = var:trade_do_trade_t
				}
				change_variable = {
					name = trade_buy_textile
					divide = 100
				}
				change_variable = {
					name = trade_sell_textile
					divide = 100
				}
				set_variable = {
					name = trade_cost_textile
					value = var:trade_buy_textile
				}
				change_variable = {
					name = trade_cost_textile
					add = var:trade_sell_textile
				}
				change_variable = {
					name = trade_cost_textile
					multiply = var:trade_cost
				}
				remove_variable = trade_do_trade_t
				prev = {
					change_variable = {
						name = trade_cost
						add = prev.var:trade_cost_food
					}
					change_variable = {
						name = trade_cost
						add = prev.var:trade_cost_fiber
					}
					change_variable = {
						name = trade_cost
						add = prev.var:trade_cost_fuel
					}
					change_variable = {
						name = trade_cost
						add = prev.var:trade_cost_pottery
					}
					change_variable = {
						name = trade_cost
						add = prev.var:trade_cost_textile
					}
				}
			}
			if = {
				limit = {
					has_variable = trade_cost
					var:trade_cost = {
						compare_value > prev.var:trade_power
					}
				}
				set_variable = {
					name = trade_do_trade_t
					value = var:trade_power
				}
				change_variable = {
					name = trade_do_trade_t
					multiply = 100
				}
				change_variable = {
					name = trade_do_trade_t
					divide = var:trade_cost
				}
				every_in_global_list = {
					limit = {
						trade_has_trade = yes
					}
					variable = trade_do_trade_list
					change_variable = {
						name = trade_buy_food
						multiply = prev.var:trade_do_trade_t
					}
					change_variable = {
						name = trade_buy_fuel
						multiply = prev.var:trade_do_trade_t
					}
					change_variable = {
						name = trade_buy_fiber
						multiply = prev.var:trade_do_trade_t
					}
					change_variable = {
						name = trade_buy_pottery
						multiply = prev.var:trade_do_trade_t
					}
					change_variable = {
						name = trade_buy_textile
						multiply = prev.var:trade_do_trade_t
					}
					change_variable = {
						name = trade_buy_food
						divide = 100
					}
					change_variable = {
						name = trade_buy_fuel
						divide = 100
					}
					change_variable = {
						name = trade_buy_fiber
						divide = 100
					}
					change_variable = {
						name = trade_buy_pottery
						divide = 100
					}
					change_variable = {
						name = trade_buy_textile
						divide = 100
					}
					change_variable = {
						name = trade_sell_food
						multiply = prev.var:trade_do_trade_t
					}
					change_variable = {
						name = trade_sell_fuel
						multiply = prev.var:trade_do_trade_t
					}
					change_variable = {
						name = trade_sell_fiber
						multiply = prev.var:trade_do_trade_t
					}
					change_variable = {
						name = trade_sell_pottery
						multiply = prev.var:trade_do_trade_t
					}
					change_variable = {
						name = trade_sell_textile
						multiply = prev.var:trade_do_trade_t
					}
					change_variable = {
						name = trade_sell_food
						divide = 100
					}
					change_variable = {
						name = trade_sell_fuel
						divide = 100
					}
					change_variable = {
						name = trade_sell_fiber
						divide = 100
					}
					change_variable = {
						name = trade_sell_pottery
						divide = 100
					}
					change_variable = {
						name = trade_sell_textile
						divide = 100
					}
				}
			}
			set_variable = {
				name = trade_sum_buy_food
				value = 0
			}
			set_variable = {
				name = trade_sum_buy_fuel
				value = 0
			}
			set_variable = {
				name = trade_sum_buy_fiber
				value = 0
			}
			set_variable = {
				name = trade_sum_buy_pottery
				value = 0
			}
			set_variable = {
				name = trade_sum_buy_textile
				value = 0
			}
			set_variable = {
				name = trade_sum_sell_food
				value = 0
			}
			set_variable = {
				name = trade_sum_sell_fuel
				value = 0
			}
			set_variable = {
				name = trade_sum_sell_fiber
				value = 0
			}
			set_variable = {
				name = trade_sum_sell_pottery
				value = 0
			}
			set_variable = {
				name = trade_sum_sell_textile
				value = 0
			}
			every_in_global_list = {
				limit = {
					trade_has_trade = yes
				}
				variable = trade_do_trade_list
				prev = {
					change_variable = {
						name = trade_sum_buy_food
						add = prev.var:trade_buy_food
					}
					change_variable = {
						name = trade_sum_buy_fuel
						add = prev.var:trade_buy_fuel
					}
					change_variable = {
						name = trade_sum_buy_fiber
						add = prev.var:trade_buy_fiber
					}
					change_variable = {
						name = trade_sum_buy_pottery
						add = prev.var:trade_buy_pottery
					}
					change_variable = {
						name = trade_sum_buy_textile
						add = prev.var:trade_buy_textile
					}
					change_variable = {
						name = trade_sum_sell_food
						add = prev.var:trade_sell_food
					}
					change_variable = {
						name = trade_sum_sell_fuel
						add = prev.var:trade_sell_fuel
					}
					change_variable = {
						name = trade_sum_sell_fiber
						add = prev.var:trade_sell_fiber
					}
					change_variable = {
						name = trade_sum_sell_pottery
						add = prev.var:trade_sell_pottery
					}
					change_variable = {
						name = trade_sum_sell_textile
						add = prev.var:trade_sell_textile
					}
				}
			}
			every_in_global_list = {
				limit = {
					trade_has_trade = yes
				}
				variable = trade_do_trade_list
				remove_variable = trade_do_trade_t
			}
			remove_variable = trade_do_trade_t
			remove_variable = trade_point_min
		}
		change_variable = {
			name = trade_sum_in_food
			add = var:trade_sum_sell_food
		}
		change_variable = {
			name = trade_sum_in_fiber
			add = var:trade_sum_sell_fiber
		}
		change_variable = {
			name = trade_sum_in_fuel
			add = var:trade_sum_sell_fuel
		}
		change_variable = {
			name = trade_sum_in_pottery
			add = var:trade_sum_sell_pottery
		}
		change_variable = {
			name = trade_sum_in_textile
			add = var:trade_sum_sell_textile
		}
		change_variable = {
			name = trade_sum_out_food
			add = var:trade_sum_buy_food
		}
		change_variable = {
			name = trade_sum_out_fiber
			add = var:trade_sum_buy_fiber
		}
		change_variable = {
			name = trade_sum_out_fuel
			add = var:trade_sum_buy_fuel
		}
		change_variable = {
			name = trade_sum_out_pottery
			add = var:trade_sum_buy_pottery
		}
		change_variable = {
			name = trade_sum_out_textile
			add = var:trade_sum_buy_textile
		}
		every_in_global_list = {
			variable = trade_do_trade_list
			if = {
				limit = {
					has_variable = trade_buy_food
					var:trade_buy_food > 0
				}
				change_variable = {
					name = trade_sum_in_food
					add = var:trade_buy_food
				}
				change_variable = {
					name = trade_buy_food
					multiply = prev.var:trade_price_food
				}
				change_variable = {
					name = trade_sum_pay_food
					add = var:trade_buy_food
				}
				prev = {
					change_variable = {
						name = trade_sum_earn_food
						add = prev.var:trade_buy_food
					}
				}
			}
			if = {
				limit = {
					has_variable = trade_sell_food
					var:trade_sell_food > 0
				}
				change_variable = {
					name = trade_sum_out_food
					add = var:trade_sell_food
				}
				change_variable = {
					name = trade_sell_food
					multiply = var:trade_price_food
				}
				change_variable = {
					name = trade_sum_earn_food
					add = var:trade_sell_food
				}
				prev = {
					change_variable = {
						name = trade_sum_pay_food
						add = prev.var:trade_sell_food
					}
				}
			}
			if = {
				limit = {
					has_variable = trade_buy_fuel
					var:trade_buy_fuel > 0
				}
				change_variable = {
					name = trade_sum_in_fuel
					add = var:trade_buy_fuel
				}
				change_variable = {
					name = trade_buy_fuel
					multiply = prev.var:trade_price_fuel
				}
				change_variable = {
					name = trade_sum_pay_fuel
					add = var:trade_buy_fuel
				}
				prev = {
					change_variable = {
						name = trade_sum_earn_fuel
						add = prev.var:trade_buy_fuel
					}
				}
			}
			if = {
				limit = {
					has_variable = trade_sell_fuel
					var:trade_sell_fuel > 0
				}
				change_variable = {
					name = trade_sum_out_fuel
					add = var:trade_sell_fuel
				}
				change_variable = {
					name = trade_sell_fuel
					multiply = var:trade_price_fuel
				}
				change_variable = {
					name = trade_sum_earn_fuel
					add = var:trade_sell_fuel
				}
				prev = {
					change_variable = {
						name = trade_sum_pay_fuel
						add = prev.var:trade_sell_fuel
					}
				}
			}
			if = {
				limit = {
					has_variable = trade_buy_fiber
					var:trade_buy_fiber > 0
				}
				change_variable = {
					name = trade_sum_in_fiber
					add = var:trade_buy_fiber
				}
				change_variable = {
					name = trade_buy_fiber
					multiply = prev.var:trade_price_fiber
				}
				change_variable = {
					name = trade_sum_pay_fiber
					add = var:trade_buy_fiber
				}
				prev = {
					change_variable = {
						name = trade_sum_earn_fiber
						add = prev.var:trade_buy_fiber
					}
				}
			}
			if = {
				limit = {
					has_variable = trade_sell_fiber
					var:trade_sell_fiber > 0
				}
				change_variable = {
					name = trade_sum_out_fiber
					add = var:trade_sell_fiber
				}
				change_variable = {
					name = trade_sell_fiber
					multiply = var:trade_price_fiber
				}
				change_variable = {
					name = trade_sum_earn_fiber
					add = var:trade_sell_fiber
				}
				prev = {
					change_variable = {
						name = trade_sum_pay_fiber
						add = prev.var:trade_sell_fiber
					}
				}
			}
			if = {
				limit = {
					has_variable = trade_buy_pottery
					var:trade_buy_pottery > 0
				}
				change_variable = {
					name = trade_sum_in_pottery
					add = var:trade_buy_pottery
				}
				change_variable = {
					name = trade_buy_pottery
					multiply = prev.var:trade_price_pottery
				}
				change_variable = {
					name = trade_sum_pay_pottery
					add = var:trade_buy_pottery
				}
				prev = {
					change_variable = {
						name = trade_sum_earn_pottery
						add = prev.var:trade_buy_pottery
					}
				}
			}
			if = {
				limit = {
					has_variable = trade_sell_pottery
					var:trade_sell_pottery > 0
				}
				change_variable = {
					name = trade_sum_out_pottery
					add = var:trade_sell_pottery
				}
				change_variable = {
					name = trade_sell_pottery
					multiply = var:trade_price_pottery
				}
				change_variable = {
					name = trade_sum_earn_pottery
					add = var:trade_sell_pottery
				}
				prev = {
					change_variable = {
						name = trade_sum_pay_pottery
						add = prev.var:trade_sell_pottery
					}
				}
			}
			if = {
				limit = {
					has_variable = trade_buy_textile
					var:trade_buy_textile > 0
				}
				change_variable = {
					name = trade_sum_in_textile
					add = var:trade_buy_textile
				}
				change_variable = {
					name = trade_buy_textile
					multiply = prev.var:trade_price_textile
				}
				change_variable = {
					name = trade_sum_pay_textile
					add = var:trade_buy_textile
				}
				prev = {
					change_variable = {
						name = trade_sum_earn_textile
						add = prev.var:trade_buy_textile
					}
				}
			}
			if = {
				limit = {
					has_variable = trade_sell_textile
					var:trade_sell_textile > 0
				}
				change_variable = {
					name = trade_sum_out_textile
					add = var:trade_sell_textile
				}
				change_variable = {
					name = trade_sell_textile
					multiply = var:trade_price_textile
				}
				change_variable = {
					name = trade_sum_earn_textile
					add = var:trade_sell_textile
				}
				prev = {
					change_variable = {
						name = trade_sum_pay_textile
						add = prev.var:trade_sell_textile
					}
				}
			}
		}
		every_in_global_list = {
			variable = trade_do_trade_list
			remove_variable = trade_do_trade_dist
			remove_variable = trade_do_trade_prev
			remove_variable = trade_buy_food
			remove_variable = trade_buy_fuel
			remove_variable = trade_buy_fiber
			remove_variable = trade_buy_pottery
			remove_variable = trade_buy_textile
			remove_variable = trade_sell_food
			remove_variable = trade_sell_fuel
			remove_variable = trade_sell_fiber
			remove_variable = trade_sell_pottery
			remove_variable = trade_sell_textile
			remove_variable = trade_point_min
			remove_variable = trade_point_food
			remove_variable = trade_point_fuel
			remove_variable = trade_point_fiber
			remove_variable = trade_point_pottery
			remove_variable = trade_point_textile
			remove_variable = trade_cost
			remove_variable = trade_cost_food
			remove_variable = trade_cost_fuel
			remove_variable = trade_cost_fiber
			remove_variable = trade_cost_pottery
			remove_variable = trade_cost_textile
		}
		every_province = {
			limit = {
				has_variable = trade_do_trade_dist
			}
			remove_variable = trade_do_trade_dist
			remove_variable = trade_do_trade_prev
		}
		remove_global_variable = trade_do_trade_select
		clear_global_variable_list = trade_do_trade_list
		remove_variable = trade_sum_buy_food
		remove_variable = trade_sum_buy_fuel
		remove_variable = trade_sum_buy_fiber
		remove_variable = trade_sum_buy_pottery
		remove_variable = trade_sum_buy_textile
		remove_variable = trade_sum_sell_food
		remove_variable = trade_sum_sell_fuel
		remove_variable = trade_sum_sell_fiber
		remove_variable = trade_sum_sell_pottery
		remove_variable = trade_sum_sell_textile
		remove_variable = trade_buy_food
		remove_variable = trade_buy_fuel
		remove_variable = trade_buy_fiber
		remove_variable = trade_buy_pottery
		remove_variable = trade_buy_textile
		remove_variable = trade_sell_food
		remove_variable = trade_sell_fuel
		remove_variable = trade_sell_fiber
		remove_variable = trade_sell_pottery
		remove_variable = trade_sell_textile
		remove_variable = trade_cost
		set_variable = {
			name = trade_power
			value = 0
		}
	}
}
every_province = {
	limit = {
		is_valid_prov = yes
		is_city = yes
	}
	set_variable = {
		name = pop_pay_food
		value = 0
	}
	set_variable = {
		name = pop_pay_fuel
		value = 0
	}
	set_variable = {
		name = pop_pay_fiber
		value = 0
	}
	set_variable = {
		name = pop_pay_pottery
		value = 0
	}
	set_variable = {
		name = pop_pay_textile
		value = 0
	}
	set_variable = {
		name = pop_calorie
		value = 0
	}
	set_variable = {
		name = pop_nutrient
		value = 0
	}
	set_variable = {
		name = pop_comfort
		value = 0
	}
	set_variable = {
		name = pop_luxury
		value = 0
	}
}
every_county = {
	limit = {
		is_valid_prov = yes
	}
	set_variable = {
		name = pop_pay_food
		value = 0
	}
	set_variable = {
		name = pop_pay_fuel
		value = 0
	}
	set_variable = {
		name = pop_pay_fiber
		value = 0
	}
	set_variable = {
		name = pop_pay_pottery
		value = 0
	}
	set_variable = {
		name = pop_pay_textile
		value = 0
	}
	set_variable = {
		name = pop_calorie
		value = 0
	}
	set_variable = {
		name = pop_nutrient
		value = 0
	}
	set_variable = {
		name = pop_comfort
		value = 0
	}
	set_variable = {
		name = pop_luxury
		value = 0
	}
}
every_in_global_list = {
	variable = prod_instances
	set_variable = {
		name = prod_earn_food
		value = 0
	}
	set_variable = {
		name = prod_earn_fuel
		value = 0
	}
	set_variable = {
		name = prod_earn_fiber
		value = 0
	}
	set_variable = {
		name = prod_earn_pottery
		value = 0
	}
	set_variable = {
		name = prod_earn_textile
		value = 0
	}
	set_variable = {
		name = prod_pay_food
		value = 0
	}
	set_variable = {
		name = prod_pay_fuel
		value = 0
	}
	set_variable = {
		name = prod_pay_fiber
		value = 0
	}
	set_variable = {
		name = prod_pay_pottery
		value = 0
	}
	set_variable = {
		name = prod_pay_textile
		value = 0
	}
}
every_county = {
	limit = {
		is_valid_prov = yes
	}
	if = {
		limit = {
			has_variable = trade_sum_dmnd_food
			var:trade_sum_dmnd_food > 0
		}
		set_variable = {
			name = trade_resolve_trade_t
			value = var:trade_dmnd_food
		}
		change_variable = {
			name = trade_resolve_trade_t
			multiply = 100
		}
		change_variable = {
			name = trade_resolve_trade_t
			divide = var:trade_sum_dmnd_food
		}
		if = {
			limit = {
				has_variable = trade_sum_in_food
				var:trade_sum_in_food > 0
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = var:trade_sum_in_food
			}
			change_variable = {
				name = trade_resolve_trade_tt
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_tt
				divide = var:trade_sum_dmnd_food
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_tt
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = trade_sum_pay_food
				var:trade_sum_pay_food > 0
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = var:trade_sum_pay_food
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_ttt
				value = 0
			}
		}
		if = {
			limit = {
				always = yes
			}
			if = {
				limit = {
					has_variable = pop_calorie_food
					var:pop_calorie_food > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_calorie_food
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_calorie_food
				}
				change_variable = {
					name = pop_calorie
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_calorie_food
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_food
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_food
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_nutrient_food
					var:pop_nutrient_food > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_nutrient_food
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_nutrient_food
				}
				change_variable = {
					name = pop_nutrient
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_nutrient_food
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_food
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_food
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_comfort_food
					var:pop_comfort_food > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_comfort_food
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_comfort_food
				}
				change_variable = {
					name = pop_comfort
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_comfort_food
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_food
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_food
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_luxury_food
					var:pop_luxury_food > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_luxury_food
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_luxury_food
				}
				change_variable = {
					name = pop_luxury
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_luxury_food
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_food
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_food
					add = var:trade_resolve_trade_tttt
				}
			}
		}
		every_in_list = {
			limit = {
				has_variable = prod_dmnd_food
				var:prod_dmnd_food > 0
			}
			variable = prod_instances
			set_variable = {
				name = trade_resolve_trade_t
				value = var:prod_dmnd_food
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_dmnd_food
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = prev.var:trade_resolve_trade_t
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = 100
			}
			set_variable = {
				name = prod_in_food
				value = var:prod_dmnd_food
			}
			change_variable = {
				name = prod_in_food
				multiply = prev.var:trade_resolve_trade_tt
			}
			change_variable = {
				name = prod_in_food
				divide = 100
			}
			set_variable = {
				name = prod_pay_food
				value = prev.var:trade_resolve_trade_ttt
			}
			change_variable = {
				name = prod_pay_food
				multiply = var:trade_resolve_trade_t
			}
			change_variable = {
				name = prod_pay_food
				divide = 100
			}
		}
		every_county_province = {
			limit = {
				has_variable = trade_dmnd_food
				var:trade_dmnd_food > 0
				is_valid_prov = yes
				is_city = yes
			}
			set_variable = {
				name = trade_resolve_trade_t
				value = var:trade_dmnd_food
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sum_dmnd_food
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = prev.var:trade_resolve_trade_tt
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = prev.var:trade_resolve_trade_ttt
			}
			if = {
				limit = {
					always = yes
				}
				if = {
					limit = {
						has_variable = pop_calorie_food
						var:pop_calorie_food > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_calorie_food
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_calorie_food
					}
					change_variable = {
						name = pop_calorie
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_calorie_food
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_food
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_food
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_nutrient_food
						var:pop_nutrient_food > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_nutrient_food
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_nutrient_food
					}
					change_variable = {
						name = pop_nutrient
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_nutrient_food
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_food
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_food
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_comfort_food
						var:pop_comfort_food > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_comfort_food
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_comfort_food
					}
					change_variable = {
						name = pop_comfort
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_comfort_food
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_food
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_food
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_luxury_food
						var:pop_luxury_food > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_luxury_food
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_luxury_food
					}
					change_variable = {
						name = pop_luxury
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_luxury_food
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_food
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_food
						add = var:trade_resolve_trade_tttt
					}
				}
			}
			every_in_list = {
				limit = {
					has_variable = prod_dmnd_food
					var:prod_dmnd_food > 0
				}
				variable = prod_instances
				set_variable = {
					name = trade_resolve_trade_t
					value = var:prod_dmnd_food
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = prev.var:trade_dmnd_food
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = prev.var:trade_resolve_trade_t
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = 100
				}
				set_variable = {
					name = prod_in_food
					value = var:prod_dmnd_food
				}
				change_variable = {
					name = prod_in_food
					multiply = prev.var:trade_resolve_trade_tt
				}
				change_variable = {
					name = prod_in_food
					divide = 100
				}
				set_variable = {
					name = prod_pay_food
					value = prev.var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = prod_pay_food
					multiply = var:trade_resolve_trade_t
				}
				change_variable = {
					name = prod_pay_food
					divide = 100
				}
			}
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_dmnd_fiber
			var:trade_sum_dmnd_fiber > 0
		}
		set_variable = {
			name = trade_resolve_trade_t
			value = var:trade_dmnd_fiber
		}
		change_variable = {
			name = trade_resolve_trade_t
			multiply = 100
		}
		change_variable = {
			name = trade_resolve_trade_t
			divide = var:trade_sum_dmnd_fiber
		}
		if = {
			limit = {
				has_variable = trade_sum_in_fiber
				var:trade_sum_in_fiber > 0
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = var:trade_sum_in_fiber
			}
			change_variable = {
				name = trade_resolve_trade_tt
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_tt
				divide = var:trade_sum_dmnd_fiber
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_tt
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = trade_sum_pay_fiber
				var:trade_sum_pay_fiber > 0
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = var:trade_sum_pay_fiber
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_ttt
				value = 0
			}
		}
		if = {
			limit = {
				always = yes
			}
			if = {
				limit = {
					has_variable = pop_calorie_fiber
					var:pop_calorie_fiber > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_calorie_fiber
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_calorie_fiber
				}
				change_variable = {
					name = pop_calorie
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_calorie_fiber
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_fiber
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_fiber
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_nutrient_fiber
					var:pop_nutrient_fiber > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_nutrient_fiber
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_nutrient_fiber
				}
				change_variable = {
					name = pop_nutrient
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_nutrient_fiber
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_fiber
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_fiber
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_comfort_fiber
					var:pop_comfort_fiber > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_comfort_fiber
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_comfort_fiber
				}
				change_variable = {
					name = pop_comfort
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_comfort_fiber
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_fiber
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_fiber
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_luxury_fiber
					var:pop_luxury_fiber > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_luxury_fiber
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_luxury_fiber
				}
				change_variable = {
					name = pop_luxury
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_luxury_fiber
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_fiber
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_fiber
					add = var:trade_resolve_trade_tttt
				}
			}
		}
		every_in_list = {
			limit = {
				has_variable = prod_dmnd_fiber
				var:prod_dmnd_fiber > 0
			}
			variable = prod_instances
			set_variable = {
				name = trade_resolve_trade_t
				value = var:prod_dmnd_fiber
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_dmnd_fiber
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = prev.var:trade_resolve_trade_t
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = 100
			}
			set_variable = {
				name = prod_in_fiber
				value = var:prod_dmnd_fiber
			}
			change_variable = {
				name = prod_in_fiber
				multiply = prev.var:trade_resolve_trade_tt
			}
			change_variable = {
				name = prod_in_fiber
				divide = 100
			}
			set_variable = {
				name = prod_pay_fiber
				value = prev.var:trade_resolve_trade_ttt
			}
			change_variable = {
				name = prod_pay_fiber
				multiply = var:trade_resolve_trade_t
			}
			change_variable = {
				name = prod_pay_fiber
				divide = 100
			}
		}
		every_county_province = {
			limit = {
				has_variable = trade_dmnd_fiber
				var:trade_dmnd_fiber > 0
				is_valid_prov = yes
				is_city = yes
			}
			set_variable = {
				name = trade_resolve_trade_t
				value = var:trade_dmnd_fiber
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sum_dmnd_fiber
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = prev.var:trade_resolve_trade_tt
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = prev.var:trade_resolve_trade_ttt
			}
			if = {
				limit = {
					always = yes
				}
				if = {
					limit = {
						has_variable = pop_calorie_fiber
						var:pop_calorie_fiber > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_calorie_fiber
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_calorie_fiber
					}
					change_variable = {
						name = pop_calorie
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_calorie_fiber
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_fiber
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_fiber
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_nutrient_fiber
						var:pop_nutrient_fiber > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_nutrient_fiber
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_nutrient_fiber
					}
					change_variable = {
						name = pop_nutrient
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_nutrient_fiber
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_fiber
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_fiber
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_comfort_fiber
						var:pop_comfort_fiber > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_comfort_fiber
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_comfort_fiber
					}
					change_variable = {
						name = pop_comfort
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_comfort_fiber
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_fiber
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_fiber
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_luxury_fiber
						var:pop_luxury_fiber > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_luxury_fiber
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_luxury_fiber
					}
					change_variable = {
						name = pop_luxury
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_luxury_fiber
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_fiber
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_fiber
						add = var:trade_resolve_trade_tttt
					}
				}
			}
			every_in_list = {
				limit = {
					has_variable = prod_dmnd_fiber
					var:prod_dmnd_fiber > 0
				}
				variable = prod_instances
				set_variable = {
					name = trade_resolve_trade_t
					value = var:prod_dmnd_fiber
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = prev.var:trade_dmnd_fiber
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = prev.var:trade_resolve_trade_t
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = 100
				}
				set_variable = {
					name = prod_in_fiber
					value = var:prod_dmnd_fiber
				}
				change_variable = {
					name = prod_in_fiber
					multiply = prev.var:trade_resolve_trade_tt
				}
				change_variable = {
					name = prod_in_fiber
					divide = 100
				}
				set_variable = {
					name = prod_pay_fiber
					value = prev.var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = prod_pay_fiber
					multiply = var:trade_resolve_trade_t
				}
				change_variable = {
					name = prod_pay_fiber
					divide = 100
				}
			}
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_dmnd_fuel
			var:trade_sum_dmnd_fuel > 0
		}
		set_variable = {
			name = trade_resolve_trade_t
			value = var:trade_dmnd_fuel
		}
		change_variable = {
			name = trade_resolve_trade_t
			multiply = 100
		}
		change_variable = {
			name = trade_resolve_trade_t
			divide = var:trade_sum_dmnd_fuel
		}
		if = {
			limit = {
				has_variable = trade_sum_in_fuel
				var:trade_sum_in_fuel > 0
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = var:trade_sum_in_fuel
			}
			change_variable = {
				name = trade_resolve_trade_tt
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_tt
				divide = var:trade_sum_dmnd_fuel
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_tt
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = trade_sum_pay_fuel
				var:trade_sum_pay_fuel > 0
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = var:trade_sum_pay_fuel
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_ttt
				value = 0
			}
		}
		if = {
			limit = {
				always = yes
			}
			if = {
				limit = {
					has_variable = pop_calorie_fuel
					var:pop_calorie_fuel > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_calorie_fuel
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_calorie_fuel
				}
				change_variable = {
					name = pop_calorie
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_calorie_fuel
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_fuel
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_fuel
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_nutrient_fuel
					var:pop_nutrient_fuel > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_nutrient_fuel
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_nutrient_fuel
				}
				change_variable = {
					name = pop_nutrient
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_nutrient_fuel
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_fuel
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_fuel
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_comfort_fuel
					var:pop_comfort_fuel > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_comfort_fuel
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_comfort_fuel
				}
				change_variable = {
					name = pop_comfort
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_comfort_fuel
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_fuel
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_fuel
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_luxury_fuel
					var:pop_luxury_fuel > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_luxury_fuel
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_luxury_fuel
				}
				change_variable = {
					name = pop_luxury
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_luxury_fuel
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_fuel
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_fuel
					add = var:trade_resolve_trade_tttt
				}
			}
		}
		every_in_list = {
			limit = {
				has_variable = prod_dmnd_fuel
				var:prod_dmnd_fuel > 0
			}
			variable = prod_instances
			set_variable = {
				name = trade_resolve_trade_t
				value = var:prod_dmnd_fuel
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_dmnd_fuel
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = prev.var:trade_resolve_trade_t
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = 100
			}
			set_variable = {
				name = prod_in_fuel
				value = var:prod_dmnd_fuel
			}
			change_variable = {
				name = prod_in_fuel
				multiply = prev.var:trade_resolve_trade_tt
			}
			change_variable = {
				name = prod_in_fuel
				divide = 100
			}
			set_variable = {
				name = prod_pay_fuel
				value = prev.var:trade_resolve_trade_ttt
			}
			change_variable = {
				name = prod_pay_fuel
				multiply = var:trade_resolve_trade_t
			}
			change_variable = {
				name = prod_pay_fuel
				divide = 100
			}
		}
		every_county_province = {
			limit = {
				has_variable = trade_dmnd_fuel
				var:trade_dmnd_fuel > 0
				is_valid_prov = yes
				is_city = yes
			}
			set_variable = {
				name = trade_resolve_trade_t
				value = var:trade_dmnd_fuel
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sum_dmnd_fuel
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = prev.var:trade_resolve_trade_tt
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = prev.var:trade_resolve_trade_ttt
			}
			if = {
				limit = {
					always = yes
				}
				if = {
					limit = {
						has_variable = pop_calorie_fuel
						var:pop_calorie_fuel > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_calorie_fuel
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_calorie_fuel
					}
					change_variable = {
						name = pop_calorie
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_calorie_fuel
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_fuel
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_fuel
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_nutrient_fuel
						var:pop_nutrient_fuel > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_nutrient_fuel
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_nutrient_fuel
					}
					change_variable = {
						name = pop_nutrient
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_nutrient_fuel
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_fuel
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_fuel
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_comfort_fuel
						var:pop_comfort_fuel > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_comfort_fuel
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_comfort_fuel
					}
					change_variable = {
						name = pop_comfort
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_comfort_fuel
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_fuel
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_fuel
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_luxury_fuel
						var:pop_luxury_fuel > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_luxury_fuel
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_luxury_fuel
					}
					change_variable = {
						name = pop_luxury
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_luxury_fuel
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_fuel
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_fuel
						add = var:trade_resolve_trade_tttt
					}
				}
			}
			every_in_list = {
				limit = {
					has_variable = prod_dmnd_fuel
					var:prod_dmnd_fuel > 0
				}
				variable = prod_instances
				set_variable = {
					name = trade_resolve_trade_t
					value = var:prod_dmnd_fuel
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = prev.var:trade_dmnd_fuel
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = prev.var:trade_resolve_trade_t
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = 100
				}
				set_variable = {
					name = prod_in_fuel
					value = var:prod_dmnd_fuel
				}
				change_variable = {
					name = prod_in_fuel
					multiply = prev.var:trade_resolve_trade_tt
				}
				change_variable = {
					name = prod_in_fuel
					divide = 100
				}
				set_variable = {
					name = prod_pay_fuel
					value = prev.var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = prod_pay_fuel
					multiply = var:trade_resolve_trade_t
				}
				change_variable = {
					name = prod_pay_fuel
					divide = 100
				}
			}
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_dmnd_pottery
			var:trade_sum_dmnd_pottery > 0
		}
		set_variable = {
			name = trade_resolve_trade_t
			value = var:trade_dmnd_pottery
		}
		change_variable = {
			name = trade_resolve_trade_t
			multiply = 100
		}
		change_variable = {
			name = trade_resolve_trade_t
			divide = var:trade_sum_dmnd_pottery
		}
		if = {
			limit = {
				has_variable = trade_sum_in_pottery
				var:trade_sum_in_pottery > 0
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = var:trade_sum_in_pottery
			}
			change_variable = {
				name = trade_resolve_trade_tt
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_tt
				divide = var:trade_sum_dmnd_pottery
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_tt
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = trade_sum_pay_pottery
				var:trade_sum_pay_pottery > 0
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = var:trade_sum_pay_pottery
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_ttt
				value = 0
			}
		}
		if = {
			limit = {
				always = yes
			}
			if = {
				limit = {
					has_variable = pop_calorie_pottery
					var:pop_calorie_pottery > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_calorie_pottery
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_calorie_pottery
				}
				change_variable = {
					name = pop_calorie
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_calorie_pottery
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_pottery
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_pottery
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_nutrient_pottery
					var:pop_nutrient_pottery > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_nutrient_pottery
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_nutrient_pottery
				}
				change_variable = {
					name = pop_nutrient
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_nutrient_pottery
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_pottery
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_pottery
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_comfort_pottery
					var:pop_comfort_pottery > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_comfort_pottery
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_comfort_pottery
				}
				change_variable = {
					name = pop_comfort
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_comfort_pottery
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_pottery
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_pottery
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_luxury_pottery
					var:pop_luxury_pottery > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_luxury_pottery
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_luxury_pottery
				}
				change_variable = {
					name = pop_luxury
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_luxury_pottery
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_pottery
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_pottery
					add = var:trade_resolve_trade_tttt
				}
			}
		}
		every_in_list = {
			limit = {
				has_variable = prod_dmnd_pottery
				var:prod_dmnd_pottery > 0
			}
			variable = prod_instances
			set_variable = {
				name = trade_resolve_trade_t
				value = var:prod_dmnd_pottery
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_dmnd_pottery
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = prev.var:trade_resolve_trade_t
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = 100
			}
			set_variable = {
				name = prod_in_pottery
				value = var:prod_dmnd_pottery
			}
			change_variable = {
				name = prod_in_pottery
				multiply = prev.var:trade_resolve_trade_tt
			}
			change_variable = {
				name = prod_in_pottery
				divide = 100
			}
			set_variable = {
				name = prod_pay_pottery
				value = prev.var:trade_resolve_trade_ttt
			}
			change_variable = {
				name = prod_pay_pottery
				multiply = var:trade_resolve_trade_t
			}
			change_variable = {
				name = prod_pay_pottery
				divide = 100
			}
		}
		every_county_province = {
			limit = {
				has_variable = trade_dmnd_pottery
				var:trade_dmnd_pottery > 0
				is_valid_prov = yes
				is_city = yes
			}
			set_variable = {
				name = trade_resolve_trade_t
				value = var:trade_dmnd_pottery
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sum_dmnd_pottery
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = prev.var:trade_resolve_trade_tt
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = prev.var:trade_resolve_trade_ttt
			}
			if = {
				limit = {
					always = yes
				}
				if = {
					limit = {
						has_variable = pop_calorie_pottery
						var:pop_calorie_pottery > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_calorie_pottery
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_calorie_pottery
					}
					change_variable = {
						name = pop_calorie
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_calorie_pottery
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_pottery
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_pottery
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_nutrient_pottery
						var:pop_nutrient_pottery > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_nutrient_pottery
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_nutrient_pottery
					}
					change_variable = {
						name = pop_nutrient
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_nutrient_pottery
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_pottery
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_pottery
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_comfort_pottery
						var:pop_comfort_pottery > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_comfort_pottery
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_comfort_pottery
					}
					change_variable = {
						name = pop_comfort
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_comfort_pottery
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_pottery
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_pottery
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_luxury_pottery
						var:pop_luxury_pottery > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_luxury_pottery
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_luxury_pottery
					}
					change_variable = {
						name = pop_luxury
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_luxury_pottery
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_pottery
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_pottery
						add = var:trade_resolve_trade_tttt
					}
				}
			}
			every_in_list = {
				limit = {
					has_variable = prod_dmnd_pottery
					var:prod_dmnd_pottery > 0
				}
				variable = prod_instances
				set_variable = {
					name = trade_resolve_trade_t
					value = var:prod_dmnd_pottery
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = prev.var:trade_dmnd_pottery
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = prev.var:trade_resolve_trade_t
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = 100
				}
				set_variable = {
					name = prod_in_pottery
					value = var:prod_dmnd_pottery
				}
				change_variable = {
					name = prod_in_pottery
					multiply = prev.var:trade_resolve_trade_tt
				}
				change_variable = {
					name = prod_in_pottery
					divide = 100
				}
				set_variable = {
					name = prod_pay_pottery
					value = prev.var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = prod_pay_pottery
					multiply = var:trade_resolve_trade_t
				}
				change_variable = {
					name = prod_pay_pottery
					divide = 100
				}
			}
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_dmnd_textile
			var:trade_sum_dmnd_textile > 0
		}
		set_variable = {
			name = trade_resolve_trade_t
			value = var:trade_dmnd_textile
		}
		change_variable = {
			name = trade_resolve_trade_t
			multiply = 100
		}
		change_variable = {
			name = trade_resolve_trade_t
			divide = var:trade_sum_dmnd_textile
		}
		if = {
			limit = {
				has_variable = trade_sum_in_textile
				var:trade_sum_in_textile > 0
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = var:trade_sum_in_textile
			}
			change_variable = {
				name = trade_resolve_trade_tt
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_tt
				divide = var:trade_sum_dmnd_textile
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_tt
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = trade_sum_pay_textile
				var:trade_sum_pay_textile > 0
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = var:trade_sum_pay_textile
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_ttt
				value = 0
			}
		}
		if = {
			limit = {
				always = yes
			}
			if = {
				limit = {
					has_variable = pop_calorie_textile
					var:pop_calorie_textile > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_calorie_textile
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_calorie_textile
				}
				change_variable = {
					name = pop_calorie
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_calorie_textile
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_textile
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_textile
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_nutrient_textile
					var:pop_nutrient_textile > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_nutrient_textile
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_nutrient_textile
				}
				change_variable = {
					name = pop_nutrient
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_nutrient_textile
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_textile
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_textile
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_comfort_textile
					var:pop_comfort_textile > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_comfort_textile
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_comfort_textile
				}
				change_variable = {
					name = pop_comfort
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_comfort_textile
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_textile
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_textile
					add = var:trade_resolve_trade_tttt
				}
			}
			if = {
				limit = {
					has_variable = pop_luxury_textile
					var:pop_luxury_textile > 0
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_luxury_textile
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_tt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = pop_luxury_textile
				}
				change_variable = {
					name = pop_luxury
					add = var:trade_resolve_trade_tttt
				}
				set_variable = {
					name = trade_resolve_trade_tttt
					value = var:pop_luxury_textile
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = var:trade_sum_dmnd_textile
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					multiply = var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = trade_resolve_trade_tttt
					divide = 100
				}
				change_variable = {
					name = pop_pay_textile
					add = var:trade_resolve_trade_tttt
				}
			}
		}
		every_in_list = {
			limit = {
				has_variable = prod_dmnd_textile
				var:prod_dmnd_textile > 0
			}
			variable = prod_instances
			set_variable = {
				name = trade_resolve_trade_t
				value = var:prod_dmnd_textile
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_dmnd_textile
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = prev.var:trade_resolve_trade_t
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = 100
			}
			set_variable = {
				name = prod_in_textile
				value = var:prod_dmnd_textile
			}
			change_variable = {
				name = prod_in_textile
				multiply = prev.var:trade_resolve_trade_tt
			}
			change_variable = {
				name = prod_in_textile
				divide = 100
			}
			set_variable = {
				name = prod_pay_textile
				value = prev.var:trade_resolve_trade_ttt
			}
			change_variable = {
				name = prod_pay_textile
				multiply = var:trade_resolve_trade_t
			}
			change_variable = {
				name = prod_pay_textile
				divide = 100
			}
		}
		every_county_province = {
			limit = {
				has_variable = trade_dmnd_textile
				var:trade_dmnd_textile > 0
				is_valid_prov = yes
				is_city = yes
			}
			set_variable = {
				name = trade_resolve_trade_t
				value = var:trade_dmnd_textile
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sum_dmnd_textile
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = prev.var:trade_resolve_trade_tt
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = prev.var:trade_resolve_trade_ttt
			}
			if = {
				limit = {
					always = yes
				}
				if = {
					limit = {
						has_variable = pop_calorie_textile
						var:pop_calorie_textile > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_calorie_textile
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_calorie_textile
					}
					change_variable = {
						name = pop_calorie
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_calorie_textile
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_textile
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_textile
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_nutrient_textile
						var:pop_nutrient_textile > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_nutrient_textile
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_nutrient_textile
					}
					change_variable = {
						name = pop_nutrient
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_nutrient_textile
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_textile
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_textile
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_comfort_textile
						var:pop_comfort_textile > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_comfort_textile
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_comfort_textile
					}
					change_variable = {
						name = pop_comfort
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_comfort_textile
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_textile
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_textile
						add = var:trade_resolve_trade_tttt
					}
				}
				if = {
					limit = {
						has_variable = pop_luxury_textile
						var:pop_luxury_textile > 0
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_luxury_textile
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_tt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = pop_luxury_textile
					}
					change_variable = {
						name = pop_luxury
						add = var:trade_resolve_trade_tttt
					}
					set_variable = {
						name = trade_resolve_trade_tttt
						value = var:pop_luxury_textile
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = 100
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = prev.var:trade_sum_dmnd_textile
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						multiply = var:trade_resolve_trade_ttt
					}
					change_variable = {
						name = trade_resolve_trade_tttt
						divide = 100
					}
					change_variable = {
						name = pop_pay_textile
						add = var:trade_resolve_trade_tttt
					}
				}
			}
			every_in_list = {
				limit = {
					has_variable = prod_dmnd_textile
					var:prod_dmnd_textile > 0
				}
				variable = prod_instances
				set_variable = {
					name = trade_resolve_trade_t
					value = var:prod_dmnd_textile
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = prev.var:trade_dmnd_textile
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = prev.var:trade_resolve_trade_t
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = 100
				}
				set_variable = {
					name = prod_in_textile
					value = var:prod_dmnd_textile
				}
				change_variable = {
					name = prod_in_textile
					multiply = prev.var:trade_resolve_trade_tt
				}
				change_variable = {
					name = prod_in_textile
					divide = 100
				}
				set_variable = {
					name = prod_pay_textile
					value = prev.var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = prod_pay_textile
					multiply = var:trade_resolve_trade_t
				}
				change_variable = {
					name = prod_pay_textile
					divide = 100
				}
			}
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_sply_food
			var:trade_sum_sply_food > 0
		}
		set_variable = {
			name = trade_resolve_trade_t
			value = var:trade_sply_food
		}
		change_variable = {
			name = trade_resolve_trade_t
			multiply = 100
		}
		change_variable = {
			name = trade_resolve_trade_t
			divide = var:trade_sum_sply_food
		}
		if = {
			limit = {
				has_variable = trade_sum_out_food
				var:trade_sum_out_food > 0
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = var:trade_sum_out_food
			}
			change_variable = {
				name = trade_resolve_trade_tt
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_tt
				divide = var:trade_sum_sply_food
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_tt
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = trade_sum_earn_food
				var:trade_sum_earn_food > 0
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = var:trade_sum_earn_food
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_ttt
				value = 0
			}
		}
		every_in_list = {
			limit = {
				has_variable = prod_sply_old_food
				var:prod_sply_old_food > 0
			}
			variable = prod_instances
			set_variable = {
				name = trade_resolve_trade_t
				value = var:prod_sply_old_food
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sply_food
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = prev.var:trade_resolve_trade_t
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = 100
			}
			set_variable = {
				name = prod_out_food
				value = var:prod_sply_old_food
			}
			change_variable = {
				name = prod_out_food
				multiply = prev.var:trade_resolve_trade_tt
			}
			change_variable = {
				name = prod_out_food
				divide = 100
			}
			set_variable = {
				name = prod_earn_food
				value = prev.var:trade_resolve_trade_ttt
			}
			change_variable = {
				name = prod_earn_food
				multiply = var:trade_resolve_trade_t
			}
			change_variable = {
				name = prod_earn_food
				divide = 100
			}
		}
		every_county_province = {
			limit = {
				has_variable = trade_sply_food
				var:trade_sply_food > 0
				is_valid_prov = yes
				is_city = yes
			}
			set_variable = {
				name = trade_resolve_trade_t
				value = var:trade_sply_food
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sum_sply_food
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = prev.var:trade_resolve_trade_tt
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = prev.var:trade_resolve_trade_ttt
			}
			every_in_list = {
				limit = {
					has_variable = prod_sply_old_food
					var:prod_sply_old_food > 0
				}
				variable = prod_instances
				set_variable = {
					name = trade_resolve_trade_t
					value = var:prod_sply_old_food
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = prev.var:trade_sply_food
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = prev.var:trade_resolve_trade_t
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = 100
				}
				set_variable = {
					name = prod_out_food
					value = var:prod_sply_old_food
				}
				change_variable = {
					name = prod_out_food
					multiply = prev.var:trade_resolve_trade_tt
				}
				change_variable = {
					name = prod_out_food
					divide = 100
				}
				set_variable = {
					name = prod_earn_food
					value = prev.var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = prod_earn_food
					multiply = var:trade_resolve_trade_t
				}
				change_variable = {
					name = prod_earn_food
					divide = 100
				}
			}
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_sply_fiber
			var:trade_sum_sply_fiber > 0
		}
		set_variable = {
			name = trade_resolve_trade_t
			value = var:trade_sply_fiber
		}
		change_variable = {
			name = trade_resolve_trade_t
			multiply = 100
		}
		change_variable = {
			name = trade_resolve_trade_t
			divide = var:trade_sum_sply_fiber
		}
		if = {
			limit = {
				has_variable = trade_sum_out_fiber
				var:trade_sum_out_fiber > 0
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = var:trade_sum_out_fiber
			}
			change_variable = {
				name = trade_resolve_trade_tt
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_tt
				divide = var:trade_sum_sply_fiber
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_tt
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = trade_sum_earn_fiber
				var:trade_sum_earn_fiber > 0
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = var:trade_sum_earn_fiber
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_ttt
				value = 0
			}
		}
		every_in_list = {
			limit = {
				has_variable = prod_sply_old_fiber
				var:prod_sply_old_fiber > 0
			}
			variable = prod_instances
			set_variable = {
				name = trade_resolve_trade_t
				value = var:prod_sply_old_fiber
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sply_fiber
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = prev.var:trade_resolve_trade_t
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = 100
			}
			set_variable = {
				name = prod_out_fiber
				value = var:prod_sply_old_fiber
			}
			change_variable = {
				name = prod_out_fiber
				multiply = prev.var:trade_resolve_trade_tt
			}
			change_variable = {
				name = prod_out_fiber
				divide = 100
			}
			set_variable = {
				name = prod_earn_fiber
				value = prev.var:trade_resolve_trade_ttt
			}
			change_variable = {
				name = prod_earn_fiber
				multiply = var:trade_resolve_trade_t
			}
			change_variable = {
				name = prod_earn_fiber
				divide = 100
			}
		}
		every_county_province = {
			limit = {
				has_variable = trade_sply_fiber
				var:trade_sply_fiber > 0
				is_valid_prov = yes
				is_city = yes
			}
			set_variable = {
				name = trade_resolve_trade_t
				value = var:trade_sply_fiber
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sum_sply_fiber
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = prev.var:trade_resolve_trade_tt
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = prev.var:trade_resolve_trade_ttt
			}
			every_in_list = {
				limit = {
					has_variable = prod_sply_old_fiber
					var:prod_sply_old_fiber > 0
				}
				variable = prod_instances
				set_variable = {
					name = trade_resolve_trade_t
					value = var:prod_sply_old_fiber
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = prev.var:trade_sply_fiber
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = prev.var:trade_resolve_trade_t
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = 100
				}
				set_variable = {
					name = prod_out_fiber
					value = var:prod_sply_old_fiber
				}
				change_variable = {
					name = prod_out_fiber
					multiply = prev.var:trade_resolve_trade_tt
				}
				change_variable = {
					name = prod_out_fiber
					divide = 100
				}
				set_variable = {
					name = prod_earn_fiber
					value = prev.var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = prod_earn_fiber
					multiply = var:trade_resolve_trade_t
				}
				change_variable = {
					name = prod_earn_fiber
					divide = 100
				}
			}
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_sply_fuel
			var:trade_sum_sply_fuel > 0
		}
		set_variable = {
			name = trade_resolve_trade_t
			value = var:trade_sply_fuel
		}
		change_variable = {
			name = trade_resolve_trade_t
			multiply = 100
		}
		change_variable = {
			name = trade_resolve_trade_t
			divide = var:trade_sum_sply_fuel
		}
		if = {
			limit = {
				has_variable = trade_sum_out_fuel
				var:trade_sum_out_fuel > 0
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = var:trade_sum_out_fuel
			}
			change_variable = {
				name = trade_resolve_trade_tt
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_tt
				divide = var:trade_sum_sply_fuel
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_tt
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = trade_sum_earn_fuel
				var:trade_sum_earn_fuel > 0
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = var:trade_sum_earn_fuel
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_ttt
				value = 0
			}
		}
		every_in_list = {
			limit = {
				has_variable = prod_sply_old_fuel
				var:prod_sply_old_fuel > 0
			}
			variable = prod_instances
			set_variable = {
				name = trade_resolve_trade_t
				value = var:prod_sply_old_fuel
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sply_fuel
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = prev.var:trade_resolve_trade_t
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = 100
			}
			set_variable = {
				name = prod_out_fuel
				value = var:prod_sply_old_fuel
			}
			change_variable = {
				name = prod_out_fuel
				multiply = prev.var:trade_resolve_trade_tt
			}
			change_variable = {
				name = prod_out_fuel
				divide = 100
			}
			set_variable = {
				name = prod_earn_fuel
				value = prev.var:trade_resolve_trade_ttt
			}
			change_variable = {
				name = prod_earn_fuel
				multiply = var:trade_resolve_trade_t
			}
			change_variable = {
				name = prod_earn_fuel
				divide = 100
			}
		}
		every_county_province = {
			limit = {
				has_variable = trade_sply_fuel
				var:trade_sply_fuel > 0
				is_valid_prov = yes
				is_city = yes
			}
			set_variable = {
				name = trade_resolve_trade_t
				value = var:trade_sply_fuel
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sum_sply_fuel
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = prev.var:trade_resolve_trade_tt
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = prev.var:trade_resolve_trade_ttt
			}
			every_in_list = {
				limit = {
					has_variable = prod_sply_old_fuel
					var:prod_sply_old_fuel > 0
				}
				variable = prod_instances
				set_variable = {
					name = trade_resolve_trade_t
					value = var:prod_sply_old_fuel
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = prev.var:trade_sply_fuel
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = prev.var:trade_resolve_trade_t
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = 100
				}
				set_variable = {
					name = prod_out_fuel
					value = var:prod_sply_old_fuel
				}
				change_variable = {
					name = prod_out_fuel
					multiply = prev.var:trade_resolve_trade_tt
				}
				change_variable = {
					name = prod_out_fuel
					divide = 100
				}
				set_variable = {
					name = prod_earn_fuel
					value = prev.var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = prod_earn_fuel
					multiply = var:trade_resolve_trade_t
				}
				change_variable = {
					name = prod_earn_fuel
					divide = 100
				}
			}
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_sply_pottery
			var:trade_sum_sply_pottery > 0
		}
		set_variable = {
			name = trade_resolve_trade_t
			value = var:trade_sply_pottery
		}
		change_variable = {
			name = trade_resolve_trade_t
			multiply = 100
		}
		change_variable = {
			name = trade_resolve_trade_t
			divide = var:trade_sum_sply_pottery
		}
		if = {
			limit = {
				has_variable = trade_sum_out_pottery
				var:trade_sum_out_pottery > 0
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = var:trade_sum_out_pottery
			}
			change_variable = {
				name = trade_resolve_trade_tt
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_tt
				divide = var:trade_sum_sply_pottery
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_tt
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = trade_sum_earn_pottery
				var:trade_sum_earn_pottery > 0
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = var:trade_sum_earn_pottery
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_ttt
				value = 0
			}
		}
		every_in_list = {
			limit = {
				has_variable = prod_sply_old_pottery
				var:prod_sply_old_pottery > 0
			}
			variable = prod_instances
			set_variable = {
				name = trade_resolve_trade_t
				value = var:prod_sply_old_pottery
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sply_pottery
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = prev.var:trade_resolve_trade_t
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = 100
			}
			set_variable = {
				name = prod_out_pottery
				value = var:prod_sply_old_pottery
			}
			change_variable = {
				name = prod_out_pottery
				multiply = prev.var:trade_resolve_trade_tt
			}
			change_variable = {
				name = prod_out_pottery
				divide = 100
			}
			set_variable = {
				name = prod_earn_pottery
				value = prev.var:trade_resolve_trade_ttt
			}
			change_variable = {
				name = prod_earn_pottery
				multiply = var:trade_resolve_trade_t
			}
			change_variable = {
				name = prod_earn_pottery
				divide = 100
			}
		}
		every_county_province = {
			limit = {
				has_variable = trade_sply_pottery
				var:trade_sply_pottery > 0
				is_valid_prov = yes
				is_city = yes
			}
			set_variable = {
				name = trade_resolve_trade_t
				value = var:trade_sply_pottery
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sum_sply_pottery
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = prev.var:trade_resolve_trade_tt
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = prev.var:trade_resolve_trade_ttt
			}
			every_in_list = {
				limit = {
					has_variable = prod_sply_old_pottery
					var:prod_sply_old_pottery > 0
				}
				variable = prod_instances
				set_variable = {
					name = trade_resolve_trade_t
					value = var:prod_sply_old_pottery
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = prev.var:trade_sply_pottery
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = prev.var:trade_resolve_trade_t
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = 100
				}
				set_variable = {
					name = prod_out_pottery
					value = var:prod_sply_old_pottery
				}
				change_variable = {
					name = prod_out_pottery
					multiply = prev.var:trade_resolve_trade_tt
				}
				change_variable = {
					name = prod_out_pottery
					divide = 100
				}
				set_variable = {
					name = prod_earn_pottery
					value = prev.var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = prod_earn_pottery
					multiply = var:trade_resolve_trade_t
				}
				change_variable = {
					name = prod_earn_pottery
					divide = 100
				}
			}
		}
	}
	if = {
		limit = {
			has_variable = trade_sum_sply_textile
			var:trade_sum_sply_textile > 0
		}
		set_variable = {
			name = trade_resolve_trade_t
			value = var:trade_sply_textile
		}
		change_variable = {
			name = trade_resolve_trade_t
			multiply = 100
		}
		change_variable = {
			name = trade_resolve_trade_t
			divide = var:trade_sum_sply_textile
		}
		if = {
			limit = {
				has_variable = trade_sum_out_textile
				var:trade_sum_out_textile > 0
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = var:trade_sum_out_textile
			}
			change_variable = {
				name = trade_resolve_trade_tt
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_tt
				divide = var:trade_sum_sply_textile
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_tt
				value = 0
			}
		}
		if = {
			limit = {
				has_variable = trade_sum_earn_textile
				var:trade_sum_earn_textile > 0
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = var:trade_sum_earn_textile
			}
		}
		else = {
			set_variable = {
				name = trade_resolve_trade_ttt
				value = 0
			}
		}
		every_in_list = {
			limit = {
				has_variable = prod_sply_old_textile
				var:prod_sply_old_textile > 0
			}
			variable = prod_instances
			set_variable = {
				name = trade_resolve_trade_t
				value = var:prod_sply_old_textile
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sply_textile
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = prev.var:trade_resolve_trade_t
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = 100
			}
			set_variable = {
				name = prod_out_textile
				value = var:prod_sply_old_textile
			}
			change_variable = {
				name = prod_out_textile
				multiply = prev.var:trade_resolve_trade_tt
			}
			change_variable = {
				name = prod_out_textile
				divide = 100
			}
			set_variable = {
				name = prod_earn_textile
				value = prev.var:trade_resolve_trade_ttt
			}
			change_variable = {
				name = prod_earn_textile
				multiply = var:trade_resolve_trade_t
			}
			change_variable = {
				name = prod_earn_textile
				divide = 100
			}
		}
		every_county_province = {
			limit = {
				has_variable = trade_sply_textile
				var:trade_sply_textile > 0
				is_valid_prov = yes
				is_city = yes
			}
			set_variable = {
				name = trade_resolve_trade_t
				value = var:trade_sply_textile
			}
			change_variable = {
				name = trade_resolve_trade_t
				multiply = 100
			}
			change_variable = {
				name = trade_resolve_trade_t
				divide = prev.var:trade_sum_sply_textile
			}
			set_variable = {
				name = trade_resolve_trade_tt
				value = prev.var:trade_resolve_trade_tt
			}
			set_variable = {
				name = trade_resolve_trade_ttt
				value = prev.var:trade_resolve_trade_ttt
			}
			every_in_list = {
				limit = {
					has_variable = prod_sply_old_textile
					var:prod_sply_old_textile > 0
				}
				variable = prod_instances
				set_variable = {
					name = trade_resolve_trade_t
					value = var:prod_sply_old_textile
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = 100
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = prev.var:trade_sply_textile
				}
				change_variable = {
					name = trade_resolve_trade_t
					multiply = prev.var:trade_resolve_trade_t
				}
				change_variable = {
					name = trade_resolve_trade_t
					divide = 100
				}
				set_variable = {
					name = prod_out_textile
					value = var:prod_sply_old_textile
				}
				change_variable = {
					name = prod_out_textile
					multiply = prev.var:trade_resolve_trade_tt
				}
				change_variable = {
					name = prod_out_textile
					divide = 100
				}
				set_variable = {
					name = prod_earn_textile
					value = prev.var:trade_resolve_trade_ttt
				}
				change_variable = {
					name = prod_earn_textile
					multiply = var:trade_resolve_trade_t
				}
				change_variable = {
					name = prod_earn_textile
					divide = 100
				}
			}
		}
	}
	change_variable = {
		name = pop_calorie
		divide = var:pop_total
	}
	change_variable = {
		name = pop_calorie
		divide = var:modi_pop_calorie
	}
	change_variable = {
		name = pop_nutrient
		divide = var:pop_total
	}
	change_variable = {
		name = pop_nutrient
		divide = var:modi_pop_nutrient
	}
	change_variable = {
		name = pop_comfort
		divide = var:pop_total
	}
	change_variable = {
		name = pop_comfort
		divide = var:modi_pop_comfort
	}
	change_variable = {
		name = pop_luxury
		divide = var:pop_total
	}
	change_variable = {
		name = pop_luxury
		divide = var:modi_pop_luxury
	}
	set_variable = {
		name = pop_pay
		value = var:pop_pay_food
	}
	change_variable = {
		name = pop_pay
		add = var:pop_pay_fuel
	}
	change_variable = {
		name = pop_pay
		add = var:pop_pay_fiber
	}
	change_variable = {
		name = pop_pay
		add = var:pop_pay_pottery
	}
	change_variable = {
		name = pop_pay
		add = var:pop_pay_textile
	}
	remove_variable = trade_resolve_trade_t
	remove_variable = trade_resolve_trade_tt
	remove_variable = trade_resolve_trade_ttt
	remove_variable = trade_resolve_trade_tttt
}
every_province = {
	limit = {
		is_valid_prov = yes
		is_city = yes
	}
	change_variable = {
		name = pop_calorie
		divide = var:pop_total
	}
	change_variable = {
		name = pop_calorie
		divide = var:modi_pop_calorie
	}
	change_variable = {
		name = pop_nutrient
		divide = var:pop_total
	}
	change_variable = {
		name = pop_nutrient
		divide = var:modi_pop_nutrient
	}
	change_variable = {
		name = pop_comfort
		divide = var:pop_total
	}
	change_variable = {
		name = pop_comfort
		divide = var:modi_pop_comfort
	}
	change_variable = {
		name = pop_luxury
		divide = var:pop_total
	}
	change_variable = {
		name = pop_luxury
		divide = var:modi_pop_luxury
	}
	set_variable = {
		name = pop_pay
		value = var:pop_pay_food
	}
	change_variable = {
		name = pop_pay
		add = var:pop_pay_fuel
	}
	change_variable = {
		name = pop_pay
		add = var:pop_pay_fiber
	}
	change_variable = {
		name = pop_pay
		add = var:pop_pay_pottery
	}
	change_variable = {
		name = pop_pay
		add = var:pop_pay_textile
	}
	remove_variable = trade_resolve_trade_t
	remove_variable = trade_resolve_trade_tt
	remove_variable = trade_resolve_trade_ttt
	remove_variable = trade_resolve_trade_tttt
}
every_in_global_list = {
	variable = prod_instances
	set_variable = {
		name = prod_earn
		value = var:prod_earn_food
	}
	change_variable = {
		name = prod_earn
		add = var:prod_earn_fiber
	}
	change_variable = {
		name = prod_earn
		add = var:prod_earn_fuel
	}
	change_variable = {
		name = prod_earn
		add = var:prod_earn_pottery
	}
	change_variable = {
		name = prod_earn
		add = var:prod_earn_textile
	}
	set_variable = {
		name = prod_pay
		value = var:prod_pay_food
	}
	change_variable = {
		name = prod_pay
		add = var:prod_pay_fiber
	}
	change_variable = {
		name = prod_pay
		add = var:prod_pay_fuel
	}
	change_variable = {
		name = prod_pay
		add = var:prod_pay_pottery
	}
	change_variable = {
		name = prod_pay
		add = var:prod_pay_textile
	}
	remove_variable = trade_resolve_trade_t
}
